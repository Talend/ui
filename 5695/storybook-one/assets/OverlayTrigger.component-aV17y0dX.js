import{r as c,j as h,ar as P,at as r,c as C}from"./iframe-BPWKJ2_o.js";import{c as D,a as d,w as M}from"./RootCloseWrapper-CMQxteV5.js";import{O as b,P as A}from"./Popover-CpIv-jbF.js";const H=["autoFocus","className","form","id","name","rel","role","tabIndex","target","title"],j=["aria-","data-"];function k(o,e){if(!o)return{};const t={};return Object.keys(o.propTypes||{}).forEach(n=>{e[n]!==void 0&&(t[n]=e[n])}),t}function N(o){const e={};return Object.keys(o).forEach(t=>{(H.some(n=>t===n)||j.some(n=>t.startsWith(n)))&&(e[t]=o[t])}),e}function X(o,e){return o?{...N(e),...k(o,e)}:{}}function g(o,e){return Array.isArray(e)?e.indexOf(o)>=0:o===e}const T=r.oneOf(["click","hover","focus"]),R={...b.propTypes,trigger:r.oneOfType([T,r.arrayOf(T)]),delay:r.number,delayShow:r.number,delayHide:r.number,defaultOverlayShown:r.bool,overlay:r.node.isRequired,onBlur:r.func,onClick:r.func,onFocus:r.func,onMouseOut:r.func,onMouseOver:r.func,target:r.oneOf([null]),onHide:r.oneOf([null]),show:r.oneOf([null])},B={defaultOverlayShown:!1,trigger:["hover","focus"]};let p=class extends c.Component{constructor(e,t){super(e,t),this.handleToggle=this.handleToggle.bind(this),this.handleDelayedShow=this.handleDelayedShow.bind(this),this.handleDelayedHide=this.handleDelayedHide.bind(this),this.handleHide=this.handleHide.bind(this),this.handleMouseOver=n=>this.handleMouseOverOut(this.handleDelayedShow,n,"fromElement"),this.handleMouseOut=n=>this.handleMouseOverOut(this.handleDelayedHide,n,"toElement"),this._mountNode=document.createElement("div"),document.body.appendChild(this._mountNode),this.state={show:e.defaultOverlayShown}}componentWillUnmount(){document.body.removeChild(this._mountNode),clearTimeout(this._hoverShowDelay),clearTimeout(this._hoverHideDelay)}handleDelayedHide(){if(this._hoverShowDelay!=null){clearTimeout(this._hoverShowDelay),this._hoverShowDelay=null;return}if(!this.state.show||this._hoverHideDelay!=null)return;const e=this.props.delayHide!=null?this.props.delayHide:this.props.delay;if(!e){this.hide();return}this._hoverHideDelay=setTimeout(()=>{this._hoverHideDelay=null,this.hide()},e)}handleDelayedShow(){if(this._hoverHideDelay!=null){clearTimeout(this._hoverHideDelay),this._hoverHideDelay=null;return}if(this.state.show||this._hoverShowDelay!=null)return;const e=this.props.delayShow!=null?this.props.delayShow:this.props.delay;if(!e){this.show();return}this._hoverShowDelay=setTimeout(()=>{this._hoverShowDelay=null,this.show()},e)}handleHide(){this.hide()}handleMouseOverOut(e,t,n){const s=t.currentTarget,i=t.relatedTarget||t.nativeEvent[n];(!i||i!==s)&&!D(s,i)&&e(t)}handleToggle(){this.state.show?this.hide():this.show()}hide(){this.setState({show:!1})}makeOverlay(e,t){return h.jsx(b,{...t,show:this.state.show,onHide:this.handleHide,target:this,children:e})}show(){this.setState({show:!0})}renderOverlay(e,t){return P.createPortal(this.makeOverlay(e,t),this._mountNode)}render(){const{trigger:e,overlay:t,children:n,onBlur:s,onClick:i,onFocus:l,onMouseOut:m,onMouseOver:x,...f}=this.props;delete f.delay,delete f.delayShow,delete f.delayHide,delete f.defaultOverlayShown;const E=c.Children.only(n),y=E.props,u={};return this.state.show&&(u["aria-describedby"]=t.props.id),u.onClick=d(y.onClick,i),g("click",e)&&(u.onClick=d(u.onClick,this.handleToggle)),g("hover",e)&&(M(e!=="hover",'[react-bootstrap] Specifying only the `"hover"` trigger limits the visibility of the overlay to just mouse users. Consider also including the `"focus"` trigger so that touch and keyboard only users can see the overlay as well.'),u.onMouseOver=d(y.onMouseOver,x,this.handleMouseOver),u.onMouseOut=d(y.onMouseOut,m,this.handleMouseOut)),g("focus",e)&&(u.onFocus=d(y.onFocus,l,this.handleDelayedShow),u.onBlur=d(y.onBlur,s,this.handleDelayedHide)),h.jsxs(h.Fragment,{children:[c.cloneElement(E,u),this.renderOverlay(t,f)]})}};p.propTypes=R;p.defaultProps=B;p.displayName="OverlayTriggerForked";function S({error:o}){return h.jsx("div",{className:"alert alert-danger",children:o})}function a({getComponent:o,component:e,...t}){if(!o||!e)return null;try{const n=o(e);return h.jsx(n,{...t})}catch(n){return h.jsx(S,{error:n.message})}}a.map=function(e,t,n=a){return t.map((s,i)=>h.jsx(n,{getComponent:e,...s},i))};a.all=function(e,t,n=a){return(s,i={})=>{if(!t)return null;const l=t[s];return Array.isArray(l)?a.map(e,l,n):c.isValidElement(l)?l:typeof l=="object"?h.jsx(n,{getComponent:e,...i,...l}):null}};a.get=function(e,t,n){if(typeof t=="function")return t;if(!e||t==null)return n;try{return e(t)}catch{return n}};a.getAll=function(e,t){const n={};return Object.keys(t).forEach(s=>{n[s]=a.get(e,s,t[s])}),n};a.getReactElement=function o(e,t,n=a,s=!1){let i;if(Array.isArray(t))return t.map(l=>o(e,l,n,!0));if(t===null)return t;if(typeof t=="string"){const l={getComponent:e,component:t};return s&&(i=`${t}#default`),c.createElement(n,{...l,key:i})}else{if(c.isValidElement(t))return t;if(typeof t=="object"){const l={getComponent:e,...t};return s&&(i=`${t.component}#${t.componentId||"default"}`),c.createElement(n,{...l,key:i})}}return t};a.getReactElement.propTypes=r.oneOfType([r.string,r.shape({component:r.string}),r.element,r.arrayOf(r.oneOfType([r.string,r.shape({component:r.string}),r.element]))]);a.displayName="Inject";a.NotFound=S;const w="top",O="bottom",F="BODY",L="tc-dropdown-container",V="popover";function I(o){let e=o;for(;!e.classList.contains(V);)e=e.parentElement;return e}function Y(o){let e=o;do e=e.parentElement;while(e&&e.tagName!==F&&!e.classList.contains(L));return e}function v(o,e){return e.top<=o.top&&e.bottom>=o.bottom}function $(o,e,t){let n,s;return t===O?(n=o.top-e.height-(e.top-o.bottom),s=n+e.height):(s=o.bottom+e.height+(o.top-e.bottom),n=s-e.height),{top:n,bottom:s}}function G(o,e,t,n){if(v(e,t))return n;const s=$(o,e,n);return n===O&&v(s,t)?w:n===w&&v(s,t)?O:n}const W={"tc-action-button-positionned":"_tc-action-button-positionned_m51fp_2"},U={...p.propTypes,overlayComponent:a.getReactElement.propTypes,overlayId:r.string,overlayPlacement:p.propTypes.placement,overlayRef:r.func,preventScrolling:r.bool};function q(o,e,t){const n=I(o),i=Y(n).getBoundingClientRect(),l=n.getBoundingClientRect(),m=e.getBoundingClientRect();return G(m,l,i,t)}class _ extends c.Component{constructor(e){super(e),this.setTriggerElement=this.setTriggerElement.bind(this),this.onEntering=this.onEntering.bind(this),this.onExited=this.onExited.bind(this),this.state={placement:this.props.overlayPlacement}}onExited(){this.setState({placement:this.props.overlayPlacement})}onEntering(e){this.setState(t=>{const n=q(e,this.triggerElement,t.placement);return n===t.placement?null:{placement:n}})}setTriggerElement(e){this.triggerElement=e}render(){const e=this.props.getComponent?a.getReactElement(this.props.getComponent,this.props.overlayComponent):this.props.overlayComponent,t={placement:this.state.placement,onClick:this.props.onClick,onEntering:this.onEntering,onExited:this.onExited,overlay:h.jsx(A,{id:this.props.overlayId,children:e}),ref:this.props.overlayRef,rootClose:!0,trigger:this.props.trigger},n={onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut,onFocus:this.props.onFocus,onBlur:this.props.onBlur};return this.props.preventScrolling&&(t.container=this),h.jsx("span",{ref:this.setTriggerElement,className:C(W["tc-action-button-positionned"],"tc-action-button-positionned"),children:h.jsx(p,{...t,children:c.cloneElement(this.props.children,n)})})}}_.propTypes={children:r.element,getComponent:r.func,onClick:r.func,trigger:r.oneOfType([r.string,r.arrayOf(r.string)]),...U};_.defaultProps={preventScrolling:!1,trigger:"click"};export{a as I,_ as O,X as g};
