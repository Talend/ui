import{r as J,u as Ge,j as $,au as re,c as De,x as Fe}from"./iframe-BPWKJ2_o.js";import{d as Ye,i as Se,T as Dt,a as Ft}from"./transform-CLRdSQou.js";import{d as G}from"./select-ArGWXfGl.js";import"./TreeView.component-4fKhkyRU.js";import"./ResourcePicker.component-CPZTwGOK.js";import{K as Le}from"./KeyValueTooltip.component-3ZD4F4YP.js";import{q as Ue}from"./linear-BUPp6Ss9.js";import{r as ae}from"./string-xuEJKGi6.js";import"./preload-helper-PPVm8Dsz.js";import"./withTranslation-ByA2ZQp2.js";import"./reactour.esm-BLqzdYgs.js";import"./index-B5EOfhho.js";import"./tslib.es6-DwEbZtuj.js";import"./inheritsLoose-DEJIaahp.js";import"./ErrorState-CpwJJYvt.js";import"./Transition-CPW5JkxA.js";import"./Transition-5lMdqHLm.js";import"./Modal-xQCj8Bc_.js";import"./interopRequireDefault-CBIuXflU.js";import"./RootCloseWrapper-CMQxteV5.js";import"./SplitButton-C2kpOeLT.js";import"./Popover-CpIv-jbF.js";import"./removeClass-B-DUduzN.js";import"./CellMeasurerCache-C-j05lk4.js";import"./index-BQuMIMh7.js";import"./cjs-D0BsagJH.js";import"./Tab-DXst7kRb.js";import"./NavItem-B_4_tAyF.js";import"./index-Deb_DsOu.js";import"./NavDropdown-C27fh5DP.js";import"./Panel-CyyAvb2Y.js";import"./useLocalStorage-BZDC0oLq.js";import"./util-jvF6Sxgj.js";import"./ButtonIconFloating-Dr0_u1zg.js";import"./memoize-one.esm-BdPwpGay.js";import"./index-BPavWh-U.js";import"./arc-C8ymbxV7.js";import"./path-B39wOLeq.js";import"./Dot-BZdKv4my.js";import"./isObject-BBcAHmi8.js";import"./eq-CT9ytHj1.js";import"./isSymbol-DtjENQP0.js";import"./get-6sLcuglD.js";import"./_baseGet-GCSfqC3R.js";import"./toString-RNHQn9jk.js";import"./isNil-BnDol1ce.js";import"./isString-DsT7vuMJ.js";import"./index-BmzDvynk.js";import"./index-Rbgy7uSV.js";import"./usePopper-CM0sjsC9.js";import"./index-CPccb1WS.js";import"./locale-BUXC210M.js";import"./setYear-D-oJS44X.js";import"./isWithinInterval-CUy1UPDd.js";import"./setSeconds-bzIzS23A.js";import"./cjs-BEvbhKhz.js";import"./DropdownButton-BvV7HSyt.js";import"./FormControl-Byfim0nt.js";import"./useKey-CMZBaLcz.js";import"./Tooltip.component-BgK3ocI9.js";class ot{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const i=this._partials;let n=0;for(let o=0;o<this._n&&o<32;o++){const l=i[o],u=e+l,c=Math.abs(e)<Math.abs(l)?e-(u-l):l-(u-e);c&&(i[n++]=c),e=u}return i[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let i=this._n,n,o,l,u=0;if(i>0){for(u=e[--i];i>0&&(n=u,o=e[--i],u=n+o,l=o-(u-n),!l););i>0&&(l<0&&e[i-1]<0||l>0&&e[i-1]>0)&&(o=l*2,n=u+o,o==n-u&&(u=n))}return u}}function*Ve(t){for(const e of t)yield*e}function Be(t){return Array.from(Ve(t))}function Xe(t){let e;for(;e=t.sourceEvent;)t=e;return t}function K(t,e){if(t=Xe(t),e===void 0&&(e=t.currentTarget),e){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var n=i.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}const Vt={capture:!0,passive:!1};function Bt(t){t.preventDefault(),t.stopImmediatePropagation()}function qe(t){var e=t.document.documentElement,i=G(t).on("dragstart.drag",Bt,Vt);"onselectstart"in e?i.on("selectstart.drag",Bt,Vt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ze(t,e){var i=t.document.documentElement,n=G(t).on("dragstart.drag",null);e&&(n.on("click.drag",Bt,Vt),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in i?n.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}var je=1e-12;function ue(t){return((t=Math.exp(t))+1/t)/2}function Ke(t){return((t=Math.exp(t))-1/t)/2}function He(t){return((t=Math.exp(2*t))-1)/(t+1)}const We=(function t(e,i,n){function o(l,u){var c=l[0],S=l[1],m=l[2],s=u[0],p=u[1],f=u[2],v=s-c,d=p-S,x=v*v+d*d,k,_;if(x<je)_=Math.log(f/m)/e,k=function(b){return[c+b*v,S+b*d,m*Math.exp(e*b*_)]};else{var P=Math.sqrt(x),R=(f*f-m*m+n*x)/(2*m*i*P),y=(f*f-m*m-n*x)/(2*f*i*P),z=Math.log(Math.sqrt(R*R+1)-R),C=Math.log(Math.sqrt(y*y+1)-y);_=(C-z)/e,k=function(b){var j=b*_,W=ue(z),Q=m/(i*P)*(W*He(e*j+z)-Ke(z));return[c+Q*v,S+Q*d,m*W/ue(e*j+z)]}}return k.duration=_*1e3*e/Math.SQRT2,k}return o.rho=function(l){var u=Math.max(.001,+l),c=u*u,S=c*c;return t(u,c,S)},o})(Math.SQRT2,2,4);var nt=1e-6,ne=Math.PI,Qe=ne*2,Je=180/ne,tn=ne/180,it=Math.abs,en=Math.cos,nn=Math.sin,ie=Math.sqrt;function F(){}function Pt(t,e){t&&le.hasOwnProperty(t.type)&&le[t.type](t,e)}var se={Feature:function(t,e){Pt(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,n=-1,o=i.length;++n<o;)Pt(i[n].geometry,e)}},le={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,n=-1,o=i.length;++n<o;)t=i[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){Xt(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,n=-1,o=i.length;++n<o;)Xt(i[n],e,0)},Polygon:function(t,e){ce(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,n=-1,o=i.length;++n<o;)ce(i[n],e)},GeometryCollection:function(t,e){for(var i=t.geometries,n=-1,o=i.length;++n<o;)Pt(i[n],e)}};function Xt(t,e,i){var n=-1,o=t.length-i,l;for(e.lineStart();++n<o;)l=t[n],e.point(l[0],l[1],l[2]);e.lineEnd()}function ce(t,e){var i=-1,n=t.length;for(e.polygonStart();++i<n;)Xt(t[i],e,1);e.polygonEnd()}function tt(t,e){t&&se.hasOwnProperty(t.type)?se[t.type](t,e):Pt(t,e)}function on(){var t=[],e;return{point:function(i,n,o){e.push([i,n,o])},lineStart:function(){t.push(e=[])},lineEnd:F,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var i=t;return t=[],e=null,i}}}function rn(t,e){return it(t[0]-e[0])<nt&&it(t[1]-e[1])<nt}function wt(t,e,i,n){this.x=t,this.z=e,this.o=i,this.e=n,this.v=!1,this.n=this.p=null}function an(t,e,i,n,o){var l=[],u=[],c,S;if(t.forEach(function(d){if(!((x=d.length-1)<=0)){var x,k=d[0],_=d[x],P;if(rn(k,_)){if(!k[2]&&!_[2]){for(o.lineStart(),c=0;c<x;++c)o.point((k=d[c])[0],k[1]);o.lineEnd();return}_[0]+=2*nt}l.push(P=new wt(k,d,null,!0)),u.push(P.o=new wt(k,null,P,!1)),l.push(P=new wt(_,d,null,!1)),u.push(P.o=new wt(_,null,P,!0))}}),!!l.length){for(u.sort(e),fe(l),fe(u),c=0,S=u.length;c<S;++c)u[c].e=i=!i;for(var m=l[0],s,p;;){for(var f=m,v=!0;f.v;)if((f=f.n)===m)return;s=f.z,o.lineStart();do{if(f.v=f.o.v=!0,f.e){if(v)for(c=0,S=s.length;c<S;++c)o.point((p=s[c])[0],p[1]);else n(f.x,f.n.x,1,o);f=f.n}else{if(v)for(s=f.p.z,c=s.length-1;c>=0;--c)o.point((p=s[c])[0],p[1]);else n(f.x,f.p.x,-1,o);f=f.p}f=f.o,s=f.z,v=!v}while(!f.v);o.lineEnd()}}}function fe(t){if(e=t.length){for(var e,i=0,n=t[0],o;++i<e;)n.n=o=t[i],o.p=n,n=o;n.n=o=t[0],o.p=n}}function un(t,e,i,n,o,l){var u=t[0],c=t[1],S=e[0],m=e[1],s=0,p=1,f=S-u,v=m-c,d;if(d=i-u,!(!f&&d>0)){if(d/=f,f<0){if(d<s)return;d<p&&(p=d)}else if(f>0){if(d>p)return;d>s&&(s=d)}if(d=o-u,!(!f&&d<0)){if(d/=f,f<0){if(d>p)return;d>s&&(s=d)}else if(f>0){if(d<s)return;d<p&&(p=d)}if(d=n-c,!(!v&&d>0)){if(d/=v,v<0){if(d<s)return;d<p&&(p=d)}else if(v>0){if(d>p)return;d>s&&(s=d)}if(d=l-c,!(!v&&d<0)){if(d/=v,v<0){if(d>p)return;d>s&&(s=d)}else if(v>0){if(d<s)return;d<p&&(p=d)}return s>0&&(t[0]=u+s*f,t[1]=c+s*v),p<1&&(e[0]=u+p*f,e[1]=c+p*v),!0}}}}}var ut=1e9,Rt=-ut;function sn(t,e,i,n){function o(m,s){return t<=m&&m<=i&&e<=s&&s<=n}function l(m,s,p,f){var v=0,d=0;if(m==null||(v=u(m,p))!==(d=u(s,p))||S(m,s)<0^p>0)do f.point(v===0||v===3?t:i,v>1?n:e);while((v=(v+p+4)%4)!==d);else f.point(s[0],s[1])}function u(m,s){return it(m[0]-t)<nt?s>0?0:3:it(m[0]-i)<nt?s>0?2:1:it(m[1]-e)<nt?s>0?1:0:s>0?3:2}function c(m,s){return S(m.x,s.x)}function S(m,s){var p=u(m,1),f=u(s,1);return p!==f?p-f:p===0?s[1]-m[1]:p===1?m[0]-s[0]:p===2?m[1]-s[1]:s[0]-m[0]}return function(m){var s=m,p=on(),f,v,d,x,k,_,P,R,y,z,C,b={point:j,lineStart:bt,lineEnd:$t,polygonStart:Q,polygonEnd:It};function j(h,a){o(h,a)&&s.point(h,a)}function W(){for(var h=0,a=0,g=v.length;a<g;++a)for(var E=v[a],T=1,w=E.length,M=E[0],N,I,O=M[0],A=M[1];T<w;++T)N=O,I=A,M=E[T],O=M[0],A=M[1],I<=n?A>n&&(O-N)*(n-I)>(A-I)*(t-N)&&++h:A<=n&&(O-N)*(n-I)<(A-I)*(t-N)&&--h;return h}function Q(){s=p,f=[],v=[],C=!0}function It(){var h=W(),a=C&&h,g=(f=Be(f)).length;(a||g)&&(m.polygonStart(),a&&(m.lineStart(),l(null,null,1,m),m.lineEnd()),g&&an(f,c,h,l,m),m.polygonEnd()),s=m,f=v=d=null}function bt(){b.point=r,v&&v.push(d=[]),z=!0,y=!1,P=R=NaN}function $t(){f&&(r(x,k),_&&y&&p.rejoin(),f.push(p.result())),b.point=j,y&&s.lineEnd()}function r(h,a){var g=o(h,a);if(v&&d.push([h,a]),z)x=h,k=a,_=g,z=!1,g&&(s.lineStart(),s.point(h,a));else if(g&&y)s.point(h,a);else{var E=[P=Math.max(Rt,Math.min(ut,P)),R=Math.max(Rt,Math.min(ut,R))],T=[h=Math.max(Rt,Math.min(ut,h)),a=Math.max(Rt,Math.min(ut,a))];un(E,T,t,e,i,n)?(y||(s.lineStart(),s.point(E[0],E[1])),s.point(T[0],T[1]),g||s.lineEnd(),C=!1):g&&(s.lineStart(),s.point(h,a),C=!1)}P=h,R=a,y=g}return b}}const qt=t=>t;var Yt=new ot,Zt=new ot,Te,we,jt,Kt,q={point:F,lineStart:F,lineEnd:F,polygonStart:function(){q.lineStart=ln,q.lineEnd=fn},polygonEnd:function(){q.lineStart=q.lineEnd=q.point=F,Yt.add(it(Zt)),Zt=new ot},result:function(){var t=Yt/2;return Yt=new ot,t}};function ln(){q.point=cn}function cn(t,e){q.point=Re,Te=jt=t,we=Kt=e}function Re(t,e){Zt.add(Kt*t-jt*e),jt=t,Kt=e}function fn(){Re(Te,we)}var rt=1/0,Ct=rt,St=-rt,kt=St,Nt={point:hn,lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F,result:function(){var t=[[rt,Ct],[St,kt]];return St=kt=-(Ct=rt=1/0),t}};function hn(t,e){t<rt&&(rt=t),t>St&&(St=t),e<Ct&&(Ct=e),e>kt&&(kt=e)}var Ht=0,Wt=0,st=0,Ot=0,xt=0,et=0,Qt=0,Jt=0,lt=0,ze,Me,U,V,D={point:H,lineStart:he,lineEnd:pe,polygonStart:function(){D.lineStart=dn,D.lineEnd=gn},polygonEnd:function(){D.point=H,D.lineStart=he,D.lineEnd=pe},result:function(){var t=lt?[Qt/lt,Jt/lt]:et?[Ot/et,xt/et]:st?[Ht/st,Wt/st]:[NaN,NaN];return Ht=Wt=st=Ot=xt=et=Qt=Jt=lt=0,t}};function H(t,e){Ht+=t,Wt+=e,++st}function he(){D.point=pn}function pn(t,e){D.point=mn,H(U=t,V=e)}function mn(t,e){var i=t-U,n=e-V,o=ie(i*i+n*n);Ot+=o*(U+t)/2,xt+=o*(V+e)/2,et+=o,H(U=t,V=e)}function pe(){D.point=H}function dn(){D.point=_n}function gn(){Pe(ze,Me)}function _n(t,e){D.point=Pe,H(ze=U=t,Me=V=e)}function Pe(t,e){var i=t-U,n=e-V,o=ie(i*i+n*n);Ot+=o*(U+t)/2,xt+=o*(V+e)/2,et+=o,o=V*t-U*e,Qt+=o*(U+t),Jt+=o*(V+e),lt+=o*3,H(U=t,V=e)}function Ce(t){this._context=t}Ce.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Qe);break}}},result:F};var te=new ot,Lt,ke,Ne,ct,ft,Tt={point:F,lineStart:function(){Tt.point=vn},lineEnd:function(){Lt&&Oe(ke,Ne),Tt.point=F},polygonStart:function(){Lt=!0},polygonEnd:function(){Lt=null},result:function(){var t=+te;return te=new ot,t}};function vn(t,e){Tt.point=Oe,ke=ct=t,Ne=ft=e}function Oe(t,e){ct-=t,ft-=e,te.add(ie(ct*ct+ft*ft)),ct=t,ft=e}let me,At,de,ge;class _e{constructor(e){this._append=e==null?xe:yn(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,i){switch(this._point){case 0:{this._append`M${e},${i}`,this._point=1;break}case 1:{this._append`L${e},${i}`;break}default:{if(this._append`M${e},${i}`,this._radius!==de||this._append!==At){const n=this._radius,o=this._;this._="",this._append`m0,${n}a${n},${n} 0 1,1 0,${-2*n}a${n},${n} 0 1,1 0,${2*n}z`,de=n,At=this._append,ge=this._,this._=o}this._+=ge;break}}}result(){const e=this._;return this._="",e.length?e:null}}function xe(t){let e=1;this._+=t[0];for(const i=t.length;e<i;++e)this._+=arguments[e]+t[e]}function yn(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return xe;if(e!==me){const i=10**e;me=e,At=function(o){let l=1;this._+=o[0];for(const u=o.length;l<u;++l)this._+=Math.round(arguments[l]*i)/i+o[l]}}return At}function En(t,e){let i=3,n=4.5,o,l;function u(c){return c&&(typeof n=="function"&&l.pointRadius(+n.apply(this,arguments)),tt(c,o(l))),l.result()}return u.area=function(c){return tt(c,o(q)),q.result()},u.measure=function(c){return tt(c,o(Tt)),Tt.result()},u.bounds=function(c){return tt(c,o(Nt)),Nt.result()},u.centroid=function(c){return tt(c,o(D)),D.result()},u.projection=function(c){return arguments.length?(o=c==null?(t=null,qt):(t=c).stream,u):t},u.context=function(c){return arguments.length?(l=c==null?(e=null,new _e(i)):new Ce(e=c),typeof n!="function"&&l.pointRadius(n),u):e},u.pointRadius=function(c){return arguments.length?(n=typeof c=="function"?c:(l.pointRadius(+c),+c),u):n},u.digits=function(c){if(!arguments.length)return i;if(c==null)i=null;else{const S=Math.floor(c);if(!(S>=0))throw new RangeError(`invalid digits: ${c}`);i=S}return e===null&&(l=new _e(i)),u},u.projection(t).digits(i).context(e)}function Sn(t){return function(e){var i=new ee;for(var n in t)i[n]=t[n];return i.stream=e,i}}function ee(){}ee.prototype={constructor:ee,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function oe(t,e,i){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),n!=null&&t.clipExtent(null),tt(i,t.stream(Nt)),e(Nt.result()),n!=null&&t.clipExtent(n),t}function Ae(t,e,i){return oe(t,function(n){var o=e[1][0]-e[0][0],l=e[1][1]-e[0][1],u=Math.min(o/(n[1][0]-n[0][0]),l/(n[1][1]-n[0][1])),c=+e[0][0]+(o-u*(n[1][0]+n[0][0]))/2,S=+e[0][1]+(l-u*(n[1][1]+n[0][1]))/2;t.scale(150*u).translate([c,S])},i)}function Tn(t,e,i){return Ae(t,[[0,0],e],i)}function wn(t,e,i){return oe(t,function(n){var o=+e,l=o/(n[1][0]-n[0][0]),u=(o-l*(n[1][0]+n[0][0]))/2,c=-l*n[0][1];t.scale(150*l).translate([u,c])},i)}function Rn(t,e,i){return oe(t,function(n){var o=+e,l=o/(n[1][1]-n[0][1]),u=-l*n[0][0],c=(o-l*(n[1][1]+n[0][1]))/2;t.scale(150*l).translate([u,c])},i)}function zn(){var t=1,e=0,i=0,n=1,o=1,l=0,u,c,S=null,m,s,p,f=1,v=1,d=Sn({point:function(y,z){var C=R([y,z]);this.stream.point(C[0],C[1])}}),x=qt,k,_;function P(){return f=t*n,v=t*o,k=_=null,R}function R(y){var z=y[0]*f,C=y[1]*v;if(l){var b=C*u-z*c;z=z*u+C*c,C=b}return[z+e,C+i]}return R.invert=function(y){var z=y[0]-e,C=y[1]-i;if(l){var b=C*u+z*c;z=z*u-C*c,C=b}return[z/f,C/v]},R.stream=function(y){return k&&_===y?k:k=d(x(_=y))},R.postclip=function(y){return arguments.length?(x=y,S=m=s=p=null,P()):x},R.clipExtent=function(y){return arguments.length?(x=y==null?(S=m=s=p=null,qt):sn(S=+y[0][0],m=+y[0][1],s=+y[1][0],p=+y[1][1]),P()):S==null?null:[[S,m],[s,p]]},R.scale=function(y){return arguments.length?(t=+y,P()):t},R.translate=function(y){return arguments.length?(e=+y[0],i=+y[1],P()):[e,i]},R.angle=function(y){return arguments.length?(l=y%360*tn,c=nn(l),u=en(l),P()):l*Je},R.reflectX=function(y){return arguments.length?(n=y?-1:1,P()):n<0},R.reflectY=function(y){return arguments.length?(o=y?-1:1,P()):o<0},R.fitExtent=function(y,z){return Ae(R,y,z)},R.fitSize=function(y,z){return Tn(R,y,z)},R.fitWidth=function(y,z){return wn(R,y,z)},R.fitHeight=function(y,z){return Rn(R,y,z)},R}const zt=t=>()=>t;function Mn(t,{sourceEvent:e,target:i,transform:n,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:o}})}function Ut(t){t.stopImmediatePropagation()}function at(t){t.preventDefault(),t.stopImmediatePropagation()}function Pn(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Cn(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ve(){return this.__zoom||Se}function kn(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Nn(){return navigator.maxTouchPoints||"ontouchstart"in this}function On(t,e,i){var n=t.invertX(e[0][0])-i[0][0],o=t.invertX(e[1][0])-i[1][0],l=t.invertY(e[0][1])-i[0][1],u=t.invertY(e[1][1])-i[1][1];return t.translate(o>n?(n+o)/2:Math.min(0,n)||Math.max(0,o),u>l?(l+u)/2:Math.min(0,l)||Math.max(0,u))}function xn(){var t=Pn,e=Cn,i=On,n=kn,o=Nn,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,S=We,m=Ye("start","zoom","end"),s,p,f,v=500,d=150,x=0,k=10;function _(r){r.property("__zoom",ve).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",W).on("dblclick.zoom",Q).filter(o).on("touchstart.zoom",It).on("touchmove.zoom",bt).on("touchend.zoom touchcancel.zoom",$t).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(r,h,a,g){var E=r.selection?r.selection():r;E.property("__zoom",ve),r!==E?z(r,h,a,g):E.interrupt().each(function(){C(this,arguments).event(g).start().zoom(null,typeof h=="function"?h.apply(this,arguments):h).end()})},_.scaleBy=function(r,h,a,g){_.scaleTo(r,function(){var E=this.__zoom.k,T=typeof h=="function"?h.apply(this,arguments):h;return E*T},a,g)},_.scaleTo=function(r,h,a,g){_.transform(r,function(){var E=e.apply(this,arguments),T=this.__zoom,w=a==null?y(E):typeof a=="function"?a.apply(this,arguments):a,M=T.invert(w),N=typeof h=="function"?h.apply(this,arguments):h;return i(R(P(T,N),w,M),E,u)},a,g)},_.translateBy=function(r,h,a,g){_.transform(r,function(){return i(this.__zoom.translate(typeof h=="function"?h.apply(this,arguments):h,typeof a=="function"?a.apply(this,arguments):a),e.apply(this,arguments),u)},null,g)},_.translateTo=function(r,h,a,g,E){_.transform(r,function(){var T=e.apply(this,arguments),w=this.__zoom,M=g==null?y(T):typeof g=="function"?g.apply(this,arguments):g;return i(Se.translate(M[0],M[1]).scale(w.k).translate(typeof h=="function"?-h.apply(this,arguments):-h,typeof a=="function"?-a.apply(this,arguments):-a),T,u)},g,E)};function P(r,h){return h=Math.max(l[0],Math.min(l[1],h)),h===r.k?r:new Dt(h,r.x,r.y)}function R(r,h,a){var g=h[0]-a[0]*r.k,E=h[1]-a[1]*r.k;return g===r.x&&E===r.y?r:new Dt(r.k,g,E)}function y(r){return[(+r[0][0]+ +r[1][0])/2,(+r[0][1]+ +r[1][1])/2]}function z(r,h,a,g){r.on("start.zoom",function(){C(this,arguments).event(g).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(g).end()}).tween("zoom",function(){var E=this,T=arguments,w=C(E,T).event(g),M=e.apply(E,T),N=a==null?y(M):typeof a=="function"?a.apply(E,T):a,I=Math.max(M[1][0]-M[0][0],M[1][1]-M[0][1]),O=E.__zoom,A=typeof h=="function"?h.apply(E,T):h,B=S(O.invert(N).concat(I/O.k),A.invert(N).concat(I/A.k));return function(Y){if(Y===1)Y=A;else{var X=B(Y),Gt=I/X[2];Y=new Dt(Gt,N[0]-X[0]*Gt,N[1]-X[1]*Gt)}w.zoom(null,Y)}})}function C(r,h,a){return!a&&r.__zooming||new b(r,h)}function b(r,h){this.that=r,this.args=h,this.active=0,this.sourceEvent=null,this.extent=e.apply(r,h),this.taps=0}b.prototype={event:function(r){return r&&(this.sourceEvent=r),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(r,h){return this.mouse&&r!=="mouse"&&(this.mouse[1]=h.invert(this.mouse[0])),this.touch0&&r!=="touch"&&(this.touch0[1]=h.invert(this.touch0[0])),this.touch1&&r!=="touch"&&(this.touch1[1]=h.invert(this.touch1[0])),this.that.__zoom=h,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(r){var h=G(this.that).datum();m.call(r,this.that,new Mn(r,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:m}),h)}};function j(r,...h){if(!t.apply(this,arguments))return;var a=C(this,h).event(r),g=this.__zoom,E=Math.max(l[0],Math.min(l[1],g.k*Math.pow(2,n.apply(this,arguments)))),T=K(r);if(a.wheel)(a.mouse[0][0]!==T[0]||a.mouse[0][1]!==T[1])&&(a.mouse[1]=g.invert(a.mouse[0]=T)),clearTimeout(a.wheel);else{if(g.k===E)return;a.mouse=[T,g.invert(T)],Ft(this),a.start()}at(r),a.wheel=setTimeout(w,d),a.zoom("mouse",i(R(P(g,E),a.mouse[0],a.mouse[1]),a.extent,u));function w(){a.wheel=null,a.end()}}function W(r,...h){if(f||!t.apply(this,arguments))return;var a=r.currentTarget,g=C(this,h,!0).event(r),E=G(r.view).on("mousemove.zoom",N,!0).on("mouseup.zoom",I,!0),T=K(r,a),w=r.clientX,M=r.clientY;qe(r.view),Ut(r),g.mouse=[T,this.__zoom.invert(T)],Ft(this),g.start();function N(O){if(at(O),!g.moved){var A=O.clientX-w,B=O.clientY-M;g.moved=A*A+B*B>x}g.event(O).zoom("mouse",i(R(g.that.__zoom,g.mouse[0]=K(O,a),g.mouse[1]),g.extent,u))}function I(O){E.on("mousemove.zoom mouseup.zoom",null),Ze(O.view,g.moved),at(O),g.event(O).end()}}function Q(r,...h){if(t.apply(this,arguments)){var a=this.__zoom,g=K(r.changedTouches?r.changedTouches[0]:r,this),E=a.invert(g),T=a.k*(r.shiftKey?.5:2),w=i(R(P(a,T),g,E),e.apply(this,h),u);at(r),c>0?G(this).transition().duration(c).call(z,w,g,r):G(this).call(_.transform,w,g,r)}}function It(r,...h){if(t.apply(this,arguments)){var a=r.touches,g=a.length,E=C(this,h,r.changedTouches.length===g).event(r),T,w,M,N;for(Ut(r),w=0;w<g;++w)M=a[w],N=K(M,this),N=[N,this.__zoom.invert(N),M.identifier],E.touch0?!E.touch1&&E.touch0[2]!==N[2]&&(E.touch1=N,E.taps=0):(E.touch0=N,T=!0,E.taps=1+!!s);s&&(s=clearTimeout(s)),T&&(E.taps<2&&(p=N[0],s=setTimeout(function(){s=null},v)),Ft(this),E.start())}}function bt(r,...h){if(this.__zooming){var a=C(this,h).event(r),g=r.changedTouches,E=g.length,T,w,M,N;for(at(r),T=0;T<E;++T)w=g[T],M=K(w,this),a.touch0&&a.touch0[2]===w.identifier?a.touch0[0]=M:a.touch1&&a.touch1[2]===w.identifier&&(a.touch1[0]=M);if(w=a.that.__zoom,a.touch1){var I=a.touch0[0],O=a.touch0[1],A=a.touch1[0],B=a.touch1[1],Y=(Y=A[0]-I[0])*Y+(Y=A[1]-I[1])*Y,X=(X=B[0]-O[0])*X+(X=B[1]-O[1])*X;w=P(w,Math.sqrt(Y/X)),M=[(I[0]+A[0])/2,(I[1]+A[1])/2],N=[(O[0]+B[0])/2,(O[1]+B[1])/2]}else if(a.touch0)M=a.touch0[0],N=a.touch0[1];else return;a.zoom("touch",i(R(w,M,N),a.extent,u))}}function $t(r,...h){if(this.__zooming){var a=C(this,h).event(r),g=r.changedTouches,E=g.length,T,w;for(Ut(r),f&&clearTimeout(f),f=setTimeout(function(){f=null},v),T=0;T<E;++T)w=g[T],a.touch0&&a.touch0[2]===w.identifier?delete a.touch0:a.touch1&&a.touch1[2]===w.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),a.taps===2&&(w=K(w,this),Math.hypot(p[0]-w[0],p[1]-w[1])<k)){var M=G(this).on("dblclick.zoom");M&&M.apply(this,arguments)}}}return _.wheelDelta=function(r){return arguments.length?(n=typeof r=="function"?r:zt(+r),_):n},_.filter=function(r){return arguments.length?(t=typeof r=="function"?r:zt(!!r),_):t},_.touchable=function(r){return arguments.length?(o=typeof r=="function"?r:zt(!!r),_):o},_.extent=function(r){return arguments.length?(e=typeof r=="function"?r:zt([[+r[0][0],+r[0][1]],[+r[1][0],+r[1][1]]]),_):e},_.scaleExtent=function(r){return arguments.length?(l[0]=+r[0],l[1]=+r[1],_):[l[0],l[1]]},_.translateExtent=function(r){return arguments.length?(u[0][0]=+r[0][0],u[1][0]=+r[1][0],u[0][1]=+r[0][1],u[1][1]=+r[1][1],_):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},_.constrain=function(r){return arguments.length?(i=r,_):i},_.duration=function(r){return arguments.length?(c=+r,_):c},_.interpolate=function(r){return arguments.length?(S=r,_):S},_.on=function(){var r=m.on.apply(m,arguments);return r===m?_:r},_.clickDistance=function(r){return arguments.length?(x=(r=+r)*r,_):Math.sqrt(x)},_.tapDistance=function(r){return arguments.length?(k=+r,_):k},_}function An(t){return t}function In(t){if(t==null)return An;var e,i,n=t.scale[0],o=t.scale[1],l=t.translate[0],u=t.translate[1];return function(c,S){S||(e=i=0);var m=2,s=c.length,p=new Array(s);for(p[0]=(e+=c[0])*n+l,p[1]=(i+=c[1])*o+u;m<s;)p[m]=c[m],++m;return p}}function bn(t,e){for(var i,n=t.length,o=n-e;o<--n;)i=t[o],t[o++]=t[n],t[n]=i}function $n(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(i){return ye(t,i)})}:ye(t,e)}function ye(t,e){var i=e.id,n=e.bbox,o=e.properties==null?{}:e.properties,l=Gn(t,e);return i==null&&n==null?{type:"Feature",properties:o,geometry:l}:n==null?{type:"Feature",id:i,properties:o,geometry:l}:{type:"Feature",id:i,bbox:n,properties:o,geometry:l}}function Gn(t,e){var i=In(t.transform),n=t.arcs;function o(s,p){p.length&&p.pop();for(var f=n[s<0?~s:s],v=0,d=f.length;v<d;++v)p.push(i(f[v],v));s<0&&bn(p,d)}function l(s){return i(s)}function u(s){for(var p=[],f=0,v=s.length;f<v;++f)o(s[f],p);return p.length<2&&p.push(p[0]),p}function c(s){for(var p=u(s);p.length<4;)p.push(p[0]);return p}function S(s){return s.map(c)}function m(s){var p=s.type,f;switch(p){case"GeometryCollection":return{type:p,geometries:s.geometries.map(m)};case"Point":f=l(s.coordinates);break;case"MultiPoint":f=s.coordinates.map(l);break;case"LineString":f=u(s.arcs);break;case"MultiLineString":f=s.arcs.map(u);break;case"Polygon":f=S(s.arcs);break;case"MultiPolygon":f=s.arcs.map(S);break;default:return null}return{type:p,coordinates:f}}return m(e)}const Dn=`var(
		--coral-color-charts-default-weak,
		hsl(204, 59%, 73%)
	)`,Fn=`var(
		--coral-color-charts-default-strong,
		hsl(204, 92%, 29%)
	)`,L={scaleMinColor:Dn,scaleMaxColor:Fn,"geo-chart":"_geo-chart_vvilr_12","geo-chart__title":"_geo-chart__title_vvilr_15","geo-chart__feature":"_geo-chart__feature_vvilr_19","geo-chart__feature--disabled":"_geo-chart__feature--disabled_vvilr_24","geo-chart__zoom":"_geo-chart__zoom_vvilr_34","geo-chart__zoom-button":"_geo-chart__zoom-button_vvilr_39","geo-chart__zoom-icon":"_geo-chart__zoom-icon_vvilr_51"},Ie=250,be=200,Yn=new Intl.Collator(void 0,{usage:"search",sensitivity:"base",ignorePunctuation:!0});function Ln(t,e,i){return t.find(n=>i.valueProperties.some(o=>Yn.compare(n.key,`${e[o]}`)===0))}function Un(t,e,i,n,o,l){if(t.attr("class",De(L["geo-chart__feature"],{[L["geo-chart__feature--disabled"]]:!o})),o){const u=`${l||o.key}${l&&o.key!==l?` (${o.key})`:""}`,c=S=>{i({entry:{key:u,value:`${o.value}`},position:{x:S.x,y:S.y}})};t.attr("data-key",o.key).attr("data-value",o.value).style("fill",e(+o.value)?.toString()||"").on("click",()=>n(o.key)).on("mouseover",S=>c(S)).on("mousemove",S=>S&&c(S)).on("mouseout",()=>i(null))}}function Vn(t){return G(t).append("svg").attr("viewBox",`0 0 ${Ie} ${be}`)}function Bn(t){G(t).selectAll("svg").remove()}function Ee(t){try{return t.split(",").slice(1).join(",").trim().slice(0,-1)}catch{return"hsl(0, 0%, 0%)"}}function Xn(t){const e=t.map(i=>i.value);return Ue().domain([Math.min(...e),Math.max(...e)]).range([ae(Ee(L.scaleMinColor)),ae(Ee(L.scaleMaxColor))])}function qn(t){const e=zn().scale(1).fitSize([Ie,be],t);return En().projection(e)}function Zn(t){const e=t.topology,i=t.layer||Object.keys(e.objects)[0];return $n(e,e.objects[i])}function jn(t,e,i,n){const o=xn().scaleExtent([1,100]).on("zoom",l=>{const u=l.transform;e.attr("transform",u)});G(i).on("click",()=>{o.scaleBy(t.transition().duration(250),2)}),G(n).on("click",()=>{o.scaleBy(t.transition().duration(250),1/2)}),t.call(o)}function $e({data:t,columnName:e,onSelection:i,chartConfig:n}){const o=J.useRef(null),l=J.useRef(null),u=J.useRef(null),c=J.useRef(null),{t:S}=Ge(),[m,s]=J.useState();return J.useEffect(()=>{if(n&&o.current&&u.current&&c.current){Bn(o.current);const p=Xn(t),f=Zn(n),v=Vn(o.current),d=v.append("g").attr("data-test","preparation.chart.geochart");d.selectAll("path").data(f.features).enter().append("path").each(function(k){const _=k.properties?Ln(t,k.properties,n):void 0,P=n.labelProperty&&k.properties?.[n.labelProperty];Un(G(this),p,s,i,_,P)}).attr("d",qn(f)),jn(v,d,u.current,c.current)}},[t,n,i,s]),$.jsxs("div",{className:L["geo-chart"],children:[$.jsx("h1",{className:L["geo-chart__title"],"data-test":"preparation.chart.title",children:S("GEO_DISTRIBUTION",{column_name:e,defaultValue:"{{column_name}} distribution"})}),$.jsxs("div",{className:L["geo-chart__zoom"],children:[$.jsx("button",{ref:u,title:S("ZOOM_IN",{defaultValue:"Zoom in"}),className:L["geo-chart__zoom-button"],"data-feature":"preparation.chart.zoom-in",children:$.jsx(re,{name:"talend-plus-circle",className:L["geo-chart__zoom-icon"]})}),$.jsx("button",{ref:c,title:S("ZOOM_OUT",{defaultValue:"Zoom out"}),className:L["geo-chart__zoom-button"],"data-feature":"preparation.chart.zoom-out",children:$.jsx(re,{name:"talend-minus-circle",className:L["geo-chart__zoom-icon"]})})]}),$.jsx("div",{ref:o}),m&&$.jsx("div",{ref:l,style:{position:"fixed",top:`${m.position.y-(l.current?.offsetHeight||0)}px`,left:`${m.position.x-(l.current?.offsetWidth||0)/2}px`,pointerEvents:"none"},children:$.jsx(Le,{entries:[m.entry]})})]})}const Kn="name",Mt=["iso_3166_2"],Hn={CONTINENT:{file:"continents",labelProperty:"continent",valueProperties:["continent","continent_fr"]},CONTINENT_CODE:{file:"continents",labelProperty:"continent",valueProperties:["code"]},COUNTRY:{file:"world",valueProperties:["name","name_fr","name_en"]},COUNTRY_CODE_ISO2:{file:"world",valueProperties:["iso_a2"]},COUNTRY_CODE_ISO3:{file:"world",valueProperties:["iso_a3"]},US_STATE:{file:"US",valueProperties:["name"]},US_STATE_CODE:{file:"US",valueProperties:Mt},CA_PROVINCE_TERRITORY:{file:"CA",valueProperties:["name"]},CA_PROVINCE_TERRITORY_CODE:{file:"CA",valueProperties:Mt},NA_STATE:{file:"US_CA",valueProperties:["name"]},NA_STATE_CODE:{file:"US_CA",valueProperties:Mt},MX_ESTADO:{file:"MX",valueProperties:["name"]},MX_ESTADO_CODE:{file:"MX",valueProperties:Mt},FR_DEPARTEMENT:{file:"FR",valueProperties:["name"]},FR_REGION:{file:"FR",layer:"regions",valueProperties:["region"]},FR_REGION_LEGACY:{file:"FR",layer:"regions_legacy",valueProperties:["region_legacy"]}};async function Wn(t){const{file:e,...i}=Hn[t];try{const n=await Fe.getJSON(`/dist/assets/maps/${e}.topo.json`,"@talend/react-dataviz","7.3.0");if(!n)throw new Error("GeoChart topology undefined");return{...i,labelProperty:i.labelProperty||Kn,topology:n}}catch(n){console.error(`can't get requested topology ${e}`,n)}}const{action:Qn}=__STORYBOOK_MODULE_ACTIONS__,ro={title:"Dataviz/GeoChart",component:$e,decorators:[t=>$.jsx("div",{style:{width:500,height:500},children:t()})],args:{columnName:"Geo key",onSelection:Qn("onSelection")},loaders:[async({name:t})=>({chartConfig:await Wn(t.replaceAll(" ","_"))})],parameters:{chromatic:{diffThreshold:.6}}},Z=(t,{loaded:e})=>$.jsx($e,{...e,...t}),ht=Z.bind({});ht.args={data:[{key:"Asia",value:10},{key:"Amérique du Nord",value:20}]};const pt=Z.bind({});pt.args={data:[{key:"Russie",value:10},{key:"China",value:20}]};const mt=Z.bind({});mt.args={data:[{key:"California",value:2},{key:"New Jersey",value:52},{key:"Texas",value:45}]};const dt=Z.bind({});dt.args={data:[{key:"British Columbia",value:2},{key:"Quebec",value:52}]};const gt=Z.bind({});gt.args={data:[{key:"British Columbia",value:2},{key:"Quebec",value:200},{key:"California",value:130},{key:"New Jersey",value:40}]};const _t=Z.bind({});_t.args={data:[{key:"Sinaloa",value:10},{key:"Guanajuato",value:20}]};const vt=Z.bind({});vt.args={data:[{key:"Loire-Atlantique",value:10},{key:"Vendée",value:20}]};const yt=Z.bind({});yt.args={data:[{key:"Occitanie",value:10},{key:"Martinique",value:20}]};const Et=Z.bind({});Et.args={data:[{key:"Bretagne",value:10},{key:"Picardie",value:20}]};ht.parameters={...ht.parameters,docs:{...ht.parameters?.docs,source:{originalSource:`(props, {
  loaded
}) => <GeoChart {...loaded} {...props} />`,...ht.parameters?.docs?.source}}};pt.parameters={...pt.parameters,docs:{...pt.parameters?.docs,source:{originalSource:`(props, {
  loaded
}) => <GeoChart {...loaded} {...props} />`,...pt.parameters?.docs?.source}}};mt.parameters={...mt.parameters,docs:{...mt.parameters?.docs,source:{originalSource:`(props, {
  loaded
}) => <GeoChart {...loaded} {...props} />`,...mt.parameters?.docs?.source}}};dt.parameters={...dt.parameters,docs:{...dt.parameters?.docs,source:{originalSource:`(props, {
  loaded
}) => <GeoChart {...loaded} {...props} />`,...dt.parameters?.docs?.source}}};gt.parameters={...gt.parameters,docs:{...gt.parameters?.docs,source:{originalSource:`(props, {
  loaded
}) => <GeoChart {...loaded} {...props} />`,...gt.parameters?.docs?.source}}};_t.parameters={..._t.parameters,docs:{..._t.parameters?.docs,source:{originalSource:`(props, {
  loaded
}) => <GeoChart {...loaded} {...props} />`,..._t.parameters?.docs?.source}}};vt.parameters={...vt.parameters,docs:{...vt.parameters?.docs,source:{originalSource:`(props, {
  loaded
}) => <GeoChart {...loaded} {...props} />`,...vt.parameters?.docs?.source}}};yt.parameters={...yt.parameters,docs:{...yt.parameters?.docs,source:{originalSource:`(props, {
  loaded
}) => <GeoChart {...loaded} {...props} />`,...yt.parameters?.docs?.source}}};Et.parameters={...Et.parameters,docs:{...Et.parameters?.docs,source:{originalSource:`(props, {
  loaded
}) => <GeoChart {...loaded} {...props} />`,...Et.parameters?.docs?.source}}};const ao=["CONTINENT","COUNTRY","US_STATE","CA_PROVINCE_TERRITORY","NA_STATE","MX_ESTADO","FR_DEPARTEMENT","FR_REGION","FR_REGION_LEGACY"];export{dt as CA_PROVINCE_TERRITORY,ht as CONTINENT,pt as COUNTRY,vt as FR_DEPARTEMENT,yt as FR_REGION,Et as FR_REGION_LEGACY,_t as MX_ESTADO,gt as NA_STATE,mt as US_STATE,ao as __namedExportsOrder,ro as default};
