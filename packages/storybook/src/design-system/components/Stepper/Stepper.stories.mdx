import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs';
import { FigmaImage, Use } from '~docs';
import { Stepper } from '@talend/design-system';

import * as Stories from './Stepper.stories';

<Meta
	title="Components/Stepper/Stepper"
	component={Stepper}
	parameters={{
		status: { figma: 'ok', storybook: 'ok', react: 'ok', i18n: 'ok' },
		figmaLink: 'https://www.figma.com/file/WUVKJmcDHfR7K1q1lYhaHk/?node-id=1%3A5',
	}}
/>

# Stepper

`Stepper` is used to display the different steps needed to complete an action.

It helps users avoid frustration and successfully complete a primary task.

The stepper displays progress through a sequence split into multiple logical and numbered steps.

## Zoning

<FigmaImage
	src="https://www.figma.com/file/qc8oUSyVJM67gSsbTShftt/%F0%9F%93%90-Zoning?node-id=952%3A230"
	alt="zoning image for the stepper"
/>

## Style

### Variations

A Stepper is **vertical by default** but can be horizontal.

**Vertical**

Consider using a vertical stepper when there are workflows greater than 3 steps.

<FigmaImage
	src="https://www.figma.com/file/WUVKJmcDHfR7K1q1lYhaHk/Stepper?node-id=1809%3A47231"
	alt="Mockup of a vertical stepper"
/>

<Canvas>
	<Story story={Stories.Vertical} />
</Canvas>

**Horizontal**

Consider using a horizontal stepper when full page components are used (such as Data grid or List)

A horizontal stepper should not have more than 3 steps.

<FigmaImage
	src="https://www.figma.com/file/WUVKJmcDHfR7K1q1lYhaHk/Stepper?node-id=1809%3A47229"
	alt="Mockup of a horizontal stepper"
/>

<Canvas>
	<Story story={Stories.Horizontal} />
</Canvas>

## States

### Loading

**Vertical**

<Canvas>
	<Story story={Stories.VerticalLoading} />
</Canvas>

**Horizontal**

<Canvas>
	<Story story={Stories.HorizontalLoading} />
</Canvas>

### Overflowing steps

The space dedicated to step is limited. No reflow strategy has been put in place, so text overflow is truncated with an ellipsis.

<Canvas>
	<Story story={Stories.Overflows} />
</Canvas>

## Content

Use nouns to create one-word labels for steps. Go for 2-word step labels when necessary.

Step labels should describe the purpose of each step and let users know where they are in their setup.

**In vertical steppers**, each step describes a section to the right of the stepper. Start the section title with a verb and tell users what to do and why. For example, a step label "Engine" could have a section title "Add the engine on which to process data".
Step sections can also have subtitles, if necessary, to provide users with extra important informationâ€”as in complicated steps for example.

**In horizontal steppers**, no sections are used. Once a step is selected, user input shows below. Avoid using long nouns in horizontal steppers

<Use>
	<Use.Do>
		<ul>
			<li>Keep labels concise: one-word labels as a rule, two words when necessary</li>
			<li>Match step labels to the title of the page they link to</li>
		</ul>
	</Use.Do>
	<Use.Dont>
		<ul>
			<li>Use complex long nouns</li>
			<li>Mix action and noun phrases in steps labels</li>
		</ul>
	</Use.Dont>
</Use>

### Buttons in forms that use a Stepper

In case of multi-step form, we should always provide at least 2 buttons:

1. Cancel or Back button
2. Continue or Next button

Use a **cancel button** for the first step as the user can't step back. Use a **back button** from the second step to allow the user to step back.

<FigmaImage
	src="https://www.figma.com/file/WUVKJmcDHfR7K1q1lYhaHk/Stepper?node-id=115%3A0"
	alt="buttons mutli step form example"
/>

The back button can also be used in addition of the cancel button. In that case, the cancel button is still the first available:

<FigmaImage
	src="https://www.figma.com/file/WUVKJmcDHfR7K1q1lYhaHk/Stepper?node-id=1808%3A47056"
	alt="cancel and back buttons for multi step form"
/>

## Interactions

**Error in the form**

In case of an error in the current step, please inform the user by using an inline message on that screen.

## Usage

<Canvas>
	<Story
		name="usage"
		args={{
			variant: 'Vertical',
		}}
		argTypes={{
			variant: {
				description: 'Stepper variation',
				control: {
					type: 'select',
					options: ['Vertical', 'Horizontal'],
				},
			},
		}}
	>
		{({ variant, index, title }) => {
			const StepperComponent = Stepper[variant];
			StepperComponent.displayName = `Stepper.${variant}`;
			return (
				<StepperComponent>
					<Stepper.Step.Validated title="Validated" />
					<Stepper.Step.InProgress title="In progress" />
					<Stepper.Step.Enabled title="Enabled" />
				</StepperComponent>
			);
		}}
	</Story>
</Canvas>

<ArgsTable story="usage" />

## Accessibility

Stepper should follow related [WAI guidelines](https://www.w3.org/WAI/tutorials/forms/multi-page/).
