<script>
	if (!window.Talend) {
		window.Talend = {};
	}
	window.Talend.CDN_URL = 'https://statics.cloud.talend.com';

	// let's override the assets-api's getCDNUrl to serve local package
	window.Talend.getCDNUrl = function getCDNUrl(pkg = {}) {
		// if local to the repository load from /cdn
		if (['@talend/react-dataviz', '@talend/icons'].includes(pkg.name)) {
			const baseTag = document.querySelector('base');
			if (baseTag) {
				const root = baseTag.getAttribute('href') || '';
				return `${root}/cdn/${pkg.name}/${pkg.version}${pkg.path}`;
			}
			return `/cdn/${pkg.name}/${pkg.version}${pkg.path}`;
		}
		return `${window.Talend.CDN_URL}/${pkg.name}/${pkg.version}${pkg.path}`;
	};
</script>
