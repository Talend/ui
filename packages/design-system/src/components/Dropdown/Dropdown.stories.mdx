import { ArgsTable, Meta, Canvas, Story } from '@storybook/addon-docs';
import { FigmaImage, Use } from '~docs';

import Dropdown from './';

import * as Stories from './Dropdown.stories';

<Meta
	title="Components/Dropdown"
	component={Dropdown}
	parameters={{
		status: { figma: 'ok', storybook: 'ok', react: 'ok', i18n: 'na' },
		figmaLink: 'https://www.figma.com/file/IUeLBwjDCMkpdO7OtZ29u1/Dropdown',
	}}
/>

# Dropdown

A dropdown menu displays a list of available actions.

## Zoning

<FigmaImage
	src="https://www.figma.com/file/IUeLBwjDCMkpdO7OtZ29u1/Dropdown?node-id=806%3A2186"
	alt="zoning image for dropdown"
/>

## Style

<FigmaImage
	src="https://www.figma.com/file/IUeLBwjDCMkpdO7OtZ29u1/Dropdown?node-id=806%3A2112"
	alt="Basic dropdown styles"
/>

<Canvas withSource="closed">
	<Story height="35rem" story={Stories.Basic} />
</Canvas>

### Variations

**With icons**

<Canvas>
	<Story height="25rem" story={Stories.WithIcons} />
</Canvas>

**With dividers**

<Canvas>
	<Story height="25rem" story={Stories.WithDividers} />
</Canvas>

**With titles**

Use titles in combination with dividers to group menu contents together under headings that make sense.

<Canvas>
	<Story height="25rem" story={Stories.WithTitle} />
</Canvas>

**Max height**

The max-height of a dropdown is 32rem (320px). A scroll-bar has to be added after exceeding 32rem longer items.
This rule is not applicable for the header-bar dropdowns.

<Canvas withSource="closed">
	<Story height="36rem" story={Stories.WithManyItems} />
</Canvas>

## States

<FigmaImage
	src="https://www.figma.com/file/IUeLBwjDCMkpdO7OtZ29u1/Dropdown?node-id=808%3A2230"
	alt="dropdown behaviors"
/>

## Content

<Use>
	<Use.Do>
		<ul>
			<li>
				Keep menu items to a single line of text as much as possible. If not, when the label is too
				long for the available horizontal space, it wraps to form another line.
			</li>
		</ul>
	</Use.Do>
</Use>

<Canvas withSource="closed">
	<Story height="25rem" story={Stories.WithLongText} />
</Canvas>

## Interactions

N/A

## Accessibility

- Press <kbd>Tabs</kbd> to focus on the dropdown

- Press <kbd>Up Arrow</kbd> or <kbd>Down Arrow</kbd> to navigate in the dropdown menu

- Press <kbd>Space</kbd> or <kbd>Enter</kbd> to activate the dropdown menu item

- Press <kbd>Escape</kbd> to close the dropdown menu

- Use `aria-label` to describe the menu's contents / objective

## Usage

### Anatomy

Dropdowns have two parts: a disclosure and a popover.

**Disclosure**

The disclosure can be any `Clickable` element. [You can find them here.](/docs/components-clickable-buttons-about--button-variations)

The `isDropdown` props of `Button` is mandatory.

The disclosure is passed as a child to `<Dropdown>`:

```tsx
<Dropdown items={[...]}>
    <ButtonPrimary onClick={() => {}} isDropdown>My menu</ButtonPrimary>
</Dropdown>
```

**The popover**

The popover contents are strongly typed. To list them, you need to fill the `items` props on `Dropdown`:

```tsx
<Dropdown
	items={[
		{
			type: 'link',
			href: '/relativeLink',
			label: 'Relative link example',
            icon: 'talend-plus', // Optional
		},
		{
			type: 'link',
			as: <RouterLink to="/route" />,
			label: 'Router link example',
            icon: 'talend-plus', // Optional
		},
        {
			type: 'button',
			onClick: () => logout(),
			label: 'Button example',
            icon: 'talend-plus', // Optional
		},
        {
			type: 'title',
			label: 'Title example',
		},
        {
			type: 'divider',
		},
	]}
    ...
```

### Router links

The `items` prop of `Dropdown` accepts 4 types: links, buttons, titles and dividers.

When it comes to links, you can override the default `<a>` element and use a React-Router `Link` instead:

<Canvas>
	<Story height="25rem" story={Stories.WithRouterLinks} />
</Canvas>
