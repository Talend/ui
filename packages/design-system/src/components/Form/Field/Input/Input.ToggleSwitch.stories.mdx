import { Canvas, Meta, Story } from '@storybook/addon-docs';
import { useForm } from 'react-hook-form';
import { FigmaImage, Use } from '~docs';
import Form from '../../';
import { ButtonPrimary } from '../../../Button';
import { InlineMessageInformation } from '../../../InlineMessage';

<Meta
	title="Components/Form/Fields/ToggleSwitch"
	parameters={{
		status: { figma: 'ok', storybook: 'ok', react: 'ok', i18n: 'na' },
	}}
/>

# ToggleSwitch

ToggleSwitches are a quick way to view and switch between two states or on-off state instantly.

## Zoning

<FigmaImage
	src="https://www.figma.com/file/qc8oUSyVJM67gSsbTShftt/%F0%9F%93%90-Zoning?node-id=252%3A9"
	alt="zoning image for switch"
/>

## Style

<FigmaImage
	src="https://www.figma.com/file/2crWpyiwuxt1wvjsTYwdB0/ToggleSwitch?node-id=0%3A131"
	alt="Mockup of an input ToggleSwitch"
/>

## States

### Default

<Canvas>
	<Story name="default">
		<Form.ToggleSwitch label="ToggleSwitch off" />
		<Form.ToggleSwitch label="ToggleSwitch on" checked />
	</Story>
</Canvas>

### Disabled

<Canvas>
	<Story name="disabled">
		<Form.ToggleSwitch label="Disabled ToggleSwitch off" disabled />
		<Form.ToggleSwitch label="Disabled ToggleSwitch on" checked disabled />
	</Story>
</Canvas>

### Read-only

<Canvas>
	<Story name="read-only">
		<Form.ToggleSwitch label="Read-only ToggleSwitch off" readOnly />
		<Form.ToggleSwitch label="Read-only ToggleSwitch on" checked readOnly />
	</Story>
</Canvas>

### Inline

<Canvas>
	<Story name="inline">
		<Form.ToggleSwitch label="ToggleSwitch off" isInline />
		<span> </span>
		<Form.ToggleSwitch label="ToggleSwitch on" checked isInline />
	</Story>
</Canvas>

### Long content

<Canvas>
	<Story name="Long content">
		<div style={{ width: '200px' }}>
			<Form.ToggleSwitch
				label="Label with a lot of content, too much probably, and most certainly enough to generate a line break in this small box."
				isInline
			/>
		</div>
	</Story>
</Canvas>

## Content

Labels for switches should give users a strong indication of what they are selecting. Start the label with a verb and say clearly what will happen when the switch is turned on.

<Use>
	<Use.Do>
		<ul>
			<li>Use sentence case in switch labels.</li>
			<li>Keep labels for switches short and direct.</li>
			<li>
				For on/off switches, use the label to describe what the control will do when the switch is
				on.
			</li>
		</ul>
	</Use.Do>
	<Use.Dont>
		<ul>
			<li>Don't use neutral or ambiguous labels.</li>
			<li>Don't use title case or all caps in switch labels (except for acronyms).</li>
			<li>Don't use punctuations at the end of switch label.</li>
		</ul>
	</Use.Dont>
</Use>

## Interactions

- The label must always be clickable to enable or disable.

### Controlled switch

<Canvas>
	<Story name="controlled">
		{() => {
			const { register, handleSubmit, watch } = useForm();
			const [formData, setFormData] = React.useState();
			const optionA = watch('option-a');
			return (
				<Form onSubmit={handleSubmit(setFormData)}>
					<Form.Fieldset legend="Control switch state" required>
						<Form.ToggleSwitch label="Toggle all" {...register('option-a')} />
						<Form.ToggleSwitch label="Controlled switch" checked={optionA} />
					</Form.Fieldset>
					<Form.Buttons>
						<ButtonPrimary onClick={() => {}} type="submit">
							Submit
						</ButtonPrimary>
					</Form.Buttons>
				</Form>
			);
		}}
	</Story>
</Canvas>

## Usage

<Canvas>
	<Story name="react-hook-form">
		{() => {
			const { register, handleSubmit } = useForm();
			const [formData, setFormData] = React.useState();
			return (
				<Form onSubmit={handleSubmit(setFormData)}>
					{formData && (
						<InlineMessageInformation
							title={'Form data'}
							description={JSON.stringify(formData, null, 2)}
							withBackground
						/>
					)}
					<Form.Fieldset legend="Enabled">
						<Form.ToggleSwitch label="Option a" {...register('option-a')} />
						<Form.ToggleSwitch label="Option b" checked {...register('option-b')} />
					</Form.Fieldset>
					<Form.Fieldset legend="Read only" readOnly>
						<Form.ToggleSwitch label="Option c" {...register('option-c')} />
						<Form.ToggleSwitch label="Option d" checked {...register('option-d')} />
					</Form.Fieldset>
					<Form.Fieldset legend="Disabled" disabled>
						{/* @see https://github.com/react-hook-form/react-hook-form/issues/6690 */}
						<Form.ToggleSwitch label="Option e" {...register('option-e', { disabled: true })} />
						<Form.ToggleSwitch
							label="Option f"
							checked
							{...register('option-f', { disabled: true })}
						/>
					</Form.Fieldset>
					<Form.Buttons>
						<ButtonPrimary onClick={() => {}} type="submit">
							Submit
						</ButtonPrimary>
					</Form.Buttons>
				</Form>
			);
		}}
	</Story>
</Canvas>

## Accessibility

Press <kbd>TABS</kbd> to focus on a switch.

Press <kbd>SPACE</kbd> to toggle the switch between selected and not selected.
