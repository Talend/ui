@use '~@talend/design-tokens/lib/tokens';

@keyframes pulse {
	0% {
		transform: scale(0.95);
		box-shadow: 0 0 0 0.3rem tokens.$coral-color-accent-background, 0 0 0 0.6rem tokens.$coral-color-accent-background;
	}
	80% {
		transform: scale(1);
		box-shadow: 0 0 0 0.3rem tokens.$coral-color-accent-background, 0 0 0 1rem rgba(0, 0, 0, 0);
	}
	100% {
		transform: scale(0.95);
		box-shadow: 0 0 0 0.3rem tokens.$coral-color-accent-background, 0 0 0 0 rgba(0, 0, 0, 0);
	}
}

.step {
	display: inline-flex;
	max-width: 20rem;
	align-items: center;

	&[data-index]:before {
		content: attr(data-index) '. ';
		margin-right: tokens.$coral-spacing-xxs;
	}

	&__title {
		margin-right: tokens.$coral-spacing-s;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
	}

	&__icon {
		flex-shrink: 0;
		display: block;
		height: tokens.$coral-sizing-xxxs;
		width: tokens.$coral-sizing-xxxs;
		border-radius: tokens.$coral-radius-round;
		position: relative;
		z-index: 2;

		.tc-svg-icon {
			margin-left: tokens.$coral-spacing-xxs;;
			margin-top: tokens.$coral-spacing-xxs;;
			background: tokens.$coral-color-neutral-background;
			border-radius: tokens.$coral-radius-round;
			height: tokens.$coral-sizing-m;
			width: tokens.$coral-sizing-m;
		}
	}

	&_enabled {
		.step__icon {
			background: tokens.$coral-color-neutral-background;
			border: tokens.$coral-border-m-solid tokens.$coral-color-accent-border;
		}
	}

	&_progress {
		color: tokens.$coral-color-accent-text;

		.step__icon {
			background: tokens.$coral-color-accent-background-strong;

			&:before {
				content: '';
				border-radius: tokens.$coral-radius-round;
				box-shadow: 0 0 0 0.3rem tokens.$coral-color-accent-background;
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				z-index: 1;
				animation: pulse 2500ms infinite;
			}
		}
	}

	&_disabled {
		color: tokens.$coral-color-neutral-text-disabled;
		cursor: not-allowed;

		&:before,
		.step__title {
			opacity: tokens.$coral-opacity-m;
		}

		.step__icon {
			background: tokens.$coral-color-neutral-background-disabled;
		}
	}

	&_validated {
		.step__icon {
			background: tokens.$coral-color-accent-background-strong;
		}
	}

	&_error {
		color: tokens.$coral-color-danger-text;

		.step__icon {
			background: tokens.$coral-color-danger-background-strong;
		}
	}
}
