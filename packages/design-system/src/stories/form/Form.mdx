import { Canvas, Meta } from '@storybook/blocks';

import { FigmaImage } from '@talend/storybook-docs';

import { Tabs } from '../../';
import { Status } from '../Status.block';

import * as Stories from './Form.stories.tsx';

<Meta of={Stories} />
<Status id="form" />

# Form

The `Form` component is a slightly opinionated `<form>` tag with a flex layout and set vertical gap.

## Zoning

<FigmaImage
	src="https://www.figma.com/file/qc8oUSyVJM67gSsbTShftt/%F0%9F%93%90-Zoning?node-id=349%3A135"
	alt="zoning image for form"
/>

## Style

- The vertical gap between fields, unless specified otherwise, is `spacing-s`.
- The horizontal gap between inlined elements in a form is `spacing-m`.

[The spacing docs can be found here.](/docs/design-tokens-measures--docs)

## States

### Skeleton

<FigmaImage
	src="https://www.figma.com/file/FaYIWpJeP6LwjWr78L8eAr/Forms?node-id=311%3A25"
	alt="Form mockup"
/>

<Canvas of={Stories.FormSkeleton} />

### Field states

<Tabs
	tabs={[
		{
			tabTitle: 'Default',
			tabContent: (
				<FigmaImage
					src="https://www.figma.com/file/FaYIWpJeP6LwjWr78L8eAr/Forms?node-id=362%3A699"
					alt="Form mockup"
				/>
			),
		},
		{
			tabTitle: 'Disabled',
			tabContent: (
				<FigmaImage
					src="https://www.figma.com/file/FaYIWpJeP6LwjWr78L8eAr/Forms?node-id=26978%3A137499"
					alt="Form mockup disabled state"
				/>
			),
		},
		{
			tabTitle: 'ReadOnly',
			tabContent: (
				<FigmaImage
					src="https://www.figma.com/file/FaYIWpJeP6LwjWr78L8eAr/Forms?node-id=26980%3A128569"
					alt="Form mockup readonly"
				/>
			),
		},
	]}
/>

<Canvas of={Stories.Default} />

### Error

When an error occurs at a level that is not specific to one field, use `InlineMessage` to give the user feedback:

<FigmaImage
	src="https://www.figma.com/file/FaYIWpJeP6LwjWr78L8eAr/Forms?node-id=314%3A704"
	alt="Form mockup"
/>

<Canvas of={Stories.Error} />

[The InlineMessage docs can be found here.](/docs/messaging-inlinemessage--docs)

## Content

### Form inline help

Consider using an [Inline message](/?path=/docs/messaging-inlinemessage--docs) when help is needed to fill the form.

<FigmaImage
	src="https://www.figma.com/file/FaYIWpJeP6LwjWr78L8eAr/Forms?node-id=314%3A1028"
	alt="Form mockup"
/>

<Canvas of={Stories.InlineHelp} />

## Interactions

### Synchronous action

<FigmaImage
	src="https://www.figma.com/file/FaYIWpJeP6LwjWr78L8eAr/Forms?node-id=311%3A9"
	alt="Form mockup"
/>

<Canvas of={Stories.Loading} />

### Data loss message

When the user clicks on the cancel button or go back to the previous page, provide a confirm dialog.

<FigmaImage
	src="https://www.figma.com/file/FaYIWpJeP6LwjWr78L8eAr/Forms?node-id=232%3A39"
	alt="Form mockup"
/>

You can easily build that dialog with the [Modal component.](/docs/layout-modal--docs).

### Error focus

In case of error after submission, the focus on the screen should be on the first field errored. If more than one field in error, the focus should be placed on the first one.

## Usage

Choosing between `readonly` and `disabled` states is not really easy!
A readonly element is not editable, but gets sent when the form is submitted.
A disabled element isn't editable and isn't sent on submit.
Another difference is that readonly elements can be focused (and getting focused when "tabbing" through a form) while disabled elements can't.

## Accessibility

Non applicable
