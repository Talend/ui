import { Canvas, Meta } from '@storybook/addon-docs/blocks';

import { FigmaImage } from '@talend/storybook-docs';

import * as Stories from './InlineEditing.stories';
import { Status } from '../Status.block';

<Meta of={Stories} />
<Status id="inlineEditing" />

# Inline Editing

User can perform inline editing by using inline form.

## Zoning

<FigmaImage
	src="https://www.figma.com/file/Ve55mrVTPmg8yDo8VKRp83/Inline-editing?node-id=467%3A7850"
	alt="zoning image for inline editing"
/>

## Style

### Variations

**Single line**

<FigmaImage
	src="https://www.figma.com/file/Ve55mrVTPmg8yDo8VKRp83/Inline-editing?node-id=467%3A7866"
	alt="Single line InlineEditing with content"
/>

<Canvas of={Stories.Text} />

**Empty single line with a placeholder**

<FigmaImage
	src="https://www.figma.com/file/Ve55mrVTPmg8yDo8VKRp83/Inline-editing?node-id=472%3A3999"
	alt="Single line InlineEditing without initial content"
/>

<Canvas of={Stories.EmptyTextWithPlaceholder} />

**Controlled component**

<FigmaImage
	src="https://www.figma.com/file/Ve55mrVTPmg8yDo8VKRp83/Inline-editing?node-id=467%3A7866"
	alt="Single line InlineEditing with content"
/>

<Canvas of={Stories.ControlledComponent} />

**Multi lines**

<FigmaImage
	src="https://www.figma.com/file/Ve55mrVTPmg8yDo8VKRp83/Inline-editing?node-id=474%3A4085"
	alt="Multi lines InlineEditing with initial content"
/>

<Canvas of={Stories.Textarea} />

## States

### Loading

<FigmaImage
	src="https://www.figma.com/file/Ve55mrVTPmg8yDo8VKRp83/Inline-editing?node-id=477%3A4388"
	alt="Pending state for InlineEditing"
/>

<Canvas of={Stories.LoadingMode} />

### Error

<FigmaImage
	src="https://www.figma.com/file/Ve55mrVTPmg8yDo8VKRp83/Inline-editing?node-id=478%3A4481"
	alt="Error state for InlineEditing"
/>

In this example, async submit will always end up with an error.

<Canvas of={Stories.InUse} />

## Interactions

The edit mode can be triggered by clicking on the pencil icon, or by double-clicking on the text.

### Quality Assurance

Non-regression testing can be performed using:

<table>
	<tr>
		<th>data-test</th>
		<th>description</th>
	</tr>
	<tr>
		<td>`inlineediting`</td>
		<td>Container containing value and actions</td>
	</tr>
	<tr>
		<td>`inlineediting.button.edit`</td>
		<td>Edit button to pass into "editing" mode</td>
	</tr>
	<tr>
		<td>`inlineediting.input` or `inlineediting.textarea`</td>
		<td>Control to change its value in "editing" mode depending on the variant in use</td>
	</tr>
	<tr>
		<td>`inlineediting.button.cancel`</td>
		<td>Cancel button to quit "editing" mode</td>
	</tr>
	<tr>
		<td>`inlineediting.button.submit`</td>
		<td>Submit button to validate edition in "editing" mode</td>
	</tr>
</table>

## Usage

<Canvas of={Stories.Default} />
<Canvas of={Stories.WithEllipsis} />
<Canvas of={Stories.WithTextarea} />
<Canvas of={Stories.LongTextInTextarea} />
<Canvas of={Stories.AsHeading} />

## Manage edition

Set edition mode by default

<Canvas of={Stories.DefaultEditionMode} />

Control edition mode

<Canvas of={Stories.ControlEditionMode} />

## Accessibility

- In single line mode, press <kbd>Enter</kbd> to validate the edition
- Buttons can be focused by using <kbd>Tab</kbd>
- Press <kbd>Esc</kbd> to cancel the edition

Clicking outside the form will cancel the edition as well
