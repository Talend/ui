{"remainingRequest":"/Users/jmfrancois/github/talend/ui/packages/containers/sandbox/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/jmfrancois/github/talend/ui/packages/containers/src/ComponentForm/kit/flatten.js","dependencies":[{"path":"/Users/jmfrancois/github/talend/ui/packages/containers/src/ComponentForm/kit/flatten.js","mtime":1540303050662},{"path":"/Users/jmfrancois/github/talend/ui/packages/containers/sandbox/node_modules/cache-loader/dist/cjs.js","mtime":1581407659958},{"path":"/Users/jmfrancois/github/talend/ui/packages/containers/sandbox/node_modules/babel-loader/lib/index.js","mtime":1581407659368}],"contextDependencies":[],"result":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/* eslint-disable no-param-reassign */\n\n/**\n *  Copyright (C) 2006-2018 Talend Inc. - www.talend.com\n *\n *  Licensed under the Apache License, Version 2.0 (the 'License');\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an 'AS IS' BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\nfunction step(anything, key, payload) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  // on native values, we just add it in the payload\n  if (_typeof(anything) !== 'object') {\n    payload[key] = anything;\n  } else {\n    // For objects (including arrays), we flatten it.\n    // We store it in 2 forms depending on options.\n    //\n    // Let's say that we have an array { 'my-array': ['tata', 'toto'] }.\n    // - Form 1: { 'my-array' : { '[0]': 'tata', '[1]': 'toto' } }\n    // - Form 2: { 'my-array[0]': 'tata', 'my-array[1]': 'toto' }\n    //\n    // And for objects { 'my-object': { first: 'tata', second: 'toto' } }.\n    // - Form 1: { 'my-object' : { '.first': 'tata', '.second': 'toto' } }\n    // - Form 2: { 'my-object.first': 'tata', 'my-object.second': 'toto' }\n    var subPayload = {};\n\n    if (Array.isArray(anything)) {\n      anything.forEach(function (item, index) {\n        var itemKey = \"[\".concat(index, \"]\");\n        step(item, itemKey, subPayload, options);\n      });\n    } else {\n      Object.keys(anything).forEach(function (nextKey) {\n        var itemKey = \".\".concat(nextKey);\n        var item = anything[nextKey];\n        step(item, itemKey, subPayload, options);\n      });\n    } // Form 1: { 'my-object' : {<flattenedObject>} }\n\n\n    if (options.includeObjects) {\n      payload[key] = subPayload;\n    } // Form 2: { 'my-object.key1': value1, my-object.key2: value2, ... }\n\n\n    Object.keys(subPayload).forEach(function (subKey) {\n      payload[\"\".concat(key).concat(subKey)] = subPayload[subKey];\n    });\n  }\n}\n/**\n * flatten an object means each keys are a jsonpath.\n * jsperf: https://jsperf.com/talend-flatten\n * @param {object} obj the source object\n * @param {object} options\n * @return {object} flatten object\n * @example\n * flatten({ level1: { level2: 'foo' }})\n * // { 'level1.level2': 'foo' }\n */\n\n\nexport default function flatten(obj, options) {\n  return Object.keys(obj).reduce(function (accu, key) {\n    step(obj[key], key, accu, options);\n    return accu;\n  }, {});\n}",{"version":3,"sources":["/Users/jmfrancois/github/talend/ui/packages/containers/src/ComponentForm/kit/flatten.js"],"names":["step","anything","key","payload","options","subPayload","Array","isArray","forEach","item","index","itemKey","Object","keys","nextKey","includeObjects","subKey","flatten","obj","reduce","accu"],"mappings":";;AAAA;;AACA;;;;;;;;;;;;;;;AAgBA,SAASA,IAAT,CAAcC,QAAd,EAAwBC,GAAxB,EAA6BC,OAA7B,EAAoD;AAAA,MAAdC,OAAc,uEAAJ,EAAI;;AACnD;AACA,MAAI,QAAOH,QAAP,MAAoB,QAAxB,EAAkC;AACjCE,IAAAA,OAAO,CAACD,GAAD,CAAP,GAAeD,QAAf;AACA,GAFD,MAEO;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAMI,UAAU,GAAG,EAAnB;;AACA,QAAIC,KAAK,CAACC,OAAN,CAAcN,QAAd,CAAJ,EAA6B;AAC5BA,MAAAA,QAAQ,CAACO,OAAT,CAAiB,UAACC,IAAD,EAAOC,KAAP,EAAiB;AACjC,YAAMC,OAAO,cAAOD,KAAP,MAAb;AACAV,QAAAA,IAAI,CAACS,IAAD,EAAOE,OAAP,EAAgBN,UAAhB,EAA4BD,OAA5B,CAAJ;AACA,OAHD;AAIA,KALD,MAKO;AACNQ,MAAAA,MAAM,CAACC,IAAP,CAAYZ,QAAZ,EAAsBO,OAAtB,CAA8B,UAAAM,OAAO,EAAI;AACxC,YAAMH,OAAO,cAAOG,OAAP,CAAb;AACA,YAAML,IAAI,GAAGR,QAAQ,CAACa,OAAD,CAArB;AACAd,QAAAA,IAAI,CAACS,IAAD,EAAOE,OAAP,EAAgBN,UAAhB,EAA4BD,OAA5B,CAAJ;AACA,OAJD;AAKA,KAvBK,CAyBN;;;AACA,QAAIA,OAAO,CAACW,cAAZ,EAA4B;AAC3BZ,MAAAA,OAAO,CAACD,GAAD,CAAP,GAAeG,UAAf;AACA,KA5BK,CA6BN;;;AACAO,IAAAA,MAAM,CAACC,IAAP,CAAYR,UAAZ,EAAwBG,OAAxB,CAAgC,UAAAQ,MAAM,EAAI;AACzCb,MAAAA,OAAO,WAAID,GAAJ,SAAUc,MAAV,EAAP,GAA6BX,UAAU,CAACW,MAAD,CAAvC;AACA,KAFD;AAGA;AACD;AAED;;;;;;;;;;;;AAUA,eAAe,SAASC,OAAT,CAAiBC,GAAjB,EAAsBd,OAAtB,EAA+B;AAC7C,SAAOQ,MAAM,CAACC,IAAP,CAAYK,GAAZ,EAAiBC,MAAjB,CAAwB,UAACC,IAAD,EAAOlB,GAAP,EAAe;AAC7CF,IAAAA,IAAI,CAACkB,GAAG,CAAChB,GAAD,CAAJ,EAAWA,GAAX,EAAgBkB,IAAhB,EAAsBhB,OAAtB,CAAJ;AACA,WAAOgB,IAAP;AACA,GAHM,EAGJ,EAHI,CAAP;AAIA","sourcesContent":["/* eslint-disable no-param-reassign */\n/**\n *  Copyright (C) 2006-2018 Talend Inc. - www.talend.com\n *\n *  Licensed under the Apache License, Version 2.0 (the 'License');\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an 'AS IS' BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\nfunction step(anything, key, payload, options = {}) {\n\t// on native values, we just add it in the payload\n\tif (typeof anything !== 'object') {\n\t\tpayload[key] = anything;\n\t} else {\n\t\t// For objects (including arrays), we flatten it.\n\t\t// We store it in 2 forms depending on options.\n\t\t//\n\t\t// Let's say that we have an array { 'my-array': ['tata', 'toto'] }.\n\t\t// - Form 1: { 'my-array' : { '[0]': 'tata', '[1]': 'toto' } }\n\t\t// - Form 2: { 'my-array[0]': 'tata', 'my-array[1]': 'toto' }\n\t\t//\n\t\t// And for objects { 'my-object': { first: 'tata', second: 'toto' } }.\n\t\t// - Form 1: { 'my-object' : { '.first': 'tata', '.second': 'toto' } }\n\t\t// - Form 2: { 'my-object.first': 'tata', 'my-object.second': 'toto' }\n\t\tconst subPayload = {};\n\t\tif (Array.isArray(anything)) {\n\t\t\tanything.forEach((item, index) => {\n\t\t\t\tconst itemKey = `[${index}]`;\n\t\t\t\tstep(item, itemKey, subPayload, options);\n\t\t\t});\n\t\t} else {\n\t\t\tObject.keys(anything).forEach(nextKey => {\n\t\t\t\tconst itemKey = `.${nextKey}`;\n\t\t\t\tconst item = anything[nextKey];\n\t\t\t\tstep(item, itemKey, subPayload, options);\n\t\t\t});\n\t\t}\n\n\t\t// Form 1: { 'my-object' : {<flattenedObject>} }\n\t\tif (options.includeObjects) {\n\t\t\tpayload[key] = subPayload;\n\t\t}\n\t\t// Form 2: { 'my-object.key1': value1, my-object.key2: value2, ... }\n\t\tObject.keys(subPayload).forEach(subKey => {\n\t\t\tpayload[`${key}${subKey}`] = subPayload[subKey];\n\t\t});\n\t}\n}\n\n/**\n * flatten an object means each keys are a jsonpath.\n * jsperf: https://jsperf.com/talend-flatten\n * @param {object} obj the source object\n * @param {object} options\n * @return {object} flatten object\n * @example\n * flatten({ level1: { level2: 'foo' }})\n * // { 'level1.level2': 'foo' }\n */\nexport default function flatten(obj, options) {\n\treturn Object.keys(obj).reduce((accu, key) => {\n\t\tstep(obj[key], key, accu, options);\n\t\treturn accu;\n\t}, {});\n}\n"]}]}