import { ArgsTable, Meta, Canvas, Story } from '@storybook/addon-docs/blocks';
import { action } from '@storybook/addon-actions';
import { FigmaImage, FigmaLink, Use } from '../../../docs';
import Button from '../';
import Skeleton from '../../Skeleton';
import Tooltip from '../../Tooltip';
import { IconsProvider } from '../../IconsProvider';

<Meta title="Components/Button" component={Button} />

<FigmaLink href="https://www.figma.com/file/vvJTHBAgiLfBpgeKEjmvvZ/Buttons" />

# Button

Buttons are clickable items used for actions. They can have different style depending on the needs.

## Zoning

<FigmaImage
	src="https://www.figma.com/file/2Sw2IvUHZ9F2srJ3L8AWxr/%F0%9F%93%90-Zoning?node-id=12%3A64"
	alt="zoning image for buttons"
/>

## Style

### Sizes

Coral support two buttons sizes: **default** and **small**.

The small size is available for primary, secondary and tertiary buttons — but shouldn't be use for buttons with icons or dropdown buttons.

Icon buttons has also two sizes: **default** and **small**. They can be used as dropdown but without the caret icon.

<FigmaImage
	src="https://www.figma.com/file/nLfALGpsfnvwlmm3Kix2TU/%F0%9F%A7%A9-Schema?node-id=4%3A57"
	alt="buttons sizes illustration"
/>

### Variations

**Primary**

<Canvas>
	<Story name="primary">
		<Button.Primary onClick={action('clicked')}>Basic Button</Button.Primary>
	</Story>
	<Story name="primary--icon">
		<Button.Primary onClick={action('clicked')} icon="talend-plus">
			Button with icon
		</Button.Primary>
	</Story>
	<Story name="primary--small">
		<Button.Primary small onClick={action('clicked')}>
			Small Button
		</Button.Primary>
	</Story>
	<Story name="primary--disabled">
		<Button.Primary disabled onClick={action('clicked')}>
			Disabled Button
		</Button.Primary>
	</Story>
	<Story name="primary--disabled-focusable">
		<Button.Primary disabled focusable onClick={action('clicked')}>
			Disabled Focusable Button
		</Button.Primary>
	</Story>
</Canvas>

**Destructive**

<Canvas>
	<Story name="destructive">
		<Button.Destructive onClick={action('clicked')}>Basic Button</Button.Destructive>
	</Story>
	<Story name="destructive--icon">
		<Button.Destructive onClick={action('clicked')} icon="talend-plus">
			Button with icon
		</Button.Destructive>
	</Story>
	<Story name="destructive--small">
		<Button.Destructive small onClick={action('clicked')}>
			Small Button
		</Button.Destructive>
	</Story>
	<Story name="destructive--disabled">
		<Button.Destructive disabled onClick={action('clicked')}>
			Disabled Button
		</Button.Destructive>
	</Story>
	<Story name="destructive--disabled-focusable">
		<Button.Destructive disabled focusable onClick={action('clicked')}>
			Disabled Focusable Button
		</Button.Destructive>
	</Story>
</Canvas>

**Secondary**

<Canvas>
	<Story name="secondary">
		<Button.Secondary onClick={action('clicked')}>Basic Button</Button.Secondary>
	</Story>
	<Story name="secondary--icon">
		<Button.Secondary onClick={action('clicked')} icon="talend-plus">
			Button with icon
		</Button.Secondary>
	</Story>
	<Story name="secondary--small">
		<Button.Secondary small onClick={action('clicked')}>
			Small Button
		</Button.Secondary>
	</Story>
	<Story name="secondary--disabled">
		<Button.Secondary disabled onClick={action('clicked')}>
			Disabled Button
		</Button.Secondary>
	</Story>
	<Story name="secondary--disabled-focusable">
		<Button.Secondary disabled focusable onClick={action('clicked')}>
			Disabled Focusable Button
		</Button.Secondary>
	</Story>
</Canvas>

**Tertiary**

<Canvas>
	<Story name="tertiary">
		<Button.Tertiary onClick={action('clicked')}>Basic Button</Button.Tertiary>
	</Story>
	<Story name="tertiary--icon">
		<Button.Tertiary onClick={action('clicked')} icon="talend-plus">
			Button with icon
		</Button.Tertiary>
	</Story>
	<Story name="tertiary--small">
		<Button.Tertiary small onClick={action('clicked')}>
			Small Button
		</Button.Tertiary>
	</Story>
	<Story name="tertiary--disabled">
		<Button.Tertiary disabled onClick={action('clicked')}>
			Disabled Button
		</Button.Tertiary>
	</Story>
	<Story name="tertiary--disabled-focusable">
		<Button.Tertiary disabled focusable onClick={action('clicked')}>
			Disabled Focusable Button
		</Button.Tertiary>
	</Story>
</Canvas>

**Icon button**

<Canvas>
	<Story name="icon">
		<Button.Icon onClick={action('clicked')} icon={'talend-plus'}>
			Basic Button
		</Button.Icon>
	</Story>
	<Story name="icon--small">
		<Button.Icon small onClick={action('clicked')} icon={'talend-plus'}>
			Small Button
		</Button.Icon>
	</Story>
	<Story name="icon--disabled">
		<Button.Icon disabled onClick={action('clicked')} icon={'talend-plus'}>
			Disabled Button
		</Button.Icon>
	</Story>
	<Story name="icon--disabled-focusable">
		<Button.Icon disabled focusable onClick={action('clicked')} icon={'talend-plus'}>
			Disabled Focusable Button
		</Button.Icon>
	</Story>
</Canvas>

**Buttons should all have a tooltip on hover displaying the description**

<Canvas>
	<Story name="basic">
		<Tooltip title="Relevant information about contacting the support">
			<Button.Primary onClick={action('clicked')} icon={'talend-bubbles'}>
				Contact support
			</Button.Primary>
		</Tooltip>
	</Story>
</Canvas>

## Interactions

### Button skeletons

<Canvas>
	<Story name="skeleton">
		<Skeleton.Button />
	</Story>
	<Story name="skeleton--small">
		<Skeleton.Button small />
	</Story>
	<Story name="skeleton--icon">
		<Skeleton.Icon />
	</Story>
</Canvas>

### Async button

When the user clicks on the button, and the action is asynchronous, a spinner will appear on the left of the label.
If the button has an icon, the spinner will temporary replace this icon as long as it's loading.
No action will be possible until it's done.

<Canvas>
	<Story name="loading">
		{() => {
			const [loading, isLoading] = React.useState(false);
			return (
				<Tooltip title="Relevant description of the basic button">
					<Button.Primary
						icon="talend-check"
						loading={loading}
						onClick={() => {
							isLoading(true);
							setTimeout(() => isLoading(false), 3000);
						}}
					>
						Async call to action
					</Button.Primary>
				</Tooltip>
			);
		}}
	</Story>
</Canvas>

## Content

The word/words on buttons should be accurate, specific, and explicit—not vague. Use OK sparingly—replace it with the specific action whenever possible. Users usually click OK to confirm the action they want to do. Name that action instead.

<Use>
	<Use.Do>
		<ul>
			<li>Use sentence case in button labels.</li>
			<li>
				Always start with an action verb: something happens when you click a button. Say what
				happens with a verb. Navigation buttons are an example of an exception to using an action
				verb. These often use Next and Back.
			</li>
			<li>
				Choose specific words over vague words: “Try it now” for example is a common call to action
				(CTA), but doesn’t really tell the user what will happen next. It might be too vague. Use
				your judgement according to what the user should be doing when they click the button.
			</li>
			<li>
				Choose words that logically align with the preceding content: if your headline says "Sign up
				for a free trial" then your button text should also say "Sign up".
			</li>
		</ul>
	</Use.Do>
	<Use.Dont>
		<ul>
			<li>Don’t use more than 3 words in a button: keep it short and simple.</li>
			<li>
				Don't use Yes and No for buttons. Say what action really happens when the user clicks.
			</li>
			<li>Don't use title case or all caps in button labels (except for acronyms).</li>
		</ul>
	</Use.Dont>
</Use>

## Usage

<Canvas>
	<Story
		name="usage"
		args={{
			variant: 'Primary',
			icon: 'talend-upload',
			children: 'Upload',
		}}
		argTypes={{
			variant: {
				description: 'Button variation',
				control: {
					type: 'select',
					options: ['', 'Primary', 'Secondary', 'Tertiary', 'Destructive', 'Icon'],
				},
			},
			small: {
				description: 'Button is small',
				control: {
					type: 'boolean',
				},
			},
			icon: {
				description: 'Button icon as illustration',
				control: {
					type: 'select',
					options: [''].concat(IconsProvider.getCurrentIconIds()),
				},
			},
			loading: {
				description: 'Button is loading',
				control: {
					type: 'boolean',
				},
			},
            disabled: {
				description: 'Button is disabled',
				control: {
					type: 'boolean',
				},
			},
		}}
	>
		{props => {
			const Component = Button[props.variant] || Button;
			return <Component {...props} onClick={action('clicked')} />;
		}}
	</Story>
</Canvas>

<ArgsTable story="usage" />

## Accessibility

- Press <kbd>TABS</kbd> to focus on the button

- Press <kbd>SPACE</kbd> or <kbd>ENTER</kbd> to activate the button

## Changelog

| Date       | Author | Description |
| ---------- | ------ | ----------- |
| 12/06/2019 | Monia  | Init page   |
