import { Meta } from '@storybook/addon-docs/blocks';
import { ColorPalette, ColorItem } from '@storybook/components';

import { dark } from '../.';

import tokens from '../../tokens';
import { FigmaImage } from '../../docs';

<Meta title="Themes/Dark" />

export function isNumeric(str) {
    if (typeof str != "string") return false;
    return !isNaN(str) && !isNaN(parseFloat(str));
}

export function getTokenNameByValue(value) {
    let designToken = null;
    Object.entries(tokens.colors).some(([k, v]) => {
        if (typeof v === 'object' && v !== null) {
            const match = Object.entries(v).find(([kn, vn]) =>
                isNumeric(kn) && vn === value);
            if (match) {
                designToken = `${k}[${match[0]}]`;
            }
        }
    });
    return designToken || 'there is no design token used here!';
}

# Dark theme

<FigmaImage
	src="https://www.figma.com/file/6yvSenpvK9L8892ruW7XI6/Portal?node-id=2%3A72"
	alt="Talend dark theme"
    full
/>

<ColorPalette>
    {Object.entries(dark.colors).map(([k, v], index) => {
        const vs = typeof v === 'string' ? v : v[500];
        return <ColorItem key={index} title={k} colors={{ [`${getTokenNameByValue(vs)}`]: vs }} />;
    })}
</ColorPalette>
