import{u as P,r as _,j as e,c as q,I as J,A as K,L as Q}from"./iframe-DRCDqYKx.js";import{y as V,a as Z,l as H,j as Y,z as F,A as ee,F as b,D as te,S as ne,o as se}from"./Skeleton-D2WvrjHU.js";import{S as X,a as ie}from"./StackItem-BAiyfTPs.js";import{u as ae}from"./Tooltip--vE932z8.js";import"./preload-helper-PPVm8Dsz.js";var n=(o=>(o.CREATE="create",o.EDIT="edit",o.VIEW="view",o))(n||{});const oe="_enumeration__header_e3y6j_1",re="_enumeration__title_e3y6j_15",z={enumeration__header:oe,enumeration__title:re},ce=({filteredItems:o,id:s,items:a,mode:i,onCreate:T,onImport:f,onRemove:c,setFilteredItems:p,setMode:x,selectedItems:m,setSelectedItems:N,title:R})=>{const{t:l}=P(V),d=_.useRef(null),[r,g]=_.useState(),[j,S]=_.useState(!1),O=()=>m.length>0||m.length===a.length,v=u=>N(u?a:[]);return _.useEffect(()=>{p(r?a.filter(u=>u.includes(r)):a)},[r,a]),e.jsxs("div",{className:z.enumeration__header,children:[e.jsxs("div",{className:z.enumeration__title,children:[e.jsx("h4",{children:R}),m.length?e.jsx(Z,{onClick:async()=>{c(m),N([]),x(n.VIEW)},children:l("ENUMERATION_REMOVE_BUTTON",{count:m.length,defaultValue:"Remove ({{count}})"})}):e.jsxs(X,{as:"ul",gap:"XS",justify:"end",children:[e.jsx("li",{children:e.jsx(H,{disabled:![n.VIEW,n.CREATE].includes(i),icon:"plus",isActive:i===n.CREATE,onClick:()=>{g(void 0),p(a),x(i===n.CREATE?n.VIEW:n.CREATE)},size:"S",children:l("ENUMERATION_ADD_ACTION","Add item")})}),e.jsx("li",{children:e.jsx(H,{disabled:![n.VIEW,n.EDIT].includes(i)||o.length===0,icon:"pencil",isActive:i===n.EDIT,onClick:()=>{x(i===n.EDIT?n.VIEW:n.EDIT)},size:"S",children:l("ENUMERATION_EDIT_ACTION","Edit item")})}),f&&e.jsxs("li",{children:[e.jsx("input",{type:"file",accept:".txt, .csv",ref:d,onChange:u=>{const h=new FileReader,C=u.target.files?.[0];if(C)try{h.readAsText(C),h.onload=()=>f(h.result)}catch{}}}),e.jsx(Y,{icon:"import",onClick:()=>d.current?.click(),size:"S",disabled:![n.VIEW].includes(i),children:l("ENUMERATION_IMPORT_ACTION","Import items")})]})]})]}),i===n.CREATE?e.jsxs(ie,{gap:"XXS",align:"stretch",children:[e.jsx(F.Text,{isEditMode:!0,label:l("ENUMERATION_ADD_INPUT_PLACEHOLDER","Enter a value"),placeholder:l("ENUMERATION_ADD_INPUT_PLACEHOLDER","Enter a value"),onEdit:(u,h)=>{h&&(T(h),x(n.VIEW)),S(!h)},onCancel:()=>{x(n.VIEW)},hasError:j}),j&&e.jsx(ee,{description:l("ENUMERATION_ADD_INPUT_EMPTY","You need to enter a value")})]}):e.jsx(b.Search,{hideLabel:!0,label:"Search",name:`${s}-search`,onChange:u=>g(u.target.value),placeholder:"Search"}),i===n.EDIT&&e.jsx(b.Checkbox,{name:`${s}-selectall`,label:l("ENUMERATION_SELECT_ALL","Select all"),onChange:u=>v(u.target.checked),checked:O(),indeterminate:m.length>0})]})},le="_enumeration__item_1xn0t_1",k={enumeration__item:le,"enumeration__item--edit":"_enumeration__item--edit_1xn0t_20","enumeration__item--animate":"_enumeration__item--animate_1xn0t_23"},de=({isToAnimate:o,mode:s,onEdit:a,onRemove:i,selectedItems:T,setSelectedItems:f,value:c})=>{const{t:p}=P(V),x=ae(),[m,N]=_.useState(!1),R=d=>T.includes(d),l=(d,r)=>{f(r?[...T,d]:T.filter(g=>g!==d))};return e.jsx("div",{className:q(k.enumeration__item,{[k["enumeration__item--edit"]]:m,[k["enumeration__item--animate"]]:o}),children:m?e.jsx(F.Text,{defaultValue:c,isEditMode:!0,label:`${c}`,onCancel:()=>N(!1),onEdit:(d,r)=>{a(r),N(!1)},placeholder:c}):c?e.jsxs(e.Fragment,{children:[s===n.EDIT?e.jsx(b.Checkbox,{checked:R(c),label:c,name:`${x}`,onChange:d=>l(c,d.target.checked)}):e.jsx("p",{children:c}),e.jsx(te,{"aria-label":"Open user menu",items:[{label:p("ENUMERATION_DROPDOWN_EDIT","Edit"),icon:"pencil",onClick:()=>N(!0),type:"button"},{label:p("ENUMERATION_DROPDOWN_REMOVE","Remove"),icon:"trash",onClick:()=>i?.([c]),type:"button"}],children:e.jsx(Y,{icon:"dots-vertical",onClick:()=>{},size:"S",disabled:[n.CREATE,n.EDIT].includes(s),children:p("ENUMERATION_DROPDOWN_OPTIONS","Dropdown options")})})]}):e.jsx(ne,{variant:"paragraph"})})},ue="_enumeration_1mcqr_1",Ee={enumeration:ue},$=38,w=({id:o,items:s,loadMoreRows:a,onCreate:i,onChange:T,onEdit:f,onImport:c,onRemove:p,title:x})=>{const{t:m}=P(V),[N,R]=_.useState(n.VIEW),[l,d]=_.useState([]),[r,g]=_.useState(s),[j,S]=_.useState(),[O,v]=_.useState(r.map(t=>({value:t,isToAnimate:!1}))),u=(t,E)=>{const I=[...O];t.forEach(A=>{const D=I.findIndex(U=>U.value===A);D<0?I.unshift({value:A,isToAnimate:E}):I[D].isToAnimate=E}),v(I)},h=t=>{S(0),u(t,!0),setTimeout(()=>{u(t,!1),S(void 0)},2500)},C=async t=>{try{t&&(await i?.(t),T([t,...s]),h([t]))}catch{}},L=async(t,E)=>{try{const I=s.indexOf(r[E]);if(I!==-1){const A=[...s];A[I]=t,T(A),await f?.(t)}}catch{}},W=async t=>{try{await p?.(t),T(s.filter(E=>!t.includes(E)))}catch{}};return e.jsxs("div",{className:Ee.enumeration,children:[e.jsx(ce,{filteredItems:r,id:o,items:s,mode:N,onCreate:C,onImport:t=>{const E=t.split(`
`).filter(Boolean);c?.(E),h(E)},onRemove:W,selectedItems:l,setFilteredItems:g,setMode:R,setSelectedItems:d,title:x}),a&&r.length?e.jsx(J,{isRowLoaded:({index:t})=>!!r[t],loadMoreRows:a,rowCount:r.length,children:({onRowsRendered:t,registerChild:E})=>e.jsx(K,{disableHeight:!0,children:({width:I})=>e.jsx(Q,{scrollToIndex:j,height:Math.min(r.length*$,400),onRowsRendered:t,overscanRowCount:25,ref:E,rowCount:r.length,rowHeight:$,rowRenderer:({index:A,key:D,style:U})=>e.jsx("div",{style:U,children:e.jsx(de,{isToAnimate:O[A]?.isToAnimate,mode:N,onEdit:G=>L(G,A),onRemove:W,selectedItems:l,setSelectedItems:d,value:r[A]},D)}),width:I})})}):e.jsx(X,{gap:0,padding:{x:0,y:"M"},children:e.jsx(se,{description:m("ENUMERATION_EMPTY_LIST_DESCRIPTION","Any additional details here."),title:m("ENUMERATION_EMPTY_LIST_TITLE","The list is empty."),variant:"M"})})]})},pe={component:w,title:"Form/Enumeration"},B=(o,s)=>{const a=[];for(let i=0;i<s;i++)i<=o?a.push(`Item ${i+1}`):a.push("");return a},y=()=>{const[o,s]=_.useState([...B(100,500)]);return e.jsx(w,{id:"default",items:o,loadMoreRows:({stopIndex:a})=>new Promise(i=>{s([...B(a,500)]),i()}),onChange:s,onImport:a=>{s([...a,...o])},title:"This is a title"})},M=()=>{const[o,s]=_.useState([]);return e.jsx(w,{title:"This is a title",items:o,id:"empty",onChange:s})};y.parameters={...y.parameters,docs:{...y.parameters?.docs,source:{originalSource:`() => {
  const [items, setItems] = useState([...getItems(100, 500)]);
  return <Enumeration id={'default'} items={items} loadMoreRows={({
    stopIndex
  }) => new Promise<void>(resolve => {
    setItems([...getItems(stopIndex, 500)]);
    resolve();
  })} onChange={setItems} onImport={(data: string[]) => {
    setItems([...data, ...items]);
  }} title="This is a title" />;
}`,...y.parameters?.docs?.source}}};M.parameters={...M.parameters,docs:{...M.parameters?.docs,source:{originalSource:`() => {
  const [items, setItems] = useState<string[]>([]);
  return <Enumeration title="This is a title" items={items} id={'empty'} onChange={setItems} />;
}`,...M.parameters?.docs?.source}}};const xe=["Default","Empty"];export{y as Default,M as Empty,xe as __namedExportsOrder,pe as default};
