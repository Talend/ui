import{j as e}from"./index-D7mHjmc3.js";import{r as _}from"./iframe-ChWwpfwL.js";import{m as P,I as q,A as J,L as K}from"./useCopyToClipboard-D5J2YMOK.js";import{I as V,b as Q,S as Y,n as H,l as F,a as Z,R as X,P as ee,O as k,u as te,D as ne,d as se,A as ie}from"./Skeleton-J-GOWQMf.js";import{c as ae}from"./index-Di2Kmz2v.js";var n=(o=>(o.CREATE="create",o.EDIT="edit",o.VIEW="view",o))(n||{});const oe="_enumeration__header_e3y6j_1",re="_enumeration__title_e3y6j_15",z={enumeration__header:oe,enumeration__title:re},ce=({filteredItems:o,id:s,items:a,mode:i,onCreate:T,onImport:A,onRemove:c,setFilteredItems:p,setMode:x,selectedItems:m,setSelectedItems:f,title:R})=>{const{t:l}=P(V),d=_.useRef(null),[r,N]=_.useState(),[O,C]=_.useState(!1),D=()=>m.length>0||m.length===a.length,v=u=>f(u?a:[]);return _.useEffect(()=>{p(r?a.filter(u=>u.includes(r)):a)},[r,a]),e.jsxs("div",{className:z.enumeration__header,children:[e.jsxs("div",{className:z.enumeration__title,children:[e.jsx("h4",{children:R}),m.length?e.jsx(Q,{onClick:async()=>{c(m),f([]),x(n.VIEW)},children:l("ENUMERATION_REMOVE_BUTTON",{count:m.length,defaultValue:"Remove ({{count}})"})}):e.jsxs(Y,{as:"ul",gap:"XS",justify:"end",children:[e.jsx("li",{children:e.jsx(H,{disabled:![n.VIEW,n.CREATE].includes(i),icon:"plus",isActive:i===n.CREATE,onClick:()=>{N(void 0),p(a),x(i===n.CREATE?n.VIEW:n.CREATE)},size:"S",children:l("ENUMERATION_ADD_ACTION","Add item")})}),e.jsx("li",{children:e.jsx(H,{disabled:![n.VIEW,n.EDIT].includes(i)||o.length===0,icon:"pencil",isActive:i===n.EDIT,onClick:()=>{x(i===n.EDIT?n.VIEW:n.EDIT)},size:"S",children:l("ENUMERATION_EDIT_ACTION","Edit item")})}),A&&e.jsxs("li",{children:[e.jsx("input",{type:"file",accept:".txt, .csv",ref:d,onChange:u=>{const h=new FileReader,y=u.target.files?.[0];if(y)try{h.readAsText(y),h.onload=()=>A(h.result)}catch{}}}),e.jsx(F,{icon:"import",onClick:()=>d.current?.click(),size:"S",disabled:![n.VIEW].includes(i),children:l("ENUMERATION_IMPORT_ACTION","Import items")})]})]})]}),i===n.CREATE?e.jsxs(Z,{gap:"XXS",align:"stretch",children:[e.jsx(X.Text,{isEditMode:!0,label:l("ENUMERATION_ADD_INPUT_PLACEHOLDER","Enter a value"),placeholder:l("ENUMERATION_ADD_INPUT_PLACEHOLDER","Enter a value"),onEdit:(u,h)=>{h&&(T(h),x(n.VIEW)),C(!h)},onCancel:()=>{x(n.VIEW)},hasError:O}),O&&e.jsx(ee,{description:l("ENUMERATION_ADD_INPUT_EMPTY","You need to enter a value")})]}):e.jsx(k.Search,{hideLabel:!0,label:"Search",name:`${s}-search`,onChange:u=>N(u.target.value),placeholder:"Search"}),i===n.EDIT&&e.jsx(k.Checkbox,{name:`${s}-selectall`,label:l("ENUMERATION_SELECT_ALL","Select all"),onChange:u=>v(u.target.checked),checked:D(),indeterminate:m.length>0})]})},le="_enumeration__item_1xn0t_1",U={enumeration__item:le,"enumeration__item--edit":"_enumeration__item--edit_1xn0t_20","enumeration__item--animate":"_enumeration__item--animate_1xn0t_23"},de=({isToAnimate:o,mode:s,onEdit:a,onRemove:i,selectedItems:T,setSelectedItems:A,value:c})=>{const{t:p}=P(V),x=te(),[m,f]=_.useState(!1),R=d=>T.includes(d),l=(d,r)=>{A(r?[...T,d]:T.filter(N=>N!==d))};return e.jsx("div",{className:ae(U.enumeration__item,{[U["enumeration__item--edit"]]:m,[U["enumeration__item--animate"]]:o}),children:m?e.jsx(X.Text,{defaultValue:c,isEditMode:!0,label:`${c}`,onCancel:()=>f(!1),onEdit:(d,r)=>{a(r),f(!1)},placeholder:c}):c?e.jsxs(e.Fragment,{children:[s===n.EDIT?e.jsx(k.Checkbox,{checked:R(c),label:c,name:`${x}`,onChange:d=>l(c,d.target.checked)}):e.jsx("p",{children:c}),e.jsx(ne,{"aria-label":"Open user menu",items:[{label:p("ENUMERATION_DROPDOWN_EDIT","Edit"),icon:"pencil",onClick:()=>f(!0),type:"button"},{label:p("ENUMERATION_DROPDOWN_REMOVE","Remove"),icon:"trash",onClick:()=>i?.([c]),type:"button"}],children:e.jsx(F,{icon:"dots-vertical",onClick:()=>{},size:"S",disabled:[n.CREATE,n.EDIT].includes(s),children:p("ENUMERATION_DROPDOWN_OPTIONS","Dropdown options")})})]}):e.jsx(se,{variant:"paragraph"})})},ue="_enumeration_1mcqr_1",Ee={enumeration:ue},$=38,w=({id:o,items:s,loadMoreRows:a,onCreate:i,onChange:T,onEdit:A,onImport:c,onRemove:p,title:x})=>{const{t:m}=P(V),[f,R]=_.useState(n.VIEW),[l,d]=_.useState([]),[r,N]=_.useState(s),[O,C]=_.useState(),[D,v]=_.useState(r.map(t=>({value:t,isToAnimate:!1}))),u=(t,E)=>{const I=[...D];t.forEach(g=>{const M=I.findIndex(b=>b.value===g);M<0?I.unshift({value:g,isToAnimate:E}):I[M].isToAnimate=E}),v(I)},h=t=>{C(0),u(t,!0),setTimeout(()=>{u(t,!1),C(void 0)},2500)},y=async t=>{try{t&&(await i?.(t),T([t,...s]),h([t]))}catch{}},L=async(t,E)=>{try{const I=s.indexOf(r[E]);if(I!==-1){const g=[...s];g[I]=t,T(g),await A?.(t)}}catch{}},W=async t=>{try{await p?.(t),T(s.filter(E=>!t.includes(E)))}catch{}};return e.jsxs("div",{className:Ee.enumeration,children:[e.jsx(ce,{filteredItems:r,id:o,items:s,mode:f,onCreate:y,onImport:t=>{const E=t.split(`
`).filter(Boolean);c?.(E),h(E)},onRemove:W,selectedItems:l,setFilteredItems:N,setMode:R,setSelectedItems:d,title:x}),a&&r.length?e.jsx(q,{isRowLoaded:({index:t})=>!!r[t],loadMoreRows:a,rowCount:r.length,children:({onRowsRendered:t,registerChild:E})=>e.jsx(J,{disableHeight:!0,children:({width:I})=>e.jsx(K,{scrollToIndex:O,height:Math.min(r.length*$,400),onRowsRendered:t,overscanRowCount:25,ref:E,rowCount:r.length,rowHeight:$,rowRenderer:({index:g,key:M,style:b})=>e.jsx("div",{style:b,children:e.jsx(de,{isToAnimate:D[g]?.isToAnimate,mode:f,onEdit:G=>L(G,g),onRemove:W,selectedItems:l,setSelectedItems:d,value:r[g]},M)}),width:I})})}):e.jsx(Y,{gap:0,padding:{x:0,y:"M"},children:e.jsx(ie,{description:m("ENUMERATION_EMPTY_LIST_DESCRIPTION","Any additional details here."),title:m("ENUMERATION_EMPTY_LIST_TITLE","The list is empty."),variant:"M"})})]})},me={component:w,title:"Form/Enumeration"},B=(o,s)=>{const a=[];for(let i=0;i<s;i++)i<=o?a.push(`Item ${i+1}`):a.push("");return a},S=()=>{const[o,s]=_.useState([...B(100,500)]);return e.jsx(w,{id:"default",items:o,loadMoreRows:({stopIndex:a})=>new Promise(i=>{s([...B(a,500)]),i()}),onChange:s,onImport:a=>{s([...a,...o])},title:"This is a title"})},j=()=>{const[o,s]=_.useState([]);return e.jsx(w,{title:"This is a title",items:o,id:"empty",onChange:s})};S.parameters={...S.parameters,docs:{...S.parameters?.docs,source:{originalSource:`() => {
  const [items, setItems] = useState([...getItems(100, 500)]);
  return <Enumeration id={'default'} items={items} loadMoreRows={({
    stopIndex
  }) => new Promise<void>(resolve => {
    setItems([...getItems(stopIndex, 500)]);
    resolve();
  })} onChange={setItems} onImport={(data: string[]) => {
    setItems([...data, ...items]);
  }} title="This is a title" />;
}`,...S.parameters?.docs?.source}}};j.parameters={...j.parameters,docs:{...j.parameters?.docs,source:{originalSource:`() => {
  const [items, setItems] = useState<string[]>([]);
  return <Enumeration title="This is a title" items={items} id={'empty'} onChange={setItems} />;
}`,...j.parameters?.docs?.source}}};const _e=["Default","Empty"],fe=Object.freeze(Object.defineProperty({__proto__:null,Default:S,Empty:j,__namedExportsOrder:_e,default:me},Symbol.toStringTag,{value:"Module"}));export{S as D,j as E,fe as S};
