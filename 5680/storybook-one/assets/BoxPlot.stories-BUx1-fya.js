import{u as L,r as T,j as B}from"./iframe-BIQdka0S.js";import"./transform-CLRdSQou.js";import{d as A}from"./select-ArGWXfGl.js";import{q as O,h as R}from"./linear-BUPp6Ss9.js";import"./preload-helper-PPVm8Dsz.js";import"./string-xuEJKGi6.js";var b=4/11,j=6/11,Q=8/11,S=3/4,z=9/11,C=10/11,H=15/16,V=21/22,X=63/64,u=1/b/b;function F(a){return(a=+a)<b?u*a*a:a<Q?u*(a-=j)*a+S:a<C?u*(a-=z)*a+H:u*(a-=V)*a+X}const r={"box-plot":"_box-plot_sfe5n_1","box-plot__whiskerPolyg":"_box-plot__whiskerPolyg_sfe5n_10","box-plot__center":"_box-plot__center_sfe5n_15","box-plot__mean":"_box-plot__mean_sfe5n_18","box-plot__max-min-labels":"_box-plot__max-min-labels_sfe5n_25","box-plot__low-quantile-labels":"_box-plot__low-quantile-labels_sfe5n_28","box-plot__up-quantile-labels":"_box-plot__up-quantile-labels_sfe5n_31","box-plot__mean-labels":"_box-plot__mean-labels_sfe5n_34"},c=R(",");function W({id:a,width:g,height:h,boxPlotData:t}){const{t:p}=L(),y=T.useRef(null);return T.useEffect(()=>{if(t&&y.current){const l={top:30,right:80,bottom:70,left:80},n=g-l.left-l.right,f=h-l.top-l.bottom,s=1e3;A(y.current).select("svg").remove();const m=A(y.current).append("svg").attr("width",g).attr("height",h).attr("class",r.box).append("g").attr("transform",`translate(${l.left},${l.top})`),q=[t.q1,t.median,t.q2],e=O().domain([t.min,t.max]).range([f,0]);m.append("g").append("line").attr("class",r["box-plot__center"]).attr("x1",n/2).attr("y1",()=>e(t.min)).attr("x2",n/2).attr("y2",()=>e(t.max)).style("opacity",1e-6).transition().duration(s).style("opacity",1);const $=m.append("g"),M=$.append("g").selectAll("rect").data([q]);M.enter().append("rect").attr("x",0).attr("y",i=>e(i[2])).attr("width",n).attr("height",()=>e(t.q2)),M.transition().duration(s).attr("height",i=>e(i[1])-e(i[2]));const w=$.append("g").selectAll("rect").data([q]);w.enter().append("rect").attr("x",0).attr("y",()=>e(t.q2)).attr("width",n).attr("height",i=>e(i[0])-e(i[2])),w.transition().duration(s*1.5).ease(F).attr("y",i=>e(i[1])).attr("height",i=>e(i[0])-e(i[1]));const _=t.max,I=`0,${e(_)} ${n},${e(_)} ${n-20},${e(_)-20} ${e(_)+20},${e(_)-20}`,x=t.min,U=`0,${e(x)} ${n},${e(x)} ${n-20},${e(x)+20} 20,${e(x)+20}`,E=m.append("g"),k=E.append("g");k.append("polygon").attr("class",r["box-plot__whiskerPolyg"]).attr("points",I),k.append("text").attr("class",r["box-plot__max-min-labels"]).attr("x",n/2).attr("y",e(t.max)/2).text(p("MAXIMUM",{defaultValue:"Maximum"})).style("opacity",1).attr("text-anchor","middle").transition().duration(s).attr("y",-22).style("opacity",1);const v=E.append("g");v.append("polygon").attr("class",r["box-plot__whiskerPolyg"]).attr("points",U),v.append("text").attr("class",r["box-plot__max-min-labels"]).attr("x",n/2).attr("y",e(t.min)/2).text(p("MINIMUM","Minimum")).style("opacity",1).attr("text-anchor","middle").transition().duration(s).attr("y",e(t.min)+30);const N=m.insert("g");N.append("circle").attr("class",r["box-plot__mean"]).attr("r",17).attr("cx",n/2).attr("cy",()=>e(t.mean)).style("opacity",1).transition().duration(s*2).attr("r",7).style("opacity",1),N.append("circle").attr("r",1.5).attr("cx",n/2).attr("cy",()=>e(t.mean)).style("opacity",1e-6).style("shape-rendering","geometricPrecision").transition().duration(s*2).style("opacity",1);const o=m.append("g");o.append("text").attr("class",r["box-plot__max-min-labels"]).attr("x",n/2).attr("y",e(t.min)/2).text(c(t.max)).style("opacity",1).attr("text-anchor","middle").transition().duration(s).attr("y",e(t.max)-10),o.append("text").attr("class",r["box-plot__max-min-labels"]).attr("x",n/2).attr("y",e(t.min)/2).text(c(t.min)).style("opacity",1).attr("text-anchor","middle").transition().duration(s).attr("y",e(t.min)+17),o.append("text").attr("class",r["box-plot__mean-labels"]).attr("x",n/2).attr("y",()=>f-e(t.mean-t.min)<15?e(t.mean)-10:f-e(t.max-t.mean)<15?e(t.mean)+15:e(t.mean)-10).text(`${p("MEAN","Mean")}${p("COLON",":")}${c(t.mean)}`).style("opacity",1e-6).attr("text-anchor","middle").transition().duration(s*2).style("opacity",1),o.append("text").attr("class",r["box-plot__low-quantile-labels"]).attr("x",n+5).attr("y",e(t.min)/2).text(c(t.q1)).style("opacity",1).attr("text-anchor","start").transition().duration(s).attr("y",e(t.q1)+20),o.append("text").attr("class",r["box-plot__low-quantile-labels"]).attr("x",10).attr("y",e(t.min)/2).text(p("LOWER_QUANTILE","Lower quantile")).style("opacity",1).attr("text-anchor","end").transition().duration(s).attr("y",e(t.q1)+20),o.append("text").attr("class",r["box-plot__up-quantile-labels"]).attr("x",10).attr("y",e(t.min)/2).text(p("UPPER_QUANTILE","Upper quantile")).style("opacity",1).attr("text-anchor","end").transition().duration(s).attr("y",e(t.q2)-10),o.append("text").attr("class",r["box-plot__up-quantile-labels"]).attr("x",n+5).attr("y",e(t.min)/2).text(c(t.q2)).style("opacity",1).attr("text-anchor","start").transition().duration(s).attr("y",e(t.q2)-10),o.append("text").attr("class",r["box-plot__mean-labels"]).attr("x",n-5).text(c(t.median)).style("opacity",1e-6).attr("text-anchor","end").attr("y",()=>t.median>=t.mean?e(t.median)+15:e(t.median)-5).transition().duration(s*3).style("opacity",1),o.append("text").attr("class",r["box-plot__mean-labels"]).attr("x",5).text(p("MEDIAN","Median")).style("opacity",1e-6).attr("text-anchor","start").attr("y",()=>t.median>=t.mean?e(t.median)+15:e(t.median)-5).transition().duration(s*3).style("opacity",1)}},[t,h,p,g]),B.jsx("div",{id:a,ref:y,className:r["box-plot"]})}const G=a=>B.jsx(W,{...a}),et={title:"Dataviz/BoxPlot",component:W,parameters:{chromatic:{delay:1500,diffThreshold:.6}}},d=G.bind({});d.args={width:300,height:300,boxPlotData:{max:99712,mean:47468.78,median:44139,min:1581,q1:16501.75,q2:79971.25}};d.parameters={...d.parameters,docs:{...d.parameters?.docs,source:{originalSource:"(args: BoxPlotProps) => <BoxPlot {...args} />",...d.parameters?.docs?.source}}};const nt=["Default"];export{d as Default,nt as __namedExportsOrder,et as default};
