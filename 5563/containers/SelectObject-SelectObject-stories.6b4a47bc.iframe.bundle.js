(self.webpackChunk_talend_react_containers=self.webpackChunk_talend_react_containers||[]).push([[926],{"../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[16].use[2]!../../node_modules/resolve-url-loader/index.js??ruleSet[1].rules[16].use[3]!../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[16].use[4]!./src/SelectObject/SelectObject.module.scss":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".SelectObject-module__wrapper___jLIvZ{min-height:300px;max-width:500px;display:flex;flex-direction:column;overflow:hidden}.SelectObject-module__wrapper___jLIvZ .SelectObject-module__filter___vokQN{flex-shrink:0}.SelectObject-module__wrapper___jLIvZ .SelectObject-module__container___YmyOv{display:flex;flex-direction:row;overflow:auto}.SelectObject-module__wrapper___jLIvZ .SelectObject-module__container___YmyOv .SelectObject-module__list___HbHBR{flex:4 0 0}.SelectObject-module__wrapper___jLIvZ .SelectObject-module__container___YmyOv .SelectObject-module__tree___FLWbS{flex:4 0 0;overflow-y:auto}.SelectObject-module__wrapper___jLIvZ .SelectObject-module__container___YmyOv .SelectObject-module__results___Tg2yY{margin-top:4px;overflow-y:auto;flex:4 0 0}.SelectObject-module__wrapper___jLIvZ .SelectObject-module__container___YmyOv .SelectObject-module__results___Tg2yY>button{display:flex;flex-direction:column;align-items:flex-start;width:100%}.SelectObject-module__wrapper___jLIvZ .SelectObject-module__container___YmyOv .SelectObject-module__results___Tg2yY>button:hover{background-color:#f3f3f3}.SelectObject-module__wrapper___jLIvZ .SelectObject-module__container___YmyOv .SelectObject-module__results___Tg2yY .active{background:rgba(0,0,0,.05)}.SelectObject-module__wrapper___jLIvZ .SelectObject-module__container___YmyOv .SelectObject-module__preview___CAtPn{flex:3 0 0;overflow-y:auto}.SelectObject-module__wrapper___jLIvZ .SelectObject-module__container___YmyOv .SelectObject-module__preview___CAtPn .text-renderer-label dt{display:none}.SelectObject-module__wrapper___jLIvZ .SelectObject-module__container___YmyOv .SelectObject-module__preview___CAtPn .text-renderer-label dd{font-size:1.3em;font-weight:600}","",{version:3,sources:["webpack://./src/SelectObject/SelectObject.module.scss"],names:[],mappings:"AAAA,sCACC,gBAAA,CACA,eAAA,CACA,YAAA,CACA,qBAAA,CACA,eAAA,CAEA,2EACC,aAAA,CAGD,8EACC,YAAA,CACA,kBAAA,CACA,aAAA,CAEA,iHACC,UAAA,CAGD,iHACC,UAAA,CACA,eAAA,CAGD,oHAYC,cAAA,CACA,eAAA,CACA,UAAA,CAbA,2HACC,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,UAAA,CAEA,iIACC,wBAAA,CAQF,4HACC,0BAAA,CAIF,oHACC,UAAA,CACA,eAAA,CAGC,4IACC,YAAA,CAGD,4IACC,eAAA,CACA,eAAA",sourcesContent:[".wrapper {\n\tmin-height: 300px;\n\tmax-width: 500px;\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: hidden;\n\n\t.filter {\n\t\tflex-shrink: 0;\n\t}\n\n\t.container {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\toverflow: auto;\n\n\t\t.list {\n\t\t\tflex: 4 0 0;\n\t\t}\n\n\t\t.tree {\n\t\t\tflex: 4 0 0;\n\t\t\toverflow-y: auto;\n\t\t}\n\n\t\t.results {\n\t\t\t> button {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\talign-items: flex-start;\n\t\t\t\twidth: 100%;\n\n\t\t\t\t&:hover {\n\t\t\t\t\tbackground-color: #f3f3f3;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tmargin-top: 4px;\n\t\t\toverflow-y: auto;\n\t\t\tflex: 4 0 0;\n\n\t\t\t:global(.active) {\n\t\t\t\tbackground: rgba(#000, 0.05);\n\t\t\t}\n\t\t}\n\n\t\t.preview {\n\t\t\tflex: 3 0 0;\n\t\t\toverflow-y: auto;\n\n\t\t\t:global(.text-renderer-label) {\n\t\t\t\tdt {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\tdd {\n\t\t\t\t\tfont-size: 1.3em;\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={wrapper:"SelectObject-module__wrapper___jLIvZ",filter:"SelectObject-module__filter___vokQN",container:"SelectObject-module__container___YmyOv",list:"SelectObject-module__list___HbHBR",tree:"SelectObject-module__tree___FLWbS",results:"SelectObject-module__results___Tg2yY",preview:"SelectObject-module__preview___CAtPn"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src/Action/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>Action});var lib_esm=__webpack_require__("../cmf/lib-esm/index.js"),components_lib_esm=__webpack_require__("../components/lib-esm/index.js");const Action=(0,lib_esm.TJ)({componentId:ownProps=>ownProps.componentId||ownProps.actionId||ownProps.id,mapStateToProps:function mapStateToProps(state,ownProps){return ownProps.actionId?lib_esm.Ay.action.getActionInfo({registry:lib_esm.Ay.registry.getRegistry(),store:{getState:()=>state}},ownProps.actionId):{}},mergeProps:function mergeProps(stateProps,dispatchProps,ownProps){const props={...ownProps,...stateProps,...dispatchProps};return delete props.actionId,props},omitCMFProps:!0,withComponentRegistry:!0,withDispatch:!0,withDispatchActionCreator:!0,withComponentId:!0})(components_lib_esm.Action)},"./src/FilterBar/FilterBar.container.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,Ke:()=>DEFAULT_STATE,hi:()=>DISPLAY_NAME,zk:()=>QUERY_ATTR});var _talend_react_cmf__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../cmf/lib-esm/index.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__),immutable__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/immutable/dist/immutable.js"),immutable__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_2__),_talend_react_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../components/lib-esm/index.js"),lodash__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/lodash/lodash.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const QUERY_ATTR="query",DEFAULT_STATE=new(immutable__WEBPACK_IMPORTED_MODULE_2___default().Map)({[QUERY_ATTR]:"",docked:!0}),DISPLAY_NAME="Container(FilterBar)";class FilterBar extends react__WEBPACK_IMPORTED_MODULE_1__.Component{constructor(props){super(props),this.onFilter=this.onFilter.bind(this),this.onToggle=this.onToggle.bind(this)}onFilter(event,value){this.props.setState({query:value}),this.props.onFilter&&this.props.onFilter(event,{query:value,props:this.props})}onToggle(event){this.props.setState(prevState=>{let state=prevState.state;return this.props.dockable&&(state=state.set("docked",!this.props.state.get("docked"))),state}),this.props.onToggle&&this.props.onToggle(event)}render(){const state=this.props.state||DEFAULT_STATE,props={...(0,lodash__WEBPACK_IMPORTED_MODULE_4__.omit)(this.props,_talend_react_cmf__WEBPACK_IMPORTED_MODULE_0__.TJ.INJECTED_PROPS),docked:null!=this.props.docked?this.props.docked:state.get("docked"),value:this.props.value?this.props.value:state.get(QUERY_ATTR,""),onToggle:this.onToggle,onFilter:this.onFilter};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_talend_react_components__WEBPACK_IMPORTED_MODULE_3__.FilterBar,{...props})}}FilterBar.displayName="FilterBar",_defineProperty(FilterBar,"displayName",DISPLAY_NAME),_defineProperty(FilterBar,"propTypes",{..._talend_react_cmf__WEBPACK_IMPORTED_MODULE_0__.TJ.propTypes,id:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string,placeholder:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string,filterInputValue:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string,dockable:prop_types__WEBPACK_IMPORTED_MODULE_6___default().bool}),_defineProperty(FilterBar,"defaultProps",{dockable:!0});const __WEBPACK_DEFAULT_EXPORT__=FilterBar},"./src/FilterBar/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>FilterBar});var FilterBar_selectors_namespaceObject={};__webpack_require__.r(FilterBar_selectors_namespaceObject),__webpack_require__.d(FilterBar_selectors_namespaceObject,{getComponentState:()=>getComponentState,getQuery:()=>getQuery});var lib_esm=__webpack_require__("../cmf/lib-esm/index.js"),FilterBar_container=__webpack_require__("./src/FilterBar/FilterBar.container.js");const FilterBar_connect=(0,lib_esm.TJ)({componentId:ownProps=>ownProps.id,defaultState:FilterBar_container.Ke,omitCMFProps:!0,withComponentRegistry:!0,withDispatch:!0,withDispatchActionCreator:!0,withComponentId:!0})(FilterBar_container.Ay);function getComponentState(state,idComponent){return state.cmf.components.hasIn([FilterBar_container.hi,idComponent])?state.cmf.components.getIn([FilterBar_container.hi,idComponent]):FilterBar_container.Ke}function getQuery(state,idComponent){return getComponentState(state,idComponent).get("query","")}FilterBar_connect.selectors=FilterBar_selectors_namespaceObject;const FilterBar=FilterBar_connect},"./src/SelectObject/SelectObject.module.scss":(module,__unused_webpack_exports,__webpack_require__)=>{var API=__webpack_require__("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),domAPI=__webpack_require__("../../node_modules/style-loader/dist/runtime/styleDomAPI.js"),insertFn=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertBySelector.js"),setAttributes=__webpack_require__("../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),insertStyleElement=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertStyleElement.js"),styleTagTransformFn=__webpack_require__("../../node_modules/style-loader/dist/runtime/styleTagTransform.js"),content=__webpack_require__("../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[16].use[1]!../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[16].use[2]!../../node_modules/resolve-url-loader/index.js??ruleSet[1].rules[16].use[3]!../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[16].use[4]!./src/SelectObject/SelectObject.module.scss");content=content.__esModule?content.default:content;var options={};options.styleTagTransform=styleTagTransformFn,options.setAttributes=setAttributes,options.insert=insertFn.bind(null,"head"),options.domAPI=domAPI,options.insertStyleElement=insertStyleElement;API(content,options);module.exports=content&&content.locals||{}},"./src/SelectObject/SelectObject.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,WithFilterModeSetToALL:()=>WithFilterModeSetToALL,WithPreview:()=>WithPreview,__namedExportsOrder:()=>__namedExportsOrder,default:()=>SelectObject_stories});var lib_esm=__webpack_require__("../cmf/lib-esm/index.js"),react=__webpack_require__("../../node_modules/react/index.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),immutable=__webpack_require__("../../node_modules/immutable/dist/immutable.js"),immutable_default=__webpack_require__.n(immutable),ImmutablePropTypes=__webpack_require__("../../node_modules/react-immutable-proptypes/dist/ImmutablePropTypes.js"),ImmutablePropTypes_default=__webpack_require__.n(ImmutablePropTypes),classnames=__webpack_require__("../../node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),Action=__webpack_require__("./src/Action/index.js"),FilterBar=__webpack_require__("./src/FilterBar/index.js"),List=__webpack_require__("./src/List/index.js"),TreeView=__webpack_require__("./src/TreeView/index.js"),SelectObject_module=__webpack_require__("./src/SelectObject/SelectObject.module.scss"),SelectObject_module_default=__webpack_require__.n(SelectObject_module),components_lib_esm=__webpack_require__("../components/lib-esm/index.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function SelectObject({filteredData,idAttr,nameAttr,results,sourceData,tree,filter={},...props}){let schema;return props.schema&&props.selected&&(schema={properties:props.selected,...props.schema}),(0,jsx_runtime.jsxs)("div",{className:`tc-select-object ${SelectObject_module_default().wrapper}`,children:[(0,jsx_runtime.jsx)(FilterBar.A,{...filter,className:classnames_default()(filter.className,SelectObject_module_default().filter),id:props.id,dockable:!1,navbar:!1}),(0,jsx_runtime.jsxs)("div",{className:SelectObject_module_default().container,children:[!tree&&!filteredData&&(0,jsx_runtime.jsx)(List.A,{...props.list,id:`${props.id}-list`,data:sourceData,className:SelectObject_module_default().list}),tree&&!filteredData&&(0,jsx_runtime.jsx)(TreeView.A,{...tree,componentId:props.id,noHeader:!0,data:sourceData,className:SelectObject_module_default().tree}),filteredData&&(0,jsx_runtime.jsx)("div",{className:SelectObject_module_default().results,children:filteredData.map(data=>(0,jsx_runtime.jsxs)(Action.A,{className:classnames_default()({active:results.selectedId===data.get(idAttr)}),onClick:event=>results.onClick(event,data),children:[(0,jsx_runtime.jsx)("h3",{children:data.get(nameAttr)}),(0,jsx_runtime.jsx)("span",{children:data.get("currentPosition")})]},data.get(idAttr)))}),schema&&(0,jsx_runtime.jsx)(components_lib_esm.JSONSchemaRenderer,{schema,className:SelectObject_module_default().preview})]})]})}SelectObject.displayName="SelectObject",SelectObject.displayName="SelectObject",SelectObject.propTypes={id:prop_types_default().string,idAttr:prop_types_default().string,nameAttr:prop_types_default().string,tree:prop_types_default().object,list:prop_types_default().object,filter:prop_types_default().object,schema:prop_types_default().object,filteredData:ImmutablePropTypes_default().List,results:prop_types_default().shape({selectedId:prop_types_default().string,onClick:prop_types_default().func}),sourceData:ImmutablePropTypes_default().List,selected:prop_types_default().object},SelectObject.defaultProps={idAttr:"id"};const SelectObject_component=SelectObject;var _SelectObject,lodash=__webpack_require__("../../node_modules/lodash/lodash.js");function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const DEFAULT_STATE=new(immutable_default().Map)({});function noop(){}function getById(items,id,{idAttr="id"}={}){let found;return items.forEach(item=>{item.get(idAttr)===id?found=item.toJS():!found&&item.get("children",new immutable.List).size>0&&(found=getById(item.get("children"),id,{idAttr}))}),found}function filter(items=new immutable.List,query="",{nameAttr="name",onMatch=noop}={},currentPosition="root"){return query?items.reduce((accumulator,item)=>{if(function isLeafElement(item){return 0===item.get("children",new immutable.List).size}(item))return function matchOnLeaf(item,currentPosition,query,nameAttr,onMatch,accumulator){if(item.get(nameAttr,"").toLowerCase().includes(query.toLowerCase())){const withElementPosition=item.set("currentPosition",currentPosition);return onMatch(item),accumulator.push(withElementPosition)}return accumulator}(item,currentPosition,query,nameAttr,onMatch,accumulator);const currentElementName=item.get(nameAttr,""),result=filter(item.get("children"),query,{nameAttr},`${currentPosition} > ${currentElementName}`);return accumulator.concat(result)},new immutable.List):items}function filterAll(items=new immutable.List,query="",{nameAttr="name",onMatch=noop}={},currentPosition="root"){const result=new immutable.List;return query?items.reduce((acc,item)=>{const name=item.get(nameAttr,""),children=item.get("children",null);let results=acc;return name.toLowerCase().includes(query.toLowerCase())&&(onMatch(item),results=acc.push(item.set("currentPosition",currentPosition))),children&&(results=results.concat(filterAll(children,query,{nameAttr},`${currentPosition} > ${name}`))),results},result):result}class SelectObject_container_SelectObject extends react.Component{constructor(props){super(props),this.state={},this.filter=filter,this.filterAll=filterAll,this.getById=getById,this.onTreeClick=this.onTreeClick.bind(this),this.onResultsClick=this.onResultsClick.bind(this)}onTreeClick(data){this.props.setState({selectedId:data[this.props.idAttr]})}onResultsClick(event,item){this.props.setState({selectedId:item.get(this.props.idAttr)})}render(){const state=this.props.state||DEFAULT_STATE,props=(0,lodash.omit)(this.props,lib_esm.TJ.INJECTED_PROPS),filterMethod=this.props.filterMode===SelectObject_container_SelectObject.FILTER_MODE.ALL?this.filterAll:this.filter,matches=[];let selectedId=state.get("selectedId")||props.selectedId;return props.query&&(props.filteredData=filterMethod(props.sourceData,props.query,{...props,onMatch:function addMatch(item){matches.push(item)}},props.breadCrumbsRootLabel),delete props.tree,selectedId||1!==matches.length||(selectedId=matches[0].get("id")),props.results={onClick:this.onResultsClick,idAttr:this.props.idAttr,nameAttr:this.props.nameAttr,selectedId}),selectedId&&(props.selected=this.getById(props.sourceData,selectedId,props)),props.tree&&(props.tree.selectedId=selectedId,props.tree.onSelect=this.onTreeClick),(0,jsx_runtime.jsx)(SelectObject_component,{...props})}}SelectObject_container_SelectObject.displayName="SelectObject",_SelectObject=SelectObject_container_SelectObject,_defineProperty(SelectObject_container_SelectObject,"displayName","Container(SelectObject)"),_defineProperty(SelectObject_container_SelectObject,"FILTER_MODE",{ALL:"ALL",LEAF:"LEAF"}),_defineProperty(SelectObject_container_SelectObject,"propTypes",{...lib_esm.TJ.propTypes,selectedId:prop_types_default().string,tree:prop_types_default().object,idAttr:prop_types_default().string,nameAttr:prop_types_default().string,breadCrumbsRootLabel:prop_types_default().string,filterMode:prop_types_default().oneOf([_SelectObject.FILTER_MODE.ALL,_SelectObject.FILTER_MODE.LEAF])}),_defineProperty(SelectObject_container_SelectObject,"defaultProps",{sourceData:new(immutable_default().List),idAttr:"id",nameAttr:"name",breadCrumbsRootLabel:"root"});const SelectObject_container=SelectObject_container_SelectObject;var FilterBar_container=__webpack_require__("./src/FilterBar/FilterBar.container.js"),TreeView_container=__webpack_require__("./src/TreeView/TreeView.container.js");const SelectObject_connect=(0,lib_esm.TJ)({mapStateToProps:function mapStateToProps(state,ownProps){const props={};ownProps.source&&(props.sourceData=state.cmf.collections.getIn(ownProps.source.split("."))),ownProps.nameAttr&&ownProps.tree&&(props.tree={nameAttr:ownProps.nameAttr,...ownProps.tree});const filterState=state.cmf.components.getIn([FilterBar_container.hi,ownProps.id]);props.query=filterState?filterState.get(FilterBar_container.zk,""):"";const treeState=state.cmf.components.getIn([TreeView_container.hi,ownProps.id]);return treeState&&(props.selectedId=treeState.get("selectedId")),props},defaultState:DEFAULT_STATE,omitCMFProps:!0,withComponentRegistry:!0,withDispatch:!0,withDispatchActionCreator:!0,withComponentId:!0})(SelectObject_container),src_SelectObject=SelectObject_connect;const props={id:"example",source:"with.data",nameAttr:"label",tree:{}},schema={jsonSchema:{title:"Demo",type:"object",properties:{label:{type:"string",title:"Label"},id:{type:"integer",title:"ID"},author:{type:"string",title:"Author"},created:{type:"string",title:"Created"}}},uiSchema:{"ui:order":["label","id","author","created"]}},SelectObject_stories={parameters:{storySource:{source:"import SelectObject from '.';\n\nconst props = {\n\tid: 'example',\n\tsource: 'with.data',\n\tnameAttr: 'label',\n\ttree: {},\n};\n\nconst schema = {\n\tjsonSchema: {\n\t\ttitle: 'Demo',\n\t\ttype: 'object',\n\t\tproperties: {\n\t\t\tlabel: {\n\t\t\t\ttype: 'string',\n\t\t\t\ttitle: 'Label',\n\t\t\t},\n\t\t\tid: {\n\t\t\t\ttype: 'integer',\n\t\t\t\ttitle: 'ID',\n\t\t\t},\n\t\t\tauthor: {\n\t\t\t\ttype: 'string',\n\t\t\t\ttitle: 'Author',\n\t\t\t},\n\t\t\tcreated: {\n\t\t\t\ttype: 'string',\n\t\t\t\ttitle: 'Created',\n\t\t\t},\n\t\t},\n\t},\n\tuiSchema: {\n\t\t'ui:order': ['label', 'id', 'author', 'created'],\n\t},\n};\n\nexport default {\n\ttitle: 'SelectObject',\n};\n\nexport const Default = () => <SelectObject {...props} />;\nexport const WithPreview = () => <SelectObject {...props} schema={schema} />;\nexport const WithFilterModeSetToALL = () => (\n\t<SelectObject {...props} filterMode={SelectObject.FILTER_MODE.ALL} />\n);\n",locationsMap:{default:{startLoc:{col:23,line:42},endLoc:{col:56,line:42},startBody:{col:23,line:42},endBody:{col:56,line:42}},"with-preview":{startLoc:{col:27,line:43},endLoc:{col:76,line:43},startBody:{col:27,line:43},endBody:{col:76,line:43}},"with-filter-mode-set-to-all":{startLoc:{col:38,line:44},endLoc:{col:1,line:46},startBody:{col:38,line:44},endBody:{col:1,line:46}}}}},title:"SelectObject"},Default=()=>(0,jsx_runtime.jsx)(src_SelectObject,{...props});Default.displayName="Default";const WithPreview=()=>(0,jsx_runtime.jsx)(src_SelectObject,{...props,schema});WithPreview.displayName="WithPreview";const WithFilterModeSetToALL=()=>(0,jsx_runtime.jsx)(src_SelectObject,{...props,filterMode:src_SelectObject.FILTER_MODE.ALL});WithFilterModeSetToALL.displayName="WithFilterModeSetToALL",Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"() => <SelectObject {...props} />",...Default.parameters?.docs?.source}}},WithPreview.parameters={...WithPreview.parameters,docs:{...WithPreview.parameters?.docs,source:{originalSource:"() => <SelectObject {...props} schema={schema} />",...WithPreview.parameters?.docs?.source}}},WithFilterModeSetToALL.parameters={...WithFilterModeSetToALL.parameters,docs:{...WithFilterModeSetToALL.parameters?.docs,source:{originalSource:"() => <SelectObject {...props} filterMode={SelectObject.FILTER_MODE.ALL} />",...WithFilterModeSetToALL.parameters?.docs?.source}}};const __namedExportsOrder=["Default","WithPreview","WithFilterModeSetToALL"]},"./src/TreeView/TreeView.container.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,hi:()=>DISPLAY_NAME});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_7__),_talend_react_cmf__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../cmf/lib-esm/index.js"),react_immutable_proptypes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/react-immutable-proptypes/dist/ImmutablePropTypes.js"),react_immutable_proptypes__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react_immutable_proptypes__WEBPACK_IMPORTED_MODULE_2__),immutable__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/immutable/dist/immutable.js"),immutable__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(immutable__WEBPACK_IMPORTED_MODULE_3__),lodash__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/lodash/lodash.js"),_talend_react_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../components/lib-esm/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const OPENED_ATTR="opened",SELECTED_ATTR="selectedId",DISPLAY_NAME="Container(TreeView)",DEFAULT_STATE=new(immutable__WEBPACK_IMPORTED_MODULE_3___default().Map)({[OPENED_ATTR]:new(immutable__WEBPACK_IMPORTED_MODULE_3___default().List),[SELECTED_ATTR]:void 0});function itemHasChildId(data,idAttr,idToMatch){return!(!data.children||!data.children.length)&&data.children.some(child=>child[idAttr]===idToMatch||itemHasChildId(child,idAttr,idToMatch))}function toggleState(prevProps,data,idAttr){const id=data[idAttr],opened=prevProps.state.get("opened"),index=opened.indexOf(id);if(-1!==index){let nextState=prevProps.state.set("opened",opened.delete(index));const selectedId=nextState.get("selectedId");return void 0!==selectedId&&itemHasChildId(data,idAttr,selectedId)&&(nextState=nextState.set("selectedId",void 0)),nextState}return prevProps.state.set("opened",prevProps.state.get("opened").push(id))}function transform(items,props,parent){if(!items)return;const state=props.state||DEFAULT_STATE,selectedId=state.get("selectedId"),opened=state.get("opened");return items.map(item=>{const elem={...item,id:item[props.idAttr],isOpened:item.isOpened||opened.includes(item[props.idAttr]),name:item[props.nameAttr],parent};if(elem.children=transform(item[props.childrenAttr],props,elem),item[props.idAttr]===selectedId)for(let current=elem;current.parent;current=current.parent)current.parent.isOpened=!0;return elem})}class TreeView extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.onSelect=this.onSelect.bind(this),this.onToggle=this.onToggle.bind(this),this.onToggleAllSiblings=this.onToggleAllSiblings.bind(this),props.onClick}onSelect(event,data){this.props.setState(prevState=>function selectWrapper(prevProps,id){return id===prevProps.state.get("selectedId")?prevProps.state.set("selectedId",void 0):prevProps.state.set("selectedId",id)}(prevState,data[this.props.idAttr])),this.props.onSelectActionCreator&&this.props.dispatchActionCreator(this.props.onSelectActionCreator,{type:"select",source:"TreeView",props:this.props},data),this.props.onSelect&&this.props.onSelect(data)}onToggle(event,data){this.props.setState(prevState=>toggleState(prevState,data,this.props.idAttr)),this.props.onClickActionCreator&&this.props.dispatchActionCreator(this.props.onClickActionCreator,{type:"toggle",source:"TreeView",props:this.props},data),this.props.onToggle&&this.props.onToggle(data),this.props.onClick&&this.props.onClick(data)}onToggleAllSiblings(event,data){this.props.setState(prevState=>function openAllState(prevProps,data,idAttr){const nextOpened=data.reduce((accu,item)=>accu.add(item[idAttr]),prevProps.state.get("opened").toSet()).toList();return prevProps.state.set("opened",nextOpened)}(prevState,data,this.props.idAttr))}getSelectedId(){const selectedId=this.props.selectedId;if(void 0!==selectedId)return selectedId;return(this.props.state||DEFAULT_STATE).get("selectedId")}render(){if(!this.props.data)return null;const structure=transform(this.props.data.toJS(),this.props),props=(0,lodash__WEBPACK_IMPORTED_MODULE_4__.omit)(this.props,_talend_react_cmf__WEBPACK_IMPORTED_MODULE_1__.TJ.INJECTED_PROPS);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_talend_react_components__WEBPACK_IMPORTED_MODULE_5__.TreeView,{...props,structure,onSelect:this.onSelect,onToggle:this.onToggle,onToggleAllSiblings:this.onToggleAllSiblings,selectedId:this.getSelectedId()})}}TreeView.displayName="TreeView",_defineProperty(TreeView,"displayName",DISPLAY_NAME),_defineProperty(TreeView,"propTypes",{childrenAttr:prop_types__WEBPACK_IMPORTED_MODULE_7___default().string,data:react_immutable_proptypes__WEBPACK_IMPORTED_MODULE_2___default().list,idAttr:prop_types__WEBPACK_IMPORTED_MODULE_7___default().string,nameAttr:prop_types__WEBPACK_IMPORTED_MODULE_7___default().string,onClick:prop_types__WEBPACK_IMPORTED_MODULE_7___default().func,onToggle:prop_types__WEBPACK_IMPORTED_MODULE_7___default().func,onSelect:prop_types__WEBPACK_IMPORTED_MODULE_7___default().func,onClickActionCreator:prop_types__WEBPACK_IMPORTED_MODULE_7___default().string,onSelectActionCreator:prop_types__WEBPACK_IMPORTED_MODULE_7___default().string,..._talend_react_cmf__WEBPACK_IMPORTED_MODULE_1__.TJ.propTypes}),_defineProperty(TreeView,"defaultProps",{idAttr:"id",nameAttr:"name",childrenAttr:"children"});const __WEBPACK_DEFAULT_EXPORT__=(0,_talend_react_cmf__WEBPACK_IMPORTED_MODULE_1__.TJ)({defaultState:DEFAULT_STATE,mapStateToProps:function mapStateToProps(state,ownProps){const props={};return ownProps.collection&&(props.data=state.cmf.collections.getIn(ownProps.collection.split(".")),props.data||console.warn("TreeView.collection not found")),props},omitCMFProps:!0,withComponentRegistry:!0,withDispatch:!0,withDispatchActionCreator:!0,withComponentId:!0})(TreeView)},"./src/TreeView/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=__webpack_require__("./src/TreeView/TreeView.container.js").Ay}}]);