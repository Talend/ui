import{r as y,P as e,j as i,c as n,a5 as w}from"./iframe-B9f9Cci2.js";import{S as x}from"./Skeleton.component-DBDuO3by.js";import{A as h}from"./Action.component-DYwIluar.js";import"./Actions.component-BJlHQphr.js";import"./ActionButton.component-CpxFTm-n.js";import"./ActionIconToggle.component-BV58letW.js";import"./ActionSplitDropdown.component-Bh7iT6YB.js";import{F as j}from"./FocusManager.component-BWjrBvoN.js";import{a as f}from"./translate-BHqtADpL.js";import{T as N}from"./TooltipTrigger.component-BedDpRF3.js";import{I as E}from"./constants-CZYEPhht.js";import{w as v}from"./withTranslation-eX0Mn235.js";const c={"tc-editable-text-form":"_tc-editable-text-form_1wku2_20","tc-editable-text-form-input":"_tc-editable-text-form-input_1wku2_32","tc-editable-text-form-buttons":"_tc-editable-text-form-buttons_1wku2_39","tc-editable-text-form-buttons-icon":"_tc-editable-text-form-buttons-icon_1wku2_48","tc-editable-text-form-buttons-submit":"_tc-editable-text-form-buttons-submit_1wku2_67","tc-editable-text-form-buttons-cancel":"_tc-editable-text-form-buttons-cancel_1wku2_85"};class I extends y.Component{static propTypes={text:e.string.isRequired,placeholder:e.string,errorMessage:e.string,feature:e.string,onSubmit:e.func.isRequired,onCancel:e.func,onChange:e.func,t:e.func,required:e.bool};static defaultProps={t:f(),required:!0};constructor(t){super(t),this.onChange=this.onChange.bind(this),this.onCancel=this.onCancel.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onSubmit=this.onSubmit.bind(this),this.selectInput=this.selectInput.bind(this),this.state={value:t.text}}onChange(t){this.props.onChange&&this.props.onChange(t),this.setState({value:t.target.value})}onCancel(t){this.props.onCancel&&this.props.onCancel(t),this.setState({value:""})}onKeyDown(t){switch(t.key){case"Esc":case"Escape":this.onCancel(t);break}}onSubmit(t){t.preventDefault(),(this.state.value.trim().length!==0||!this.props.required)&&this.props.onSubmit(t,{value:this.state.value,props:this.props})}selectInput(t){this.inputText=t,this.inputText&&(this.inputText.select(),this.inputText.focus())}render(){const{feature:t,t:s,placeholder:o,required:l,errorMessage:a}=this.props,u=l&&this.state.value.trim().length===0,m=u||!!a;return i.jsx(j,{onFocusOut:this.onSubmit,children:i.jsxs("form",{onSubmit:this.onSubmit,className:n(c["tc-editable-text-form"],"tc-editable-text-form"),children:[i.jsxs("div",{className:n("form-group",{"has-error":m}),children:[i.jsx("input",{ref:this.selectInput,id:"inputTitle",type:"text",placeholder:o,className:n(c["tc-editable-text-form-input"],"tc-editable-text-form-input","form-control"),onChange:this.onChange,value:this.state.value,onKeyDown:this.onKeyDown}),a&&i.jsx("p",{className:"help-block text-danger",children:a})]}),i.jsxs("div",{className:n(c["tc-editable-text-form-buttons"],"tc-editable-text-form-buttons"),children:[i.jsx(h,{name:"action-cancel-title",label:s("CANCEL_TOOLTIP",{defaultValue:"Cancel"}),icon:"talend-cross",onClick:this.onCancel,bsStyle:"link",className:n(c["tc-editable-text-form-buttons-icon"],"tc-editable-text-form-buttons-icon",c["tc-editable-text-form-buttons-cancel"],"tc-editable-text-form-buttons-cancel"),hideLabel:!0,"data-feature":t&&`${t}.cancel`}),i.jsx(h,{type:"submit",name:"action-submit-title",label:s("SUBMIT_TOOLTIP",{defaultValue:"Submit"}),icon:"talend-check",bsStyle:"link",className:n(c["tc-editable-text-form-buttons-icon"],"tc-editable-text-form-buttons-icon",c["tc-editable-text-form-buttons-submit"],"tc-editable-text-form-buttons-submit"),disabled:u,hideLabel:!0,"data-feature":t&&`${t}.submit`,...w(this.props)})]})]})})}}const d={"tc-editable-text-title":"_tc-editable-text-title_11uvh_2","tc-editable-text-wording":"_tc-editable-text-wording_11uvh_7","tc-editable-text-pencil":"_tc-editable-text-pencil_11uvh_17"};function O({id:r,componentClass:t="span",onEdit:s,disabled:o,text:l,inProgress:a,feature:u,t:m=f(),..._}){const C=o||a,S=t,k=Object.keys(_).reduce((g,p)=>(p.startsWith("data-")&&(g[p]=_[p]),g),{});return i.jsxs("div",{className:d["tc-editable-text-title"],children:[i.jsx(N,{label:l,tooltipPlacement:"bottom",className:"tc-editable-text-wording-wrapper",children:i.jsx(S,{id:r,className:n(d["tc-editable-text-wording"],"tc-editable-text-wording"),onDoubleClick:C?void 0:s,children:l})}),i.jsx(h,{name:"action-edit",label:m("MODIFY_TOOLTIP",{defaultValue:"Rename"}),icon:"talend-pencil",onClick:s,bsStyle:"link",className:n(d["tc-editable-text-pencil"],"tc-editable-text-pencil",{[d["tc-editable-text-empty-pencil"]]:!l}),disabled:o||a,hideLabel:!0,"data-feature":u,...k})]})}const T={"tc-editable-text-blink":"_tc-editable-text-blink_1ug5x_20","tc-editable-text":"_tc-editable-text_1ug5x_20"};function b({editMode:r,loading:t,inProgress:s,...o}){if(t)return i.jsx(x,{type:x.TYPES.text,size:x.SIZES.large});const l=r?I:O,a={};return s&&(a["aria-label"]=o.t("EDITABLE_TEXT_IN_PROGRESS",{defaultValue:"Edit in progress"}),a["aria-busy"]=!0),i.jsx("div",{className:n(T["tc-editable-text"],"tc-editable-text",{[T["tc-editable-text-blink"]]:s,"tc-editable-text-blink":s}),...a,children:i.jsx(l,{inProgress:s,...o})})}b.displayName="EditableText";b.propTypes={componentClass:e.oneOfType([e.string,e.func]),disabled:e.bool,editMode:e.bool,inProgress:e.bool,loading:e.bool,onEdit:e.func.isRequired,text:e.string.isRequired,t:e.func};b.defaultProps={editMode:!1,inProgress:!1,loading:!1,t:f()};const W=v(E)(b);export{W as E};
