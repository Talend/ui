import{r as x,j as o,c as m,P as t}from"./iframe-B9f9Cci2.js";import{r as j}from"./index-BBYpr35m.js";import{A as g}from"./Action.component-DYwIluar.js";import"./Actions.component-BJlHQphr.js";import"./ActionButton.component-CpxFTm-n.js";import"./ActionIconToggle.component-BV58letW.js";import"./ActionSplitDropdown.component-Bh7iT6YB.js";import{I}from"./constants-CZYEPhht.js";import{a as A}from"./translate-BHqtADpL.js";import{w as M}from"./withTranslation-eX0Mn235.js";import"./preload-helper-PPVm8Dsz.js";import"./removeClass-B-DUduzN.js";import"./interopRequireDefault-CBIuXflU.js";import"./Transition-KhAiUgQr.js";import"./TooltipTrigger.component-BedDpRF3.js";import"./index-DNafQg6z.js";import"./CircularProgress.component-D-tT-C9h.js";import"./OverlayTrigger.component-BNrpNvk8.js";import"./RootCloseWrapper-DHj10w1C.js";import"./Popover-DixPJ5_v.js";import"./Transition-h3Fmi7r0.js";import"./index-DRAAYgIz.js";import"./get-C_0C-DjM.js";import"./_baseGet-T0Q5TGKe.js";import"./toString-ClRFiu0U.js";import"./isSymbol-W7excr-L.js";import"./eq-DkkWHXuO.js";import"./omit-BvgacqV1.js";import"./_setToString-J6FyJefy.js";import"./_getTag-vZcvUCeY.js";import"./isArrayLike-DiQq1izh.js";import"./DropdownButton-B-VNf-5_.js";import"./SplitButton-U2WmwpRw.js";import"./inheritsLoose-fv5wmOmv.js";import"./Skeleton.component-DBDuO3by.js";import"./theme-B7lIOIL0.js";const r={"tc-notification":"_tc-notification_8w77i_2","tc-notification-container":"_tc-notification-container_8w77i_14","tc-notification-timer-bar":"_tc-notification-timer-bar_8w77i_25","tc-notification-info":"_tc-notification-info_8w77i_29","tc-notification-message":"_tc-notification-message_8w77i_30","tc-notification-title":"_tc-notification-title_8w77i_31","tc-notification-warning":"_tc-notification-warning_8w77i_35","tc-notification-error":"_tc-notification-error_8w77i_41","tc-notification-close":"_tc-notification-close_8w77i_53","tc-notification-action":"_tc-notification-action_8w77i_61","tc-notification-message-action":"_tc-notification-message-action_8w77i_74"},f={INFO:"info",WARNING:"warning",ERROR:"error"};function _(i){return o.jsx(g,{onClick:()=>i.leaveFn(i.notification),"data-feature":i["data-feature"],label:"",icon:"talend-cross",bsClass:m(r["tc-notification-action"],"tc-notification-action",r["tc-notification-close"],".tc-notification-close"),"aria-label":i.t("NOTIFICATION_CLOSE",{defaultValue:"Close notifications"})})}_.propTypes={notification:t.object,leaveFn:t.func,t:t.func,"data-feature":t.string};_.defaultProps={t:A()};const O=M(I)(_);function C({action:i}){return!!i&&o.jsx(g,{...i,bsClass:m(r["tc-notification-action"],"tc-notification-action",r["tc-notification-message-action"],"tc-notification-message-action")})}function S({notification:i}){const{title:e,message:s,action:u}=i,l=Array.isArray(s)?s:[s],p=m(r["tc-notification-title"],"tc-notification-title"),b=m(r["tc-notification-message"],"tc-notification-message");return o.jsxs("article",{className:r.article,children:[e&&o.jsx("h3",{className:p,children:e}),l.map((n,y)=>o.jsxs("p",{className:b,children:[n,y===l.length-1&&o.jsx(C,{action:u})]},y))]})}function w({type:i,autoLeaveError:e}){return i===f.ERROR&&!e?null:o.jsx("div",{className:m(r["tc-notification-timer-bar"],"tc-notification-timer-bar"),"data-testid":"timer"})}function N({notification:i,leaveFn:e,...s}){const u=!i.type||i.type===f.INFO,l=i.type===f.WARNING,p=i.type===f.ERROR,b=m(r["tc-notification"],"tc-notification",{[r["tc-notification-info"]]:u,"tc-notification-info":u,[r["tc-notification-warning"]]:l,"tc-notification-warning":l,[r["tc-notification-error"]]:p,"tc-notification-error":p}),n=h=>s.onMouseEnter(h,i),y=h=>s.onMouseOut(h,i);return o.jsxs("div",{role:p?"alert":"status",className:b,onClick:h=>s.onClick(h,i),onFocus:n,onMouseEnter:n,onMouseLeave:y,tabIndex:0,children:[o.jsx(O,{notification:i,leaveFn:e,"data-feature":`close-notification-${i.type}`}),o.jsx(S,{notification:i}),o.jsx(w,{type:i.type,autoLeaveError:s.autoLeaveError})]})}class F{constructor(e,s){this.timerId=null,this.start=null,this.callbackFn=e,this.remaining=s,this.resume()}pause(){clearTimeout(this.timerId),this.remaining-=Date.now()-this.start}resume(){this.start=Date.now(),clearTimeout(this.timerId),this.timerId=setTimeout(this.callbackFn,this.remaining)}cancel(){clearTimeout(this.timerId)}}class q{constructor(){this.timerRegistry={}}isRegistered(e){return!!this.timerRegistry[e.id]}register(e,s){this.timerRegistry[e.id]=s}pause(e){this.isRegistered(e)&&this.timerRegistry[e.id].pause()}resume(e){this.isRegistered(e)&&this.timerRegistry[e.id].resume()}cancel(e){this.isRegistered(e)&&(this.timerRegistry[e.id].cancel(),delete this.timerRegistry[e.id])}}function T({autoLeaveError:i,autoLeaveTimeout:e,enterTimeout:s,leaveFn:u,leaveTimeout:l,notifications:p}){const n=x.useRef(new q).current;x.useEffect(()=>{n&&p.filter(a=>!n.isRegistered(a)).filter(a=>a.type!==f.ERROR||i).forEach(a=>{n.register(a,new F(()=>{u(a),n.cancel(a)},e))})},[i,e,u,p,n]);const y=(a,c)=>{(c.type!==f.ERROR||i)&&(a.currentTarget.getAttribute("pin")!=="true"?a.currentTarget.setAttribute("pin","true"):(a.currentTarget.setAttribute("pin","false"),u(c)))},h=(a,c)=>{a.stopPropagation(),n.cancel(c),u(c)},E=(a,c)=>{(c.type!==f.ERROR||i)&&n.pause(c)},v=(a,c)=>{(c.type!==f.ERROR||i)&&a.currentTarget.getAttribute("pin")!=="true"&&n.resume(c)};return o.jsx("div",{className:m(r["tc-notification-container"],"tc-notification-container"),children:o.jsx(j.TransitionGroup,{children:p.map(a=>o.jsx(j.CSSTransition,{classNames:"tc-notification",timeout:{enter:s,exit:l},children:o.jsx(N,{notification:a,leaveFn:u,autoLeaveTimeout:e,autoLeaveError:i,onMouseEnter:E,onMouseOut:v,onClose:h,onClick:y})},a.id))})})}const R={id:t.any.isRequired,type:t.oneOf(Object.values(f)),title:t.string,message:t.oneOfType([t.string,t.arrayOf(t.string)]).isRequired,action:t.shape(g.propTypes)};O.propTypes={notification:t.shape(R).isRequired,leaveFn:t.func.isRequired};C.propTypes={action:t.shape(g.propTypes)};S.propTypes={notification:t.shape(R).isRequired};w.propTypes={type:t.oneOf(Object.values(f)),autoLeaveError:t.bool};N.displayName="Notification";N.propTypes={notification:t.shape(R).isRequired,leaveFn:t.func.isRequired,autoLeaveTimeout:t.number,autoLeaveError:t.bool,onMouseEnter:t.func,onMouseOut:t.func,onClick:t.func};T.displayName="NotificationsContainer";T.propTypes={enterTimeout:t.number,leaveTimeout:t.number,autoLeaveTimeout:t.number,notifications:t.arrayOf(t.shape(R)).isRequired,leaveFn:t.func.isRequired,autoLeaveError:t.bool};T.defaultProps={enterTimeout:300,leaveTimeout:300,autoLeaveTimeout:4e3,autoLeaveError:!1};T.TYPES=f;const{action:d}=__STORYBOOK_MODULE_ACTIONS__;class D extends x.Component{constructor(){super(),this.notifications=[],this.state={counter:1},setTimeout(()=>{this.notifications=this.notifications.concat([{id:"story-1",type:"info",title:"Story 1 example title",message:"This is a feedback of your operationlongnameverylongnamethatwhillbreakwork1, This is a feedback of your operation1, This is a feedback of your operation1",action:{label:"Haha",icon:"talend-undo",onClick:d("click Haha")}}]),this.setState({counter:this.state.counter+1})},500),setTimeout(()=>{this.notifications=this.notifications.concat([{id:"story-232",type:"error",title:"Story 2 example title ",message:["This is a feedback of your operation2","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1"],action:{label:"undo",icon:"talend-undo",onClick:d("click undo")}}]),this.setState({counter:this.state.counter+1})},1e3),setTimeout(()=>{this.notifications=this.notifications.concat([{id:"story-234",type:"error",title:"Story 2 example title ",message:["This is a feedback of your operation2","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1"],action:{label:"undo",icon:"talend-undo",onClick:d("click undo")}}]),this.setState({counter:this.state.counter+1})},1e3),setTimeout(()=>{this.notifications=this.notifications.concat([{id:"story-2444",type:"error",title:"Story 2 example title ",message:["This is a feedback of your operation2","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1"],action:{label:"undo",icon:"talend-undo",onClick:d("click undo")}}]),this.setState({counter:this.state.counter+1})},1e3),setTimeout(()=>{this.notifications=this.notifications.concat([{id:"story-2333",type:"error",title:"Story 2 example title ",message:["This is a feedback of your operation2","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1"],action:{label:"undo",icon:"talend-undo",onClick:d("click undo")}}]),this.setState({counter:this.state.counter+1})},1e3),setTimeout(()=>{this.notifications=this.notifications.concat([{id:"story-2222",type:"error",title:"Story 2 example title ",message:["This is a feedback of your operation2","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1"],action:{label:"undo",icon:"talend-undo",onClick:d("click undo")}}]),this.setState({counter:this.state.counter+1})},1e3),setTimeout(()=>{this.notifications=this.notifications.concat([{id:"story-22",type:"error",title:"Story 2 example title ",message:["This is a feedback of your operation2","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1","This is a feedback of your operation1, This is a feedback of your operation1"],action:{label:"undo",icon:"talend-undo",onClick:d("click undo")}}]),this.setState({counter:this.state.counter+1})},1e3),setTimeout(()=>{this.notifications=this.notifications.concat([{id:"story-3",type:"warning",message:["This is a feedback of your operation3","details"]}]),this.setState({counter:this.state.counter+1})},2e3),setTimeout(()=>{this.notifications=this.notifications.concat([{id:"story-4",type:"warning",title:"Story 4 example title ",message:"This is a feedback of your operation4"}]),this.setState({counter:this.state.counter+1})},2500)}leaveFn(e){const s=this.notifications.indexOf(e);s!==-1&&(this.notifications.splice(s,1),this.setState({counter:this.state.counter-1}))}render(){return o.jsx(T,{leaveFn:e=>this.leaveFn(e),notifications:this.notifications})}}const gi={title:"Components/Messaging & Communication/Notification",parameters:{chromatic:{disableSnapshot:!0}}},k=()=>o.jsxs("nav",{children:[o.jsx("h1",{children:"Notification"}),o.jsx("h2",{children:"Definition"}),o.jsx("p",{children:"The Notification component display notification"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Type: info, error, warning"}),o.jsx("li",{children:"Slide in, auto slide out after timeout(except error)"}),o.jsx("li",{children:"Timerbar show remaining time before slide out"}),o.jsx("li",{children:"Hover or click to pin"})]}),o.jsx("h2",{children:"Examples"}),o.jsx(D,{})]});k.parameters={...k.parameters,docs:{...k.parameters?.docs,source:{originalSource:`() => <nav>
        <h1>Notification</h1>

        <h2>Definition</h2>
        <p>The Notification component display notification</p>
        <ul>
            <li>Type: info, error, warning</li>
            <li>Slide in, auto slide out after timeout(except error)</li>
            <li>Timerbar show remaining time before slide out</li>
            <li>Hover or click to pin</li>
        </ul>
        <h2>Examples</h2>
        <NotificationWrapper />
    </nav>`,...k.parameters?.docs?.source}}};const Ri=["Default"];export{k as Default,Ri as __namedExportsOrder,gi as default};
