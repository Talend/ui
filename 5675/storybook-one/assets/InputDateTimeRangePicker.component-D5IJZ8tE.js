import{r as s,j as n,P as e,c as C,X as k,S as I}from"./iframe-DIB3-0BR.js";import{d as O}from"./debounce-itczC5KJ.js";import{o as P}from"./omit-7Cusbh4T.js";import{a as F}from"./translate-Cb2TG_Ch.js";import{i as M}from"./isWithinInterval-CW13faj2.js";import{t as A}from"./locale-CYWHUjaY.js";import{g as b}from"./useInputPickerHandlers-IdBtDchr.js";import{I as w}from"./InputDateTimePicker.component-BjcnZvPO.js";function S(a,u){const o=A(a),c=A(u);return+o==+c}const j=s.createContext();function y(a,u){this.message=b(u),this.code=a}function v(a){const{onChange:u,startDateTime:o,endDateTime:c}=a,p={startDateTime:o,endDateTime:c},[d,f]=s.useState(p),[h,m]=s.useState([]),[_,E]=s.useState([]);s.useEffect(()=>{(!S(d.startDateTime,o)||!S(d.endDateTime,c))&&f({startDateTime:o,endDateTime:c})},[o,c]);function g(r,t,l){const i=[...t.errors||[]];t.startDateTime&&t.endDateTime&&!isNaN(t.startDateTime)&&!isNaN(t.endDateTime)&&(M(t.startDateTime,t.endDateTime)||i.push(new y("INVALID_RANGE_START_AFTER_END","INVALID_RANGE_START_AFTER_END")));const T={...t,origin:l,errors:i,errorMessage:i[0]?i[0].message:null};u(r,T)}function N(r,{datetime:t,errors:l}){m(l);const i=[...l||[],..._||[]],T={...d,startDateTime:t,errors:i};f(T),g(r,T,"RANGE_START")}function D(r,{datetime:t,errors:l}){E(l);const i=[...h||[],...l||[]],T={...d,endDateTime:t,errors:i};f(T),g(r,T,"RANGE_END")}return n.jsx(j.Provider,{value:{startDateTime:d.startDateTime,endDateTime:d.endDateTime,onStartChange:N,onEndChange:D},children:a.children})}v.displayName="DateTimeRange.Manager";v.propTypes={children:e.element,startDateTime:e.oneOfType([e.instanceOf(Date),e.number,e.string]),endDateTime:e.oneOfType([e.instanceOf(Date),e.number,e.string]),onChange:e.func.isRequired};const L={Manager:v},q="_arrow_gv5le_10",R={"range-picker":"_range-picker_gv5le_1",arrow:q,"range-picker-vertical":"_range-picker-vertical_gv5le_16","date-time-range-picker-inline":"_date-time-range-picker-inline_gv5le_34"},z=["id","dateFormat","onBlur","onChange","startDateTime","endDateTime","isDisabledChecker"];function x(a){const{id:u,dateFormat:o,useSeconds:c,onChange:p,onBlur:d,inline:f}=a,h=P(a,z),[m,_]=s.useState(!1),E=s.useRef(),g=!!f,N=C({"range-picker":!m,[R["range-picker"]]:!m,"range-picker-vertical":m&&!g,[R["range-picker-vertical"]]:m&&!g,"date-time-range-picker-inline":g,[R["date-time-range-picker-inline"]]:g}),D=s.useMemo(()=>function(){m&&_(!1),setTimeout(()=>{const t=E.current;t&&t.scrollWidth>t.offsetParent?.offsetWidth&&_(!0)})},[m]);return s.useEffect(()=>{const r=window.addEventListener("resize",O(D,200));return()=>window.removeEventListener("resize",r)},[D]),s.useEffect(()=>{D()},[]),n.jsx(L.Manager,{startDateTime:a.startDateTime,endDateTime:a.endDateTime,onChange:p,children:n.jsx(j.Consumer,{children:({startDateTime:r,endDateTime:t,onStartChange:l,onEndChange:i})=>n.jsxs("div",{className:N,ref:E,children:[n.jsxs("div",{className:"range-input","data-testid":"range-start",children:[n.jsx(k.Label,{htmlFor:a.id,children:a.t("TC_DATE_PICKER_RANGE_FROM",{defaultValue:"From"})}),n.jsx(w,{...h,id:`${u}-start`,dateFormat:o,useSeconds:c,value:r,endDate:t,onChange:l,onBlur:d,defaultTimeValue:a.defaultTimeStart})]}),n.jsx("span",{className:C(R.arrow,"arrow"),children:n.jsx(I,{name:m?"arrow-bottom":"arrow-right",size:"S"})}),n.jsxs("div",{className:"range-input","data-testid":"range-end",children:[n.jsx(k.Label,{htmlFor:a.id,children:a.t("TC_DATE_PICKER__RANGE_TO",{defaultValue:"To"})}),n.jsx(w,{...h,id:`${u}-end`,dateFormat:o,useSeconds:c,value:t,startDate:r,onChange:i,onBlur:d,defaultTimeValue:a.defaultTimeEnd})]})]})})})}x.defaultProps={dateFormat:"YYYY-MM-DD",t:F()};x.propTypes={id:e.string.isRequired,dateFormat:e.string,useSeconds:e.bool,onChange:e.func,onBlur:e.func,defaultTimeStart:e.shape({hours:e.string.isRequired,minutes:e.string.isRequired,seconds:e.string}),defaultTimeEnd:e.shape({hours:e.string.isRequired,minutes:e.string.isRequired,seconds:e.string}),startDateTime:e.oneOfType([e.instanceOf(Date),e.number,e.string]),endDateTime:e.oneOfType([e.instanceOf(Date),e.number,e.string]),inline:e.string,t:e.func};export{x as I};
