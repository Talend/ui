import{j as e,c as u,P as s,I as q,r as U,C as ne,A as le,L as ae,u as ce}from"./iframe-D37Phr64.js";import{I as T}from"./constants-CZYEPhht.js";import{a as H}from"./translate-CAq4Kplr.js";import{A as v}from"./Action.component-Ck4uvcSx.js";import{w as D}from"./withTranslation-Borovdv1.js";import{C as de}from"./CellMeasurerCache-Dk_qXk2a.js";import{C as z}from"./Checkbox-CAJyvrNy.js";import"./index-BlZT6wrK.js";import{T as he}from"./TooltipTrigger.component-DR5pn2u9.js";import"./preload-helper-PPVm8Dsz.js";import"./ActionButton.component-CznGsQDN.js";import"./index-CSYudTWG.js";import"./CircularProgress.component-CQfs1YoU.js";import"./Skeleton.component-YGLhyf4R.js";import"./theme-CeyjN51H.js";import"./OverlayTrigger.component-BCMwzjb4.js";import"./RootCloseWrapper-4SBbwaun.js";import"./interopRequireDefault-CBIuXflU.js";import"./Popover-GTcxw7wL.js";import"./Transition-CM8yD3oi.js";import"./Transition-DXkAf1V6.js";import"./ActionSplitDropdown.component-BpSVpVkj.js";import"./SplitButton-DTDnhUCW.js";import"./inheritsLoose-DWEYlpi0.js";import"./get-90MRQFNM.js";import"./_baseGet-BdbJtFQK.js";import"./toString-DU9ul6dr.js";import"./isSymbol-DOqcnDfM.js";import"./eq-Oi8weurB.js";import"./omit-20CTcyqL.js";import"./_setToString-BzqI9MrB.js";import"./_getTag-3_YbZVhb.js";import"./isArrayLike-B6M8JwQg.js";import"./DropdownButton-Bnk65iT_.js";import"./ActionIconToggle.component-CivhpjLz.js";const X={"tc-listview-header":"_tc-listview-header_rycnt_2"};function pe(){return u(X["tc-listview-header"],"tc-listview-header")}function ue(r,o){function t(i){r.onClick&&r.onClick(i,{value:i.target.value})}return e.jsx(v,{label:r.label,icon:r.icon,onClick:t,disabled:r.disabled,tooltipPlacement:"bottom",inProgress:r.inProgress,hideLabel:!0,link:!0},`${o}-listview-header-action`)}function me(r=[]){return r.length?e.jsx("div",{className:"actions",children:r.map(ue)}):null}function N({headerDefault:r,headerLabel:o,labelProps:t,nbItemsSelected:i,nbItems:n,required:c,t:l}){function a(){const w=o||l("LISTVIEW_HEADER_TITLE",{defaultValue:"Values"});return e.jsxs("strong",{...t,children:[w,c&&"*"]})}function d(){return n>=1&&i>=1?e.jsxs("small",{children:["(",l("LISTVIEW_HEADER_SELECTED",{count:i,total:n,defaultValue:"{{count}}/{{total}} selected"}),")"]}):null}return e.jsxs("header",{className:pe(),children:[a(),d(),me(r)]})}N.propTypes={headerDefault:s.arrayOf(s.shape(v.propTypes)).isRequired,headerLabel:s.string,labelProps:s.object,required:s.bool,nbItems:s.number,nbItemsSelected:s.number,t:s.func};N.defaultProps={t:H()};const ge=D(T)(N);let J;function we(){return u(X["tc-listview-header"],"tc-listview-header")}function xe(r,o){function t(i){r.onClick&&r.onClick(i,{value:J.value})}return e.jsx(v,{label:r.label,icon:r.icon,onClick:t,disabled:r.disabled,tooltipPlacement:"bottom",inProgress:r.inProgress,hideLabel:!0,link:!0},`${o}-listview-header-action`)}function W({headerInput:r,onInputChange:o,inputPlaceholder:t,onAddKeyDown:i,t:n}){const c=t||n("LISTVIEW_HEADERINPUT_SEARCH_PLACEHOLDER",{defaultValue:"Search"});function l(d){o(d,{value:d.target.value})}function a(d){i(d,{value:d.target.value})}return e.jsxs("header",{className:we(),children:[e.jsx("input",{type:"text",placeholder:c,ref:d=>{J=d},onChange:l,onKeyDown:a,"aria-label":c,autoFocus:!0}),r.map(xe)]})}W.propTypes={headerInput:s.arrayOf(s.shape(v.propTypes)).isRequired,onInputChange:s.func,inputPlaceholder:s.string,onAddKeyDown:s.func,t:s.func};W.defaultProps={t:H()};const Ie=D(T)(W),Te={id:s.string,label:s.string,checked:s.bool,onChange:s.func,measure:s.func,icon:s.shape(q.propTypes),dataTest:s.string};class Q extends U.Component{componentDidUpdate(o){const{children:t,measure:i,item:n}=this.props,{children:c,item:l}=o;t&&(t.length!==c.length||n.expanded!==l.expanded)&&i()}render(){const{id:o,item:t,parentItem:i,isSwitchBox:n,searchCriteria:c,children:l,dataTest:a,t:d}=this.props;function w(I){const re=new RegExp(`(${c})`,"gi");return I.split(re).map((O,oe)=>{const ie=O.toLowerCase()===c.toLowerCase()?e.jsx("b",{children:O}):O;return e.jsx("span",{children:ie},oe)})}const V=o&&`checkbox-${o}`,x=u("checkbox",{"switch-nested":l},{switch:n},{"with-icon":t.icon}),R=t.checked?d("TC_LISTVIEW_DESELECT",{defaultValue:"Deselect {{ value }}",value:t.label}):d("TC_LISTVIEW_SELECT",{defaultValue:"Select {{ value }}",value:t.label});let Y;return l&&(Y=t.expanded?d("TC_LISTVIEW_COLLAPSE",{defaultValue:"Collapse {{ value }}",value:t.label}):d("TC_LISTVIEW_EXPAND",{defaultValue:"Expand {{ value }}",value:t.label})),e.jsxs("div",{id:o,className:x,role:"option","aria-selected":t.checked,"data-test":a,"data-testid":a,children:[e.jsx(z,{id:V,onChange:I=>t.onChange(I,t,i),checked:t.checked,label:e.jsxs(e.Fragment,{children:[c?w(t.label):t.label,t.icon&&e.jsx(he,{label:t.icon.title,tooltipPlacement:"bottom",children:e.jsx("span",{children:e.jsx(q,{...t.icon})})})]}),"aria-label":R,"data-test":a&&`${a}.checkbox`,"data-testid":a&&`${a}.checkbox`}),l&&e.jsx("div",{className:u("checkbox-nested-expand",{expanded:t.expanded}),"data-test":a&&`${a}.checkbox-nested-expand`,"data-testid":a&&`${a}.checkbox-nested-expand`,children:e.jsx(v,{bsStyle:"link",icon:"talend-caret-down",onClick:I=>t.onExpandToggle(I,t),label:Y,hideLabel:!0})}),l&&t.expanded&&e.jsx("div",{className:"checkbox-nested",children:l})]},t.index)}}Q.propTypes=Te;const K=D(T)(Q),ve="_toggle_gou6a_39",g={"row-height":"12px","row-vertical-margin":"10px","row-nested-inner-margin-top":"5px","row-nested-inner-margin-bottom":"20px","tc-listview-items":"_tc-listview-items_gou6a_2","tc-item-container":"_tc-item-container_gou6a_11",toggle:ve},fe=u(g["tc-list-items"],"tc-list-items"),be=u(g["tc-listview-items"],"tc-listview-items"),Ce=u(g["tc-item-container"],"tc-item-container");function y(r="0"){return parseFloat(r.replace("px",""))||0}const F=40,Ae=y(g["row-height"]),Le=y(g["row-vertical-margin"]),k=Ae+Le,G=y(g["row-nested-inner-margin-top"])+y(g["row-nested-inner-margin-bottom"]);class M extends U.PureComponent{constructor(o){super(o),this.renderItem=this.renderItem.bind(this),this.getRowHeight=this.getRowHeight.bind(this),this.rowRenderer=this.rowRenderer.bind(this),this.renderToggleAllOrItem=this.renderToggleAllOrItem.bind(this),this.renderToggleAll=this.renderToggleAll.bind(this),this.cache=new de({defaultHeight:o.getItemHeight?o.getItemHeight():k,fixedWidth:!0})}getItemByIndex(o){return this.props.items[o-Number(this.hasToggleAll)]}getRowHeight({index:o}){if(this.props.getItemHeight)return this.oldGetRowHeight.call(this,{index:o});if(this.hasToggleAll&&o===0)return F;const t=o+(this.hasToggleAll?0:1)===this.props.items.length,i=this.getItemByIndex(o);let n=k;return t&&(n+=G,n+=this.hasToggleAll?1:0),!i||!i.children||!i.expanded?n:n+i.children.length*k+G}getRowCount(){return this.hasToggleAll?this.props.items.length+1:this.props.items.length}oldGetRowHeight({index:o}){if(this.hasToggleAll&&o===0)return F;let t=0;const i=this.getItemByIndex(o);return i&&i.children&&i.expanded&&(t=i.children.length*this.props.getItemHeight()),this.props.getItemHeight()+t}rowRenderer(o){const{key:t,index:i,style:n}=o,c=this.hasToggleAll&&i===0,l=this.getItemByIndex(i);return e.jsx(ne,{cache:this.cache,columnIndex:0,parent:this.list,rowIndex:i,children:({measure:a})=>e.jsx("div",{className:u(Ce,{[g.toggle]:c,toggle:c,expanded:l&&l.expanded}),style:n,children:this.renderToggleAllOrItem(i,a)},t)},t)}renderToggleAllOrItem(o,t){let i=o;if(this.hasToggleAll){if(o===0)return this.renderToggleAll();i=o-1}return this.renderItem(this.props.items[i],i,t)}renderToggleAll(){const{id:o,isSwitchBox:t,toggleAllChecked:i,onToggleAll:n,t:c}=this.props,l=`${o||"tc-listview"}-toggle-all`,a=t?"switch checkbox":"checkbox",d=i?c("LISTVIEW_ITEMS_DESELECT_ALL",{defaultValue:"Deselect all"}):c("LISTVIEW_ITEMS_SELECT_ALL",{defaultValue:"Select all"});return e.jsx("div",{className:a,children:e.jsx(z,{id:l,onChange:n,checked:i,label:e.jsx("strong",{children:d})})})}renderItem(o,t,i){const{dataTest:n}=this.props;let c;if(this.props.id){const l=this.hasToggleAll?t+1:t;c=`${this.props.id}-${l}-item`}return e.jsx(K,{measure:i,id:c,item:o,isSwitchBox:this.props.isSwitchBox&&!o.children,searchCriteria:this.props.searchCriteria,dataTest:n&&`${n}-${t}`,children:o.children&&o.children.map((l,a)=>e.jsx(K,{measure:i,item:l,parentItem:o,searchCriteria:this.props.searchCriteria,dataTest:n&&`${n}-${t}.nested-${a}`},a))},c)}render(){return this.hasToggleAll=this.props.showToggleAll&&this.props.items.length>1,e.jsx("div",{className:be,children:e.jsx(le,{children:({height:o,width:t})=>e.jsx(ae,{ref:i=>{this.list=i},items:this.props.items,className:fe,rowRenderer:this.rowRenderer,width:t,height:o,rowCount:this.getRowCount(),rowHeight:this.getRowHeight,role:"listbox",containerProps:this.props.containerProps})})})}}M.propTypes={containerProps:s.object,id:s.string,items:s.arrayOf(s.shape({label:s.string,onChange:s.func,checked:s.bool,index:s.number})),isSwitchBox:s.bool,getItemHeight:s.func,searchCriteria:s.string,toggleAllChecked:s.bool,showToggleAll:s.bool,onToggleAll:s.func,dataTest:s.string,t:s.func};M.defaultProps={t:H(),isSwitchBox:!1,showToggleAll:!0};const Se=D(T)(M),Z={"tc-listview":"_tc-listview_eg216_2","empty-message":"_empty-message_eg216_18"},ee="DISPLAY_MODE_DEFAULT",$="DISPLAY_MODE_SEARCH";function Ee(){return u(Z["tc-listview"],"tc-listview")}function B(r){const{displayMode:o,onInputChange:t,onAddKeyDown:i,headerInput:n,headerDefault:c,headerLabel:l,labelProps:a,items:d,required:w,searchPlaceholder:V}=r;if(o===$){const x={headerInput:n,onInputChange:t,onAddKeyDown:i,inputPlaceholder:V};return e.jsx(Ie,{...x})}else{const x={headerDefault:c,headerLabel:l,labelProps:a,required:w,nbItems:d.length,nbItemsSelected:d.filter(R=>!!R.checked).length};return e.jsx(ge,{...x})}}function p(r){const{t:o}=ce(T),t=o("NO_RESULT_FOUND",{defaultValue:"No results found"}),i=o("LISTVIEW_EMPTY",{defaultValue:"This list is empty."}),n=r.displayMode===$?t:i;return e.jsxs("div",{className:Ee(),children:[e.jsx(B,{...r}),r.items.length?e.jsx(Se,{...r}):e.jsx("span",{className:Z["empty-message"],children:n})]})}p.DISPLAY_MODES={DISPLAY_MODE_DEFAULT:ee,DISPLAY_MODE_SEARCH:$};p.displayName="ListView";p.propTypes={displayMode:s.oneOf(Object.values(p.DISPLAY_MODES)),items:s.arrayOf(s.object)};p.defaultProps={items:[]};B.defaultProps={displayMode:ee};B.propTypes={displayMode:s.oneOf(Object.values(p.DISPLAY_MODES)),headerDefault:s.arrayOf(s.object),headerInput:s.arrayOf(s.object),headerLabel:s.string,labelProps:s.object,items:p.propTypes.items,onInputChange:s.func,onAddKeyDown:s.func,required:s.bool,searchPlaceholder:s.string};const{action:h}=__STORYBOOK_MODULE_ACTIONS__,te={label:"Filter",icon:"talend-search",id:"filter",onClick:h("header.onFilter")},m={required:!0,items:["Lorem","Ipsum","Dolor","Sit","Amet"].map(r=>({label:r,value:r,onChange:h("onChange")})),headerDefault:[te],onAddChange:h("onAddChange"),onAddKeyDown:h("onAddKeyDown"),headerLabel:"Choose wisely",toggleAllChecked:!1,onToggleAll:h("onToggleAll"),dataTest:"item"},se={...m,displayMode:p.DISPLAY_MODES.DISPLAY_MODE_SEARCH,headerInput:[{label:"Remove search",icon:"talend-cross",id:"abort",onClick:h("abort")}],searchCriteria:"ore"},_e={...se,items:[],searchCriteria:"nopnopnop"},je={...m,isSwitchBox:!0},Pe={required:!0,isSwitchBox:!0,items:[{label:"LoremParent",value:"LoremParent",onChange:h("onChange"),onExpandToggle:h("onExpandToggle"),expanded:!1,children:[{label:"Lorem",value:"Lorem",onChange:h("onChange")},{label:"Ipsum",value:"Ipsum",onChange:h("onChange")},{label:"Dolor",value:"Dolor",onChange:h("onChange")}]},{label:"IpsumParent",value:"IpsumParent",onChange:h("onChange"),onExpandToggle:h("onExpandToggle"),expanded:!0,children:[{label:"Lorem2",value:"Lorem2",onChange:h("onChange")},{label:"Ipsum2",value:"Ipsum2",onChange:h("onChange")},{label:"Dolor2",value:"Dolor2",onChange:h("onChange")}]}],headerDefault:[te],onAddChange:h("onAddChange"),onAddKeyDown:h("onAddKeyDown"),headerLabel:"Choose wisely",toggleAllChecked:!1,onToggleAll:h("onToggleAll"),showToggleAll:!1,dataTest:"item"},ye={...m,items:[{label:"Lorem",icon:{name:"talend-warning",title:"A warning"}},{label:"Ipsum",icon:{name:"talend-world",title:"The world"}}]},ut={title:"Components/Form - Controls/ListView",decorators:[r=>e.jsxs("div",{children:[e.jsx("h1",{children:"ListView"}),e.jsx("form",{children:r()})]})]},f=()=>{const r={...m};return r.items=[],e.jsx("div",{id:"listview-empty",children:e.jsx(p,{...r})})},b=()=>{const r={...m};return r.items=[m.items[0]],e.jsx("div",{id:"listview-single",children:e.jsx(p,{...r})})},C=()=>e.jsx("div",{id:"listview-several",children:e.jsx(p,{...m})}),A=()=>e.jsx("div",{id:"listview-search",children:e.jsx(p,{...se})}),L=()=>e.jsx("div",{id:"listview-search-no-result",children:e.jsx(p,{..._e})}),S=()=>{const r={...m};return r.items[1].checked=!0,e.jsx("div",{id:"listview-selected",children:e.jsx(p,{...r})})},E=()=>e.jsx("div",{id:"listview-switch",children:e.jsx(p,{...je})}),_=()=>e.jsx("div",{id:"listview-nested",children:e.jsx(p,{...Pe})}),j=()=>e.jsx("div",{id:"listview-with-icon",children:e.jsx(p,{...ye})}),P=()=>{const r={...m};return r.showToggleAll=!1,e.jsx("div",{id:"listview-without-toggle-all",children:e.jsx(p,{...r})})};f.parameters={...f.parameters,docs:{...f.parameters?.docs,source:{originalSource:`() => {
  const emptyProps = {
    ...props
  };
  emptyProps.items = [];
  return <div id="listview-empty">
            <ListView {...emptyProps} />
        </div>;
}`,...f.parameters?.docs?.source}}};b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:`() => {
  const singleEntryProps = {
    ...props
  };
  singleEntryProps.items = [props.items[0]];
  return <div id="listview-single">
            <ListView {...singleEntryProps} />
        </div>;
}`,...b.parameters?.docs?.source}}};C.parameters={...C.parameters,docs:{...C.parameters?.docs,source:{originalSource:`() => <div id="listview-several">
        <ListView {...props} />
    </div>`,...C.parameters?.docs?.source}}};A.parameters={...A.parameters,docs:{...A.parameters?.docs,source:{originalSource:`() => <div id="listview-search">
        <ListView {...searchProps} />
    </div>`,...A.parameters?.docs?.source}}};L.parameters={...L.parameters,docs:{...L.parameters?.docs,source:{originalSource:`() => <div id="listview-search-no-result">
        <ListView {...noResultsSearch} />
    </div>`,...L.parameters?.docs?.source}}};S.parameters={...S.parameters,docs:{...S.parameters?.docs,source:{originalSource:`() => {
  const selectedValuesProps = {
    ...props
  };
  selectedValuesProps.items[1].checked = true;
  return <div id="listview-selected">
            <ListView {...selectedValuesProps} />
        </div>;
}`,...S.parameters?.docs?.source}}};E.parameters={...E.parameters,docs:{...E.parameters?.docs,source:{originalSource:`() => {
  return <div id="listview-switch">
            <ListView {...withSwitchBox} />
        </div>;
}`,...E.parameters?.docs?.source}}};_.parameters={..._.parameters,docs:{..._.parameters?.docs,source:{originalSource:`() => {
  return <div id="listview-nested">
            <ListView {...withNestedItems} />
        </div>;
}`,..._.parameters?.docs?.source}}};j.parameters={...j.parameters,docs:{...j.parameters?.docs,source:{originalSource:`() => <div id="listview-with-icon">
        <ListView {...withIconProps} />
    </div>`,...j.parameters?.docs?.source}}};P.parameters={...P.parameters,docs:{...P.parameters?.docs,source:{originalSource:`() => {
  const withoutToggleALLProps = {
    ...props
  };
  withoutToggleALLProps.showToggleAll = false;
  return <div id="listview-without-toggle-all">
            <ListView {...withoutToggleALLProps} />
        </div>;
}`,...P.parameters?.docs?.source}}};const mt=["Empty","SingleEntry","SeveralValues","SearchMode","SearchModeWithoutResults","SelectedValues","WithSwitchBox","WithNestedItems","WithIcons","WithoutToggleAll"];export{f as Empty,A as SearchMode,L as SearchModeWithoutResults,S as SelectedValues,C as SeveralValues,b as SingleEntry,j as WithIcons,_ as WithNestedItems,E as WithSwitchBox,P as WithoutToggleAll,mt as __namedExportsOrder,ut as default};
