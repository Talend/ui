import{P as e,j as o,I as N,c as d,Y as R,R as Q,u as X,r as f,b as Z}from"./iframe-BBf9rzxA.js";import{A as ee}from"./index-Co99jFeo.js";import{u as te}from"./usePopper-DlGpQQ9g.js";import{A as ne}from"./Action.component-Cz8Igo4J.js";import"./Actions.component-D8eQ-2cD.js";import"./ActionButton.component-D9c99jvM.js";import"./ActionIconToggle.component-CW6o58yd.js";import"./ActionSplitDropdown.component-8m2MMfat.js";import{I as ie}from"./constants-CZYEPhht.js";import{D as oe}from"./index-Elct4BNm.js";import{g as ae}from"./get-D4npDK4m.js";import"./index-D3rKfqfq.js";import{E as F}from"./Emphasis.component-DSUUB_1W.js";import"./index-DAqxfM7Q.js";import{g as se}from"./theme-C4w-c8M9.js";import{C as ce}from"./CircularProgress.component-CP7cXXJs.js";const le="_loading_agox3_25",re="_right_agox3_47",de="_items_agox3_26",pe="_hint_agox3_146",he="_item_agox3_26",ue="_multiline_agox3_173",me="_selected_agox3_194",ge="_disabled_agox3_198",a={"tc-typeahead-container":"_tc-typeahead-container_agox3_20",loading:le,"typeahead-input-container":"_typeahead-input-container_agox3_25","items-container":"_items-container_agox3_26","object-blink":"_object-blink_agox3_1","items-body":"_items-body_agox3_31",right:re,"container-open":"_container-open_agox3_53","typeahead-input":"_typeahead-input_agox3_25","typeahead-input-icon":"_typeahead-input-icon_agox3_64","icon-cls":"_icon-cls_agox3_68","typeahead-input-caret":"_typeahead-input-caret_agox3_81","is-loading":"_is-loading_agox3_101","is-searching":"_is-searching_agox3_102","no-result":"_no-result_agox3_103","no-domain":"_no-domain_agox3_115",items:de,"section-container":"_section-container_agox3_131","section-header":"_section-header_agox3_131","section-header-title":"_section-header-title_agox3_143",hint:pe,item:he,multiline:ue,"item-icon":"_item-icon_agox3_176","item-title":"_item-title_agox3_179","item-description":"_item-description_agox3_180","item-highlighted":"_item-highlighted_agox3_190",selected:me,disabled:ge,"skeleton-blink":"_skeleton-blink_agox3_1"},w=se(a);function M(n){const{caret:s,key:l,debounceMinLength:h,debounceTimeout:c,icon:t,setReferenceElement:r,disabled:u,readOnly:x,...m}=n,g=s&&!u&&!x,_=d("tc-typeahead-typeahead-input-icon",a["typeahead-input-container"],t&&a["typeahead-input-icon"],g&&a["typeahead-input-caret"]);return o.jsxs("div",{className:_,children:[t&&o.jsx("div",{className:w("icon-cls",{"icon-caret":g}),children:t&&o.jsx(N,{...t})}),h||c?o.jsx(oe,{id:l,...m,disabled:u,readOnly:x,debounceTimeout:c,element:R.Text,minLength:h,inputRef:I=>{r(Q.findDOMNode(I))}}):o.jsx(R.Text,{id:l,...m,hideLabel:!0,disabled:u,readOnly:x,ref:r}),g&&o.jsx("div",{className:w("icon-cls",{"icon-caret":g}),children:o.jsx(N,{name:"talend-caret-down"})})]})}M.propTypes={key:e.string,debounceMinLength:e.number,debounceTimeout:e.number,icon:e.shape({name:e.string,title:e.string}),inputRef:e.func,caret:e.bool,disabled:e.bool,readOnly:e.bool};function fe(n,s,l,h,c,t,r,u=S=>S,x,m,g,_,I){const S=n,j=n&&!n.length,D=!n||n&&!n.length;function T({containerProps:y,children:v}){if(!S)return;const C=d(y.className,a["items-container"],{[a["container-open"]]:l||j});let p;return l?p=o.jsxs("div",{className:`${a["is-searching"]} is-searching`,children:[o.jsx(ce,{}),o.jsx("span",{children:h})]},"searching"):j&&c?p=o.jsx("div",{className:`${a["is-loading"]} is-loading`,children:o.jsx("span",{children:t})},"loading"):D&&I?p=o.jsx("div",{className:`${a["no-domain"]} no-domain`,children:o.jsx("span",{children:I()})},"no-domain"):j?p=o.jsxs("div",{className:`${a["no-result"]} no-result`,children:[o.jsx(N,{name:"talend-fieldglass",title:s}),o.jsx("span",{children:s})]},"no-result"):p=v,o.jsx("div",{className:C,id:y.id,ref:x,style:m.popper,...g.popper,tabIndex:"0","aria-label":_("TYPEAHEAD_SUGGESTIONS",{defaultValue:"Suggestions"}),children:o.jsx("div",{ref:y.ref,className:a["items-body"],style:{maxHeight:m.popper.maxHeight,minHeight:m.popper.minHeight},children:u(p,{isShown:S,loading:c,noResult:j,searching:l},y.ref,r)})},y.key)}return T.propTypes={containerProps:e.object,children:e.node},T}function xe(n){if(n&&(n.icon||n.title)){const{hint:s}=n;return o.jsxs("div",{className:w("section-header","tc-typeahead-section-header"),children:[n.icon&&o.jsx(N,{name:n.icon.name,title:n.icon.title}),o.jsx("span",{className:w("section-header-title","tc-typeahead-section-header-title",{hint:s}),children:n.title})]})}return null}function _e(n,{value:s,valueId:l,...h}){let c,t,r;return typeof n=="string"?c=t=n:(c=(n.title||n.name||"").toString().trim(),t=(n.value??n.id??"").toString().trim(),r=n.description),o.jsxs("div",{className:d(a.item,{[a.disabled]:n.disabled,[a.selected]:l!==void 0&&l?.toString()===t||l===void 0&&s?.toString()===c,[a.multiline]:c&&r}),title:c,"data-feature":n["data-feature"]||h["data-feature"],children:[ae(n,"icon")&&o.jsx(N,{className:a["item-icon"],...n.icon}),o.jsxs("div",{className:a["item-text"],children:[o.jsx("span",{className:w("item-title","tc-typeahead-item-title"),children:o.jsx(F,{value:s,text:c})}),r&&o.jsx("p",{className:w("item-description","tc-typeahead-item-description"),children:o.jsx(F,{value:s,text:r})})]})]})}function ye(n,s){return n?s?n.map(l=>({"data-feature":`${s}.${l.value}`,...l})):n:[]}function E({onToggle:n,icon:s,position:l,docked:h,items:c,...t}){const{t:r}=X(ie),[u,x]=f.useState(null),[m,g]=f.useState(null),[_,I]=f.useState(!1),S=f.useMemo(()=>({name:"withSameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:i})=>{i.styles.popper.width=`${i.rects.reference.width}px`},effect:({state:i})=>{i.elements.popper.style.width=`${i.elements.reference.offsetWidth}px`}}),[]),j=f.useMemo(()=>({name:"withInViewport",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:i})=>{const z=i.rects.reference,{y:O,height:k}=z,A=O-45,H=window.innerHeight-O-k-45,L=i.placement.split("-");let P=i.placement;L[0]==="top"&&H>A&&(P=`bottom-${L[1]}`);const J=P.includes("top")?A:H;i.placement=P,i.styles.popper.maxHeight=`${J}px`,i.styles.popper.minHeight=`${k}px`}}),[c]),D=f.useMemo(()=>({name:"withInitialState",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:i})=>{_?delete i.styles.popper.opacity:i.styles.popper.opacity=0}}),[_]),{styles:T,attributes:y}=te(u,m,{modifiers:[{name:"hide",enabled:!1},{name:"preventOverflow",enabled:!1},{name:"computeStyles",options:{adaptive:!0}},S,j,D],strategy:"fixed",placement:"bottom-start"}),[v,C]=f.useState(0),[p,$]=f.useState(0);if(h&&n)return o.jsx(ne,{onClick:n,label:s.title,hideLabel:!0,icon:s.name,bsStyle:s.bsStyle,className:d(a["only-icon-cls"],"tc-typeahead-toggle"),role:s.role,tooltipPlacement:s.tooltipPlacement});const G=(i,b)=>{switch(i.key){case"Down":case"ArrowDown":case"Up":case"ArrowUp":i.preventDefault(),C(b.newHighlightedSectionIndex),$(b.newHighlightedItemIndex);break;case"Enter":i.preventDefault(),p!==null&&p!==null&&t.onSelect(i,{sectionIndex:b.highlightedSectionIndex,itemIndex:b.highlightedItemIndex});break;case"Esc":case"Escape":i.preventDefault(),t.onBlur(i);break}},U=t.multiSection?{getSectionItems:i=>i.suggestions,renderSectionTitle:xe}:null,V={theme:{containerOpen:d(a["container-open"],"tc-typeahead-container-open"),highlight:d(a["highlight-match"],"tc-typeahead-highlight-match"),input:d(a["typeahead-input"],"tc-typeahead-typeahead-input"),itemHighlighted:d(a["item-highlighted"],"tc-typeahead-item-highlighted"),itemsContainer:d(a["items-container"],"tc-typeahead-items-container"),itemsList:a.items,sectionContainer:d(a["section-container"],"tc-typeahead-section-container"),...t.theme,container:d(a["tc-typeahead-container"],"tc-typeahead-container",l==="right"&&a.right,t.theme&&t.theme.container,t.className,{[a.loading]:t.isLoading})}},K={renderInputComponent:M,inputProps:{autoFocus:t.autoFocus,debounceMinLength:t.debounceMinLength,debounceTimeout:t.debounceTimeout,disabled:t.disabled,id:t.id,setReferenceElement:x,onBlur:t.onBlur,onChange:t.onChange&&(i=>t.onChange(i,{value:i.target.value})),onFocus:i=>{_||I(!0),t.onFocus&&t.onFocus(i)},onClick:t.onClick,onKeyDown:t.onKeyDown||G,placeholder:t.placeholder,readOnly:t.readOnly,value:t.value,icon:s,caret:t.caret,role:t.role,...t.inputProps}},W=t.noResultText||r("NO_RESULT_FOUND",{defaultValue:"No results found"}),B=t.searchingText||r("TYPEAHEAD_SEARCHING",{defaultValue:"Searching for matches..."}),Y=t.isLoadingText||r("TYPEAHEAD_LOADING",{defaultValue:"Loading..."}),q={...{renderItem:_e,renderItemsContainer:fe(c,W,t.searching,B,t.isLoading,Y,u,t.children,g,T,y,r,t.noDomainRenderer),renderItemData:{valueId:t.valueId,value:t.value,"data-feature":t["data-feature"]}},...t,...U,...V,...K,highlightedSectionIndex:t.onKeyDown?t.focusedSectionIndex:v,highlightedItemIndex:t.onKeyDown?t.focusedItemIndex:p,items:ye(c,t.dataFeature),itemProps:({itemIndex:i})=>({onMouseDown:b=>b.preventDefault(),onClick:t.onSelect,"aria-disabled":c[i]&&c[i].disabled})};return o.jsx(ee,{...q})}E.displayName="Typeahead";E.defaultProps={autoFocus:!1,disabled:!1,id:Z(),items:null,multiSection:!0,position:"left",readOnly:!1,searching:!1,docked:!1};E.propTypes={id:e.string,className:e.string,noResultText:e.string,position:e.oneOf(["left","right"]),searching:e.bool,searchingText:e.string,onToggle:e.func,docked:e.bool,icon:e.shape({tooltipPlacement:e.string,name:e.string,title:e.string,bsStyle:e.string,role:e.string}),autoFocus:e.bool,debounceMinLength:e.number,debounceTimeout:e.number,disabled:e.bool,onBlur:e.func,onChange:e.func,onFocus:e.func,onClick:e.func,placeholder:e.string,readOnly:e.bool,value:e.string,valueId:e.string,dataFeature:e.string,onSelect:e.func,onKeyDown:e.func,focusedSectionIndex:e.number,focusedItemIndex:e.number,multiSection:e.bool,items:e.arrayOf(e.oneOfType([e.string,e.shape({title:e.string,description:e.string,suggestions:e.arrayOf(e.shape({title:e.string,description:e.string}))})])),children:e.func};export{E as T};
