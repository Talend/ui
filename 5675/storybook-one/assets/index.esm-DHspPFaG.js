import{q as v}from"./iframe-BBf9rzxA.js";var he=e=>e.type==="checkbox",ne=e=>e instanceof Date,K=e=>e==null;const lt=e=>typeof e=="object";var N=e=>!K(e)&&!Array.isArray(e)&&lt(e)&&!ne(e),ut=e=>N(e)&&e.target?he(e.target)?e.target.checked:e.target.value:e,Et=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ot=(e,s)=>e.has(Et(s)),St=e=>{const s=e.constructor&&e.constructor.prototype;return N(s)&&s.hasOwnProperty("isPrototypeOf")},Oe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function M(e){if(e instanceof Date)return new Date(e);const s=typeof FileList<"u"&&e instanceof FileList;if(Oe&&(e instanceof Blob||s))return e;const t=Array.isArray(e);if(!t&&!(N(e)&&St(e)))return e;const i=t?[]:Object.create(Object.getPrototypeOf(e));for(const u in e)Object.prototype.hasOwnProperty.call(e,u)&&(i[u]=M(e[u]));return i}var me=e=>/^\w*$/.test(e),O=e=>e===void 0,Re=e=>Array.isArray(e)?e.filter(Boolean):[],Te=e=>Re(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,s,t)=>{if(!s||!N(e))return t;const i=(me(s)?[s]:Te(s)).reduce((u,n)=>K(u)?u:u[n],e);return O(i)||i===e?O(e[s])?t:e[s]:i},G=e=>typeof e=="boolean",j=e=>typeof e=="function",S=(e,s,t)=>{let i=-1;const u=me(s)?[s]:Te(s),n=u.length,o=n-1;for(;++i<n;){const f=u[i];let w=t;if(i!==o){const C=e[f];w=N(C)||Array.isArray(C)?C:isNaN(+u[i+1])?{}:[]}if(f==="__proto__"||f==="constructor"||f==="prototype")return;e[f]=w,e=e[f]}};const be={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},X={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},se={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Le=v.createContext(null);Le.displayName="HookFormControlContext";const Me=()=>v.useContext(Le);var dt=(e,s,t,i=!0)=>{const u={defaultValues:s._defaultValues};for(const n in e)Object.defineProperty(u,n,{get:()=>{const o=n;return s._proxyFormState[o]!==X.all&&(s._proxyFormState[o]=!i||X.all),t&&(t[o]=!0),e[o]}});return u};const Ue=typeof window<"u"?v.useLayoutEffect:v.useEffect;function Ct(e){const s=Me(),{control:t=s,disabled:i,name:u,exact:n}=e||{},[o,f]=v.useState(t._formState),w=v.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Ue(()=>t._subscribe({name:u,formState:w.current,exact:n,callback:C=>{!i&&f({...t._formState,...C})}}),[u,i,n]),v.useEffect(()=>{w.current.isValid&&t._setValid(!0)},[t]),v.useMemo(()=>dt(o,t,w.current,!1),[o,t])}var Y=e=>typeof e=="string",Ee=(e,s,t,i,u)=>Y(e)?(i&&s.watch.add(e),y(t,e,u)):Array.isArray(e)?e.map(n=>(i&&s.watch.add(n),y(t,n))):(i&&(s.watchAll=!0),t),Se=e=>K(e)||!lt(e);function Z(e,s,t=new WeakSet){if(Se(e)||Se(s))return Object.is(e,s);if(ne(e)&&ne(s))return Object.is(e.getTime(),s.getTime());const i=Object.keys(e),u=Object.keys(s);if(i.length!==u.length)return!1;if(t.has(e)||t.has(s))return!0;t.add(e),t.add(s);for(const n of i){const o=e[n];if(!u.includes(n))return!1;if(n!=="ref"){const f=s[n];if(ne(o)&&ne(f)||N(o)&&N(f)||Array.isArray(o)&&Array.isArray(f)?!Z(o,f,t):!Object.is(o,f))return!1}}return!0}function Ot(e){const s=Me(),{control:t=s,name:i,defaultValue:u,disabled:n,exact:o,compute:f}=e||{},w=v.useRef(u),C=v.useRef(f),p=v.useRef(void 0),b=v.useRef(t),A=v.useRef(i);C.current=f;const[_,I]=v.useState(()=>{const m=t._getWatch(i,w.current);return C.current?C.current(m):m}),R=v.useCallback(m=>{const x=Ee(i,t._names,m||t._formValues,!1,w.current);return C.current?C.current(x):x},[t._formValues,t._names,i]),L=v.useCallback(m=>{if(!n){const x=Ee(i,t._names,m||t._formValues,!1,w.current);if(C.current){const $=C.current(x);Z($,p.current)||(I($),p.current=$)}else I(x)}},[t._formValues,t._names,n,i]);Ue(()=>((b.current!==t||!Z(A.current,i))&&(b.current=t,A.current=i,L()),t._subscribe({name:i,formState:{values:!0},exact:o,callback:m=>{L(m.values)}})),[t,o,i,L]),v.useEffect(()=>t._removeUnmounted());const T=b.current!==t,V=A.current,q=v.useMemo(()=>{if(n)return null;const m=!T&&!Z(V,i);return T||m?R():null},[n,T,i,V,R]);return q!==null?q:_}function Gt(e){const s=Me(),{name:t,disabled:i,control:u=s,shouldUnregister:n,defaultValue:o,exact:f=!0}=e,w=ot(u._names.array,t),C=v.useMemo(()=>y(u._formValues,t,y(u._defaultValues,t,o)),[u,t,o]),p=Ot({control:u,name:t,defaultValue:C,exact:f}),b=Ct({control:u,name:t,exact:f}),A=v.useRef(e),_=v.useRef(void 0),I=v.useRef(u.register(t,{...e.rules,value:p,...G(e.disabled)?{disabled:e.disabled}:{}}));A.current=e;const R=v.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(b.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(b.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(b.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!y(b.validatingFields,t)},error:{enumerable:!0,get:()=>y(b.errors,t)}}),[b,t]),L=v.useCallback(m=>I.current.onChange({target:{value:ut(m),name:t},type:be.CHANGE}),[t]),T=v.useCallback(()=>I.current.onBlur({target:{value:y(u._formValues,t),name:t},type:be.BLUR}),[t,u._formValues]),V=v.useCallback(m=>{const x=y(u._fields,t);x&&x._f&&m&&(x._f.ref={focus:()=>j(m.focus)&&m.focus(),select:()=>j(m.select)&&m.select(),setCustomValidity:$=>j(m.setCustomValidity)&&m.setCustomValidity($),reportValidity:()=>j(m.reportValidity)&&m.reportValidity()})},[u._fields,t]),q=v.useMemo(()=>({name:t,value:p,...G(i)||b.disabled?{disabled:b.disabled||i}:{},onChange:L,onBlur:T,ref:V}),[t,i,b.disabled,L,T,V,p]);return v.useEffect(()=>{const m=u._options.shouldUnregister||n,x=_.current;x&&x!==t&&!w&&u.unregister(x),u.register(t,{...A.current.rules,...G(A.current.disabled)?{disabled:A.current.disabled}:{}});const $=(te,re)=>{const ee=y(u._fields,te);ee&&ee._f&&(ee._f.mount=re)};if($(t,!0),m){const te=M(y(u._options.defaultValues,t,A.current.defaultValue));S(u._defaultValues,t,te),O(y(u._formValues,t))&&S(u._formValues,t,te)}return!w&&u.register(t),_.current=t,()=>{(w?m&&!u._state.action:m)?u.unregister(t):$(t,!1)}},[t,u,w,n]),v.useEffect(()=>{u._setDisabledField({disabled:i,name:t})},[i,t,u]),v.useMemo(()=>({field:q,formState:b,fieldState:R}),[q,b,R])}const Ne=v.createContext(null);Ne.displayName="HookFormContext";const Yt=()=>v.useContext(Ne),Jt=e=>{const{children:s,watch:t,getValues:i,getFieldState:u,setError:n,clearErrors:o,setValue:f,trigger:w,formState:C,resetField:p,reset:b,handleSubmit:A,unregister:_,control:I,register:R,setFocus:L,subscribe:T}=e;return v.createElement(Ne.Provider,{value:v.useMemo(()=>({watch:t,getValues:i,getFieldState:u,setError:n,clearErrors:o,setValue:f,trigger:w,formState:C,resetField:p,reset:b,handleSubmit:A,unregister:_,control:I,register:R,setFocus:L,subscribe:T}),[o,I,C,u,i,A,R,b,p,n,L,f,T,w,_,t])},v.createElement(Le.Provider,{value:I},s))};var Rt=(e,s,t,i,u)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:u||!0}}:{},ye=e=>Array.isArray(e)?e:[e],Je=()=>{let e=[];return{get observers(){return e},next:u=>{for(const n of e)n.next&&n.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(n=>n!==u)}}),unsubscribe:()=>{e=[]}}};function ft(e,s){const t={};for(const i in e)if(e.hasOwnProperty(i)){const u=e[i],n=s[i];if(u&&N(u)&&n){const o=ft(u,n);N(o)&&(t[i]=o)}else e[i]&&(t[i]=n)}return t}var H=e=>N(e)&&!Object.keys(e).length,Ie=e=>e.type==="file",_e=e=>{if(!Oe)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},ct=e=>e.type==="select-multiple",Pe=e=>e.type==="radio",Tt=e=>Pe(e)||he(e),De=e=>_e(e)&&e.isConnected;function Lt(e,s){const t=s.slice(0,-1).length;let i=0;for(;i<t;)e=O(e)?i++:e[s[i++]];return e}function Mt(e){for(const s in e)if(e.hasOwnProperty(s)&&!O(e[s]))return!1;return!0}function U(e,s){const t=Array.isArray(s)?s:me(s)?[s]:Te(s),i=t.length===1?e:Lt(e,t),u=t.length-1,n=t[u];return i&&delete i[n],u!==0&&(N(i)&&H(i)||Array.isArray(i)&&Mt(i))&&U(e,t.slice(0,-1)),e}var Ut=e=>{for(const s in e)if(j(e[s]))return!0;return!1};function yt(e){return Array.isArray(e)||N(e)&&!Ut(e)}function Ce(e,s={}){for(const t in e){const i=e[t];yt(i)?(s[t]=Array.isArray(i)?[]:{},Ce(i,s[t])):O(i)||(s[t]=!0)}return s}function ue(e,s,t){t||(t=Ce(s));for(const i in e){const u=e[i];if(yt(u))O(s)||Se(t[i])?t[i]=Ce(u,Array.isArray(u)?[]:{}):ue(u,K(s)?{}:s[i],t[i]);else{const n=s[i];t[i]=!Z(u,n)}}return t}const Qe={value:!1,isValid:!1},Xe={value:!0,isValid:!0};var gt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!O(e[0].attributes.value)?O(e[0].value)||e[0].value===""?Xe:{value:e[0].value,isValid:!0}:Xe:Qe}return Qe},ht=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:i})=>O(e)?e:s?e===""?NaN:e&&+e:t&&Y(e)?new Date(e):i?i(e):e;const Ze={isValid:!1,value:null};var vt=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,Ze):Ze;function et(e){const s=e.ref;return Ie(s)?s.files:Pe(s)?vt(e.refs).value:ct(s)?[...s.selectedOptions].map(({value:t})=>t):he(s)?gt(e.refs).value:ht(O(s.value)?e.ref.value:s.value,e)}var Nt=(e,s,t,i)=>{const u={};for(const n of e){const o=y(s,n);o&&S(u,n,o._f)}return{criteriaMode:t,names:[...e],fields:u,shouldUseNativeValidation:i}},Ve=e=>e instanceof RegExp,ce=e=>O(e)?e:Ve(e)?e.source:N(e)?Ve(e.value)?e.value.source:e.value:e,tt=e=>({isOnSubmit:!e||e===X.onSubmit,isOnBlur:e===X.onBlur,isOnChange:e===X.onChange,isOnAll:e===X.all,isOnTouch:e===X.onTouched});const rt="AsyncFunction";var It=e=>!!e&&!!e.validate&&!!(j(e.validate)&&e.validate.constructor.name===rt||N(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===rt)),Pt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),st=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const ge=(e,s,t,i)=>{for(const u of t||Object.keys(e)){const n=y(e,u);if(n){const{_f:o,...f}=n;if(o){if(o.refs&&o.refs[0]&&s(o.refs[0],u)&&!i)return!0;if(o.ref&&s(o.ref,o.name)&&!i)return!0;if(ge(f,s))break}else if(N(f)&&ge(f,s))break}}};function it(e,s,t){const i=y(e,t);if(i||me(t))return{error:i,name:t};const u=t.split(".");for(;u.length;){const n=u.join("."),o=y(s,n),f=y(e,n);if(o&&!Array.isArray(o)&&t!==n)return{name:t};if(f&&f.type)return{name:n,error:f};if(f&&f.root&&f.root.type)return{name:`${n}.root`,error:f.root};u.pop()}return{name:t}}var Bt=(e,s,t,i)=>{t(e);const{name:u,...n}=e;return H(n)||Object.keys(n).length>=Object.keys(s).length||Object.keys(n).find(o=>s[o]===(!i||X.all))},pt=(e,s,t)=>!e||!s||e===s||ye(e).some(i=>i&&(t?i===s:i.startsWith(s)||s.startsWith(i))),qt=(e,s,t,i,u)=>u.isOnAll?!1:!t&&u.isOnTouch?!(s||e):(t?i.isOnBlur:u.isOnBlur)?!e:(t?i.isOnChange:u.isOnChange)?e:!0,Wt=(e,s)=>!Re(y(e,s)).length&&U(e,s),Ht=(e,s,t)=>{const i=ye(y(e,t));return S(i,"root",s[t]),S(e,t,i),e};function at(e,s,t="validate"){if(Y(e)||Array.isArray(e)&&e.every(Y)||G(e)&&!e)return{type:t,message:Y(e)?e:"",ref:s}}var le=e=>N(e)&&!Ve(e)?e:{value:e,message:""},nt=async(e,s,t,i,u,n)=>{const{ref:o,refs:f,required:w,maxLength:C,minLength:p,min:b,max:A,pattern:_,validate:I,name:R,valueAsNumber:L,mount:T}=e._f,V=y(t,R);if(!T||s.has(R))return{};const q=f?f[0]:o,m=F=>{u&&q.reportValidity&&(q.setCustomValidity(G(F)?"":F||""),q.reportValidity())},x={},$=Pe(o),te=he(o),re=$||te,ee=(L||Ie(o))&&O(o.value)&&O(V)||_e(o)&&o.value===""||V===""||Array.isArray(V)&&!V.length,J=Rt.bind(null,R,i,x),ve=(F,k,P,B=se.maxLength,Q=se.minLength)=>{const z=F?k:P;x[R]={type:F?B:Q,message:z,ref:o,...J(F?B:Q,z)}};if(n?!Array.isArray(V)||!V.length:w&&(!re&&(ee||K(V))||G(V)&&!V||te&&!gt(f).isValid||$&&!vt(f).isValid)){const{value:F,message:k}=Y(w)?{value:!!w,message:w}:le(w);if(F&&(x[R]={type:se.required,message:k,ref:q,...J(se.required,k)},!i))return m(k),x}if(!ee&&(!K(b)||!K(A))){let F,k;const P=le(A),B=le(b);if(!K(V)&&!isNaN(V)){const Q=o.valueAsNumber||V&&+V;K(P.value)||(F=Q>P.value),K(B.value)||(k=Q<B.value)}else{const Q=o.valueAsDate||new Date(V),z=fe=>new Date(new Date().toDateString()+" "+fe),oe=o.type=="time",de=o.type=="week";Y(P.value)&&V&&(F=oe?z(V)>z(P.value):de?V>P.value:Q>new Date(P.value)),Y(B.value)&&V&&(k=oe?z(V)<z(B.value):de?V<B.value:Q<new Date(B.value))}if((F||k)&&(ve(!!F,P.message,B.message,se.max,se.min),!i))return m(x[R].message),x}if((C||p)&&!ee&&(Y(V)||n&&Array.isArray(V))){const F=le(C),k=le(p),P=!K(F.value)&&V.length>+F.value,B=!K(k.value)&&V.length<+k.value;if((P||B)&&(ve(P,F.message,k.message),!i))return m(x[R].message),x}if(_&&!ee&&Y(V)){const{value:F,message:k}=le(_);if(Ve(F)&&!V.match(F)&&(x[R]={type:se.pattern,message:k,ref:o,...J(se.pattern,k)},!i))return m(k),x}if(I){if(j(I)){const F=await I(V,t),k=at(F,q);if(k&&(x[R]={...k,...J(se.validate,k.message)},!i))return m(k.message),x}else if(N(I)){let F={};for(const k in I){if(!H(F)&&!i)break;const P=at(await I[k](V,t),q,k);P&&(F={...P,...J(k,P.message)},m(P.message),i&&(x[R]=F))}if(!H(F)&&(x[R]={ref:q,...F},!i))return x}}return m(!0),x};const jt={mode:X.onSubmit,reValidateMode:X.onChange,shouldFocusError:!0};function $t(e={}){let s={...jt,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:j(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},i={},u=N(s.defaultValues)||N(s.values)?M(s.defaultValues||s.values)||{}:{},n=s.shouldUnregister?{}:M(u),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},f={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},w,C=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},b={...p};let A={...b};const _={array:Je(),state:Je()},I=s.criteriaMode===X.all,R=r=>a=>{clearTimeout(C),C=setTimeout(r,a)},L=async r=>{if(!o.keepIsValid&&!s.disabled&&(b.isValid||A.isValid||r)){let a;s.resolver?(a=H((await re()).errors),T()):a=await J(i,!0),a!==t.isValid&&_.state.next({isValid:a})}},T=(r,a)=>{!s.disabled&&(b.isValidating||b.validatingFields||A.isValidating||A.validatingFields)&&((r||Array.from(f.mount)).forEach(l=>{l&&(a?S(t.validatingFields,l,a):U(t.validatingFields,l))}),_.state.next({validatingFields:t.validatingFields,isValidating:!H(t.validatingFields)}))},V=(r,a=[],l,g,c=!0,d=!0)=>{if(g&&l&&!s.disabled){if(o.action=!0,d&&Array.isArray(y(i,r))){const h=l(y(i,r),g.argA,g.argB);c&&S(i,r,h)}if(d&&Array.isArray(y(t.errors,r))){const h=l(y(t.errors,r),g.argA,g.argB);c&&S(t.errors,r,h),Wt(t.errors,r)}if((b.touchedFields||A.touchedFields)&&d&&Array.isArray(y(t.touchedFields,r))){const h=l(y(t.touchedFields,r),g.argA,g.argB);c&&S(t.touchedFields,r,h)}(b.dirtyFields||A.dirtyFields)&&(t.dirtyFields=ue(u,n)),_.state.next({name:r,isDirty:F(r,a),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else S(n,r,a)},q=(r,a)=>{S(t.errors,r,a),_.state.next({errors:t.errors})},m=r=>{t.errors=r,_.state.next({errors:t.errors,isValid:!1})},x=(r,a,l,g)=>{const c=y(i,r);if(c){const d=y(n,r,O(l)?y(u,r):l);O(d)||g&&g.defaultChecked||a?S(n,r,a?d:et(c._f)):B(r,d),o.mount&&!o.action&&L()}},$=(r,a,l,g,c)=>{let d=!1,h=!1;const D={name:r};if(!s.disabled){if(!l||g){(b.isDirty||A.isDirty)&&(h=t.isDirty,t.isDirty=D.isDirty=F(),d=h!==D.isDirty);const E=Z(y(u,r),a);h=!!y(t.dirtyFields,r),E?U(t.dirtyFields,r):S(t.dirtyFields,r,!0),D.dirtyFields=t.dirtyFields,d=d||(b.dirtyFields||A.dirtyFields)&&h!==!E}if(l){const E=y(t.touchedFields,r);E||(S(t.touchedFields,r,l),D.touchedFields=t.touchedFields,d=d||(b.touchedFields||A.touchedFields)&&E!==l)}d&&c&&_.state.next(D)}return d?D:{}},te=(r,a,l,g)=>{const c=y(t.errors,r),d=(b.isValid||A.isValid)&&G(a)&&t.isValid!==a;if(s.delayError&&l?(w=R(()=>q(r,l)),w(s.delayError)):(clearTimeout(C),w=null,l?S(t.errors,r,l):U(t.errors,r)),(l?!Z(c,l):c)||!H(g)||d){const h={...g,...d&&G(a)?{isValid:a}:{},errors:t.errors,name:r};t={...t,...h},_.state.next(h)}},re=async r=>(T(r,!0),await s.resolver(n,s.context,Nt(r||f.mount,i,s.criteriaMode,s.shouldUseNativeValidation))),ee=async r=>{const{errors:a}=await re(r);if(T(r),r)for(const l of r){const g=y(a,l);g?S(t.errors,l,g):U(t.errors,l)}else t.errors=a;return a},J=async(r,a,l={valid:!0})=>{for(const g in r){const c=r[g];if(c){const{_f:d,...h}=c;if(d){const D=f.array.has(d.name),E=c._f&&It(c._f);E&&b.validatingFields&&T([d.name],!0);const W=await nt(c,f.disabled,n,I,s.shouldUseNativeValidation&&!a,D);if(E&&b.validatingFields&&T([d.name]),W[d.name]&&(l.valid=!1,a||e.shouldUseNativeValidation))break;!a&&(y(W,d.name)?D?Ht(t.errors,W,d.name):S(t.errors,d.name,W[d.name]):U(t.errors,d.name))}!H(h)&&await J(h,a,l)}}return l.valid},ve=()=>{for(const r of f.unMount){const a=y(i,r);a&&(a._f.refs?a._f.refs.every(l=>!De(l)):!De(a._f.ref))&&Fe(r)}f.unMount=new Set},F=(r,a)=>!s.disabled&&(r&&a&&S(n,r,a),!Z(Be(),u)),k=(r,a,l)=>Ee(r,f,{...o.mount?n:O(a)?u:Y(r)?{[r]:a}:a},l,a),P=r=>Re(y(o.mount?n:u,r,s.shouldUnregister?y(u,r,[]):[])),B=(r,a,l={})=>{const g=y(i,r);let c=a;if(g){const d=g._f;d&&(!d.disabled&&S(n,r,ht(a,d)),c=_e(d.ref)&&K(a)?"":a,ct(d.ref)?[...d.ref.options].forEach(h=>h.selected=c.includes(h.value)):d.refs?he(d.ref)?d.refs.forEach(h=>{(!h.defaultChecked||!h.disabled)&&(Array.isArray(c)?h.checked=!!c.find(D=>D===h.value):h.checked=c===h.value||!!c)}):d.refs.forEach(h=>h.checked=h.value===c):Ie(d.ref)?d.ref.value="":(d.ref.value=c,d.ref.type||_.state.next({name:r,values:M(n)})))}(l.shouldDirty||l.shouldTouch)&&$(r,c,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&fe(r)},Q=(r,a,l)=>{for(const g in a){if(!a.hasOwnProperty(g))return;const c=a[g],d=r+"."+g,h=y(i,d);(f.array.has(r)||N(c)||h&&!h._f)&&!ne(c)?Q(d,c,l):B(d,c,l)}},z=(r,a,l={})=>{const g=y(i,r),c=f.array.has(r),d=M(a);S(n,r,d),c?(_.array.next({name:r,values:M(n)}),(b.isDirty||b.dirtyFields||A.isDirty||A.dirtyFields)&&l.shouldDirty&&_.state.next({name:r,dirtyFields:ue(u,n),isDirty:F(r,d)})):g&&!g._f&&!K(d)?Q(r,d,l):B(r,d,l),st(r,f)?_.state.next({...t,name:r,values:M(n)}):_.state.next({name:o.mount?r:void 0,values:M(n)})},oe=async r=>{o.mount=!0;const a=r.target;let l=a.name,g=!0;const c=y(i,l),d=E=>{g=Number.isNaN(E)||ne(E)&&isNaN(E.getTime())||Z(E,y(n,l,E))},h=tt(s.mode),D=tt(s.reValidateMode);if(c){let E,W;const ae=a.type?et(c._f):ut(r),ie=r.type===be.BLUR||r.type===be.FOCUS_OUT,wt=!Pt(c._f)&&!s.resolver&&!y(t.errors,l)&&!c._f.deps||qt(ie,y(t.touchedFields,l),t.isSubmitted,D,h),we=st(l,f,ie);S(n,l,ae),ie?(!a||!a.readOnly)&&(c._f.onBlur&&c._f.onBlur(r),w&&w(0)):c._f.onChange&&c._f.onChange(r);const ke=$(l,ae,ie),kt=!H(ke)||we;if(!ie&&_.state.next({name:l,type:r.type,values:M(n)}),wt)return(b.isValid||A.isValid)&&(s.mode==="onBlur"?ie&&L():ie||L()),kt&&_.state.next({name:l,...we?{}:ke});if(!ie&&we&&_.state.next({...t}),s.resolver){const{errors:Ge}=await re([l]);if(T([l]),d(ae),g){const Dt=it(t.errors,i,l),Ye=it(Ge,i,Dt.name||l);E=Ye.error,l=Ye.name,W=H(Ge)}}else T([l],!0),E=(await nt(c,f.disabled,n,I,s.shouldUseNativeValidation))[l],T([l]),d(ae),g&&(E?W=!1:(b.isValid||A.isValid)&&(W=await J(i,!0)));g&&(c._f.deps&&(!Array.isArray(c._f.deps)||c._f.deps.length>0)&&fe(c._f.deps),te(l,W,E,ke))}},de=(r,a)=>{if(y(t.errors,a)&&r.focus)return r.focus(),1},fe=async(r,a={})=>{let l,g;const c=ye(r);if(s.resolver){const d=await ee(O(r)?r:c);l=H(d),g=r?!c.some(h=>y(d,h)):l}else r?(g=(await Promise.all(c.map(async d=>{const h=y(i,d);return await J(h&&h._f?{[d]:h}:h)}))).every(Boolean),!(!g&&!t.isValid)&&L()):g=l=await J(i);return _.state.next({...!Y(r)||(b.isValid||A.isValid)&&l!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:l}:{},errors:t.errors}),a.shouldFocus&&!g&&ge(i,de,r?c:f.mount),g},Be=(r,a)=>{let l={...o.mount?n:u};return a&&(l=ft(a.dirtyFields?t.dirtyFields:t.touchedFields,l)),O(r)?l:Y(r)?y(l,r):r.map(g=>y(l,g))},pe=(r,a)=>({invalid:!!y((a||t).errors,r),isDirty:!!y((a||t).dirtyFields,r),error:y((a||t).errors,r),isValidating:!!y(t.validatingFields,r),isTouched:!!y((a||t).touchedFields,r)}),bt=r=>{r&&ye(r).forEach(a=>U(t.errors,a)),_.state.next({errors:r?t.errors:{}})},qe=(r,a,l)=>{const g=(y(i,r,{_f:{}})._f||{}).ref,c=y(t.errors,r)||{},{ref:d,message:h,type:D,...E}=c;S(t.errors,r,{...E,...a,ref:g}),_.state.next({name:r,errors:t.errors,isValid:!1}),l&&l.shouldFocus&&g&&g.focus&&g.focus()},_t=(r,a)=>j(r)?_.state.subscribe({next:l=>"values"in l&&r(k(void 0,a),l)}):k(r,a,!0),We=r=>_.state.subscribe({next:a=>{pt(r.name,a.name,r.exact)&&Bt(a,r.formState||b,At,r.reRenderRoot)&&r.callback({values:{...n},...t,...a,defaultValues:u})}}).unsubscribe,Vt=r=>(o.mount=!0,A={...A,...r.formState},We({...r,formState:{...p,...r.formState}})),Fe=(r,a={})=>{for(const l of r?ye(r):f.mount)f.mount.delete(l),f.array.delete(l),a.keepValue||(U(i,l),U(n,l)),!a.keepError&&U(t.errors,l),!a.keepDirty&&U(t.dirtyFields,l),!a.keepTouched&&U(t.touchedFields,l),!a.keepIsValidating&&U(t.validatingFields,l),!s.shouldUnregister&&!a.keepDefaultValue&&U(u,l);_.state.next({values:M(n)}),_.state.next({...t,...a.keepDirty?{isDirty:F()}:{}}),!a.keepIsValid&&L()},He=({disabled:r,name:a})=>{if(G(r)&&o.mount||r||f.disabled.has(a)){const c=f.disabled.has(a)!==!!r;r?f.disabled.add(a):f.disabled.delete(a),c&&o.mount&&!o.action&&L()}},xe=(r,a={})=>{let l=y(i,r);const g=G(a.disabled)||G(s.disabled);return S(i,r,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:r}},name:r,mount:!0,...a}}),f.mount.add(r),l?He({disabled:G(a.disabled)?a.disabled:s.disabled,name:r}):x(r,!0,a.value),{...g?{disabled:a.disabled||s.disabled}:{},...s.progressive?{required:!!a.required,min:ce(a.min),max:ce(a.max),minLength:ce(a.minLength),maxLength:ce(a.maxLength),pattern:ce(a.pattern)}:{},name:r,onChange:oe,onBlur:oe,ref:c=>{if(c){xe(r,a),l=y(i,r);const d=O(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,h=Tt(d),D=l._f.refs||[];if(h?D.find(E=>E===d):d===l._f.ref)return;S(i,r,{_f:{...l._f,...h?{refs:[...D.filter(De),d,...Array.isArray(y(u,r))?[{}]:[]],ref:{type:d.type,name:r}}:{ref:d}}}),x(r,!1,void 0,d)}else l=y(i,r,{}),l._f&&(l._f.mount=!1),(s.shouldUnregister||a.shouldUnregister)&&!(ot(f.array,r)&&o.action)&&f.unMount.add(r)}}},Ae=()=>s.shouldFocusError&&ge(i,de,f.mount),mt=r=>{G(r)&&(_.state.next({disabled:r}),ge(i,(a,l)=>{const g=y(i,l);g&&(a.disabled=g._f.disabled||r,Array.isArray(g._f.refs)&&g._f.refs.forEach(c=>{c.disabled=g._f.disabled||r}))},0,!1))},je=(r,a)=>async l=>{let g;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let c=M(n);if(_.state.next({isSubmitting:!0}),s.resolver){const{errors:d,values:h}=await re();T(),t.errors=d,c=M(h)}else await J(i);if(f.disabled.size)for(const d of f.disabled)U(c,d);if(U(t.errors,"root"),H(t.errors)){_.state.next({errors:{}});try{await r(c,l)}catch(d){g=d}}else a&&await a({...t.errors},l),Ae(),setTimeout(Ae);if(_.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:H(t.errors)&&!g,submitCount:t.submitCount+1,errors:t.errors}),g)throw g},Ft=(r,a={})=>{y(i,r)&&(O(a.defaultValue)?z(r,M(y(u,r))):(z(r,a.defaultValue),S(u,r,M(a.defaultValue))),a.keepTouched||U(t.touchedFields,r),a.keepDirty||(U(t.dirtyFields,r),t.isDirty=a.defaultValue?F(r,M(y(u,r))):F()),a.keepError||(U(t.errors,r),b.isValid&&L()),_.state.next({...t}))},$e=(r,a={})=>{const l=r?M(r):u,g=M(l),c=H(r),d=c?u:g;if(a.keepDefaultValues||(u=l),!a.keepValues){if(a.keepDirtyValues){const h=new Set([...f.mount,...Object.keys(ue(u,n))]);for(const D of Array.from(h)){const E=y(t.dirtyFields,D),W=y(n,D),ae=y(d,D);E&&!O(W)?S(d,D,W):!E&&!O(ae)&&z(D,ae)}}else{if(Oe&&O(r))for(const h of f.mount){const D=y(i,h);if(D&&D._f){const E=Array.isArray(D._f.refs)?D._f.refs[0]:D._f.ref;if(_e(E)){const W=E.closest("form");if(W){W.reset();break}}}}if(a.keepFieldsRef)for(const h of f.mount)z(h,y(d,h));else i={}}n=s.shouldUnregister?a.keepDefaultValues?M(u):{}:M(d),_.array.next({values:{...d}}),_.state.next({values:{...d}})}f={mount:a.keepDirtyValues?f.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!b.isValid||!!a.keepIsValid||!!a.keepDirtyValues||!s.shouldUnregister&&!H(d),o.watch=!!s.shouldUnregister,o.keepIsValid=!!a.keepIsValid,o.action=!1,a.keepErrors||(t.errors={}),_.state.next({submitCount:a.keepSubmitCount?t.submitCount:0,isDirty:c?!1:a.keepDirty?t.isDirty:!!(a.keepDefaultValues&&!Z(r,u)),isSubmitted:a.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:c?{}:a.keepDirtyValues?a.keepDefaultValues&&n?ue(u,n):t.dirtyFields:a.keepDefaultValues&&r?ue(u,r):a.keepDirty?t.dirtyFields:{},touchedFields:a.keepTouched?t.touchedFields:{},errors:a.keepErrors?t.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:u})},Ke=(r,a)=>$e(j(r)?r(n):r,{...s.resetOptions,...a}),xt=(r,a={})=>{const l=y(i,r),g=l&&l._f;if(g){const c=g.refs?g.refs[0]:g.ref;c.focus&&setTimeout(()=>{c.focus(),a.shouldSelect&&j(c.select)&&c.select()})}},At=r=>{t={...t,...r}},ze={control:{register:xe,unregister:Fe,getFieldState:pe,handleSubmit:je,setError:qe,_subscribe:We,_runSchema:re,_updateIsValidating:T,_focusError:Ae,_getWatch:k,_getDirty:F,_setValid:L,_setFieldArray:V,_setDisabledField:He,_setErrors:m,_getFieldArray:P,_reset:$e,_resetDefaultValues:()=>j(s.defaultValues)&&s.defaultValues().then(r=>{Ke(r,s.resetOptions),_.state.next({isLoading:!1})}),_removeUnmounted:ve,_disableForm:mt,_subjects:_,_proxyFormState:b,get _fields(){return i},get _formValues(){return n},get _state(){return o},set _state(r){o=r},get _defaultValues(){return u},get _names(){return f},set _names(r){f=r},get _formState(){return t},get _options(){return s},set _options(r){s={...s,...r}}},subscribe:Vt,trigger:fe,register:xe,handleSubmit:je,watch:_t,setValue:z,getValues:Be,reset:Ke,resetField:Ft,clearErrors:bt,unregister:Fe,setError:qe,setFocus:xt,getFieldState:pe};return{...ze,formControl:ze}}function Qt(e={}){const s=v.useRef(void 0),t=v.useRef(void 0),[i,u]=v.useState({isDirty:!1,isValidating:!1,isLoading:j(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:j(e.defaultValues)?void 0:e.defaultValues});if(!s.current)if(e.formControl)s.current={...e.formControl,formState:i},e.defaultValues&&!j(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...f}=$t(e);s.current={...f,formState:i}}const n=s.current.control;return n._options=e,Ue(()=>{const o=n._subscribe({formState:n._proxyFormState,callback:()=>u({...n._formState}),reRenderRoot:!0});return u(f=>({...f,isReady:!0})),n._formState.isReady=!0,o},[n]),v.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),v.useEffect(()=>{e.mode&&(n._options.mode=e.mode),e.reValidateMode&&(n._options.reValidateMode=e.reValidateMode)},[n,e.mode,e.reValidateMode]),v.useEffect(()=>{e.errors&&(n._setErrors(e.errors),n._focusError())},[n,e.errors]),v.useEffect(()=>{e.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,e.shouldUnregister]),v.useEffect(()=>{if(n._proxyFormState.isDirty){const o=n._getDirty();o!==i.isDirty&&n._subjects.state.next({isDirty:o})}},[n,i.isDirty]),v.useEffect(()=>{var o;e.values&&!Z(e.values,t.current)?(n._reset(e.values,{keepFieldsRef:!0,...n._options.resetOptions}),!((o=n._options.resetOptions)===null||o===void 0)&&o.keepIsValid||n._setValid(),t.current=e.values,u(f=>({...f}))):n._resetDefaultValues()},[n,e.values]),v.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),s.current.formState=v.useMemo(()=>dt(i,n),[n,i]),s.current}export{Jt as F,Yt as a,Gt as b,Qt as u};
