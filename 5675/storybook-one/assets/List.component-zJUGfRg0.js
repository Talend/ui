import{j as s,P as e,b as U,I as S,c as x}from"./iframe-B9f9Cci2.js";import{o as j}from"./omit-BvgacqV1.js";import{I as k}from"./OverlayTrigger.component-BNrpNvk8.js";import{V as h}from"./index-CoEr5xkt.js";import"./index-DRAAYgIz.js";import{a as V}from"./translate-BHqtADpL.js";import{N as W,a as N}from"./NavItem-Tj125zWG.js";import{a as X,N as J}from"./NavDropdown-H5I_uk2s.js";import{M as Q}from"./SplitButton-U2WmwpRw.js";import{F as Z}from"./FilterBar.component-C4yzRw7_.js";import{A as $}from"./ActionBar.component-BF1kAf8g.js";import{C as ee,D as G,b as ae}from"./SelectAll.component-BEDE-Vbv.js";import"./ColumnChooser.component-I1QUqwt2.js";import"./flow-CpT8I0n4.js";import{I as ie}from"./constants-CZYEPhht.js";import{B as le}from"./RootCloseWrapper-DHj10w1C.js";import{w as ce}from"./withTranslation-eX0Mn235.js";function de(t){return t?function({sortBy:n,sortDirection:i}){return t(null,{field:n,isDescending:i===h.SORT_BY.DESC})}:null}function te(t){return s.jsx("span",{className:"sr-only",children:t.label})}function ue(t,r){return!Number.isInteger(t.order)&&!Number.isInteger(r.order)?0:Number.isInteger(t.order)&&!Number.isInteger(r.order)?-1:!Number.isInteger(t.order)&&Number.isInteger(r.order)?1:t.order-r.order}function H(t){const{itemProps:r,sort:n,titleProps:i}=t;i&&(i.actionsKey||(i.actionsKey="actions"),i.persistentActionsKey||(i.persistentActionsKey="persistentActions"));const l={};if(t.items.length>0){const a=t.items[0];Object.keys(a).filter(p=>Array.isArray(a[p])).forEach(p=>{l[p]=!0})}const c={...h.cellDictionary,...t.cellDictionary},o={...h.headerDictionary,...t.headerDictionary};return s.jsx(h,{collection:t.items,defaultHeight:t.defaultHeight,id:t.id,inProgress:t.inProgress,isActive:r&&r.isActive,isSelected:r&&r.isSelected,noRowsRenderer:t.noRowsRenderer,onRowClick:r&&r.onRowClick,onRowDoubleClick:i&&i.onClick,onToggleAll:r&&r.onToggleAll,rowHeight:t.rowHeight,rowRenderers:t.rowRenderers,selectionToggle:r&&r.onToggle,sort:de(n&&n.onChange),sortBy:n&&n.field,sortDirection:n&&n.isDescending?h.SORT_BY.DESC:h.SORT_BY.ASC,type:t.displayMode.toUpperCase(),children:t.columns.filter(a=>!a.hidden).sort(ue).map((a,p)=>{const u={label:a.label,dataKey:a.key,disableSort:a.disableSort,width:-1,...a};if(i&&a.key===i.key?Object.assign(u,c.title,{columnData:{...i,"data-feature":a["data-feature"]}}):l[a.key]?Object.assign(u,h.cellDictionary.actions):a.type&&c[a.type]&&Object.assign(u,c[a.type],{columnData:a.data}),a.hideHeader)u.disableSort=!0,u.headerRenderer=te;else if(a.header&&o[a.header]){let f=o[a.header];typeof f=="function"&&(f={headerRenderer:f}),Object.assign(u,f,{columnData:a.data})}return s.jsx(h.Content,{...u},p)})})}H.propTypes={id:e.string,columns:e.arrayOf(e.object),displayMode:e.oneOf(["large","table"]),defaultHeight:e.number,cellDictionary:e.object,headerDictionary:e.object,itemProps:e.shape({isActive:e.func,isSelected:e.func,onRowClick:e.func,onToggle:e.func,onToggleAll:e.func}),items:e.arrayOf(e.object),inProgress:e.bool,noRowsRenderer:e.oneOfType([e.element,e.func]),rowHeight:e.number,sort:e.shape({onChange:e.func,field:e.string,isDescending:e.bool}),titleProps:e.shape({actionsKey:e.string,key:e.string,onClick:e.func,persistentActionsKey:e.string}),rowRenderers:e.object};H.defaultProps={displayMode:"table"};te.propTypes={label:e.string};const F={"tc-pagination":"_tc-pagination_zkzs9_2","page-index":"_page-index_zkzs9_6"},D="first",E="prev",w="next",B="last";function re(t){return t>0?t:"All"}function fe(t,r){return s.jsx(Q,{eventKey:t,children:re(t)},r)}function O({id:t,startIndex:r,itemsPerPage:n,totalResults:i,onChange:l,t:c,...o}){console.warn("Warning: Pagination is deprecated and will be removed in the next major version.");const{itemsPerPageOptions:a,paginationIconProps:p={}}=o,{first:u={name:"talend-chevron-end"},prev:f={name:"talend-chevron-left"},next:m={name:"talend-chevron-left",transform:"rotate-180"},last:d={name:"talend-chevron-end",transform:"rotate-180"}}=p,g=Math.ceil(r/n),_=Math.ceil(i/n),v=n>0&&_>1;function L(T){return l(1,T)}function ne(T){let y;switch(T){case D:{y=1;break}case E:{y=r-n;break}case w:{y=r+n;break}case B:{y=(_-1)*n+1;break}default:return}l(y,n)}function oe(){return[s.jsx(N,{eventKey:D,id:t&&`${t}-nav-to-first`,className:"btn-link",disabled:r<=1,"aria-label":c("LIST_PAGINATION_GOTO_FIRST_PAGE",{defaultValue:"Go to first page."}),children:s.jsx(S,{...u})},D),s.jsx(N,{eventKey:E,id:t&&`${t}-nav-to-prev`,className:"btn-link",disabled:r<=1,"aria-label":c("LIST_PAGINATION_GOTO_PREVIOUS_PAGE",{defaultValue:"Go to previous page. Current page: {{currentPage}}.",currentPage:g}),children:s.jsx(S,{...f})},E),s.jsxs("li",{className:F["page-index"],children:[g,"/",_]},"page-index"),s.jsx(N,{eventKey:w,id:t&&`${t}-nav-to-next`,className:"btn-link",disabled:r+n>i,"aria-label":c("LIST_PAGINATION_GOTO_NEXT_PAGE",{defaultValue:"Go to next page. Current page: {{currentPage}}.",currentPage:g}),children:s.jsx(S,{...m})},w),s.jsx(N,{eventKey:B,id:t&&`${t}-nav-to-last`,className:"btn-link",disabled:r+n>i,"aria-label":c("LIST_PAGINATION_GOTO_LAST_PAGE",{defaultValue:"Go to last page."}),children:s.jsx(S,{...d})},B)]}return s.jsxs(W,{className:F["tc-pagination"],onSelect:T=>ne(T),children:[s.jsx(X,{id:t?`${t}-size`:U(),title:re(n),onSelect:L,children:a.map((T,y)=>fe(T,y))}),v&&oe()]})}O.propTypes={id:e.string,startIndex:e.number,itemsPerPage:e.number,totalResults:e.number.isRequired,itemsPerPageOptions:e.arrayOf(e.number),onChange:e.func.isRequired,t:e.func};O.defaultProps={itemsPerPage:5,startIndex:1,itemsPerPageOptions:[5,10,20,50],t:V()};function I({htmlFor:t,text:r}){return s.jsx(J.Text,{children:s.jsx("label",{htmlFor:t,children:r})})}I.propTypes={htmlFor:e.string,text:e.string.isRequired};function A({id:t,totalItems:r,selected:n,label:i,labelSelected:l,t:c}){return s.jsx("div",{className:"tc-items-number",id:t,children:n?l||c("LIST_TOOLBAR_NUMBER_OF_SELECTED_ITEMS",{defaultValue:"{{count}}/{{total}} item",defaultValue_other:"{{count}}/{{total}} items",count:n,total:r}):i||c("LIST_TOOLBAR_TOTAL_NUMBER_OF_ITEMS",{defaultValue:"{{count}} item",defaultValue_other:"{{count}} items",count:r})})}A.propTypes={id:e.string,selected:e.number,totalItems:e.number,label:e.string,labelSelected:e.string,t:e.func};A.defaultProps={t:V()};const q={"tc-list-toolbar":"_tc-list-toolbar_fm1tp_2"},R={"tc-list-toolbar-sort-by":"_tc-list-toolbar-sort-by_17w4f_2","tc-list-toolbar-order-indicator":"_tc-list-toolbar-order-indicator_17w4f_27"};function se({option:t,id:r,t:n,onSelect:i}){const l=t.name||t.id;return s.jsx(Q,{id:r&&`${r}-by-item-${t.id}`,eventKey:t,"aria-label":n("LIST_SELECT_SORT_BY",{defaultValue:"Select {{sortBy}} as current sort criteria.",sortBy:l}),onSelect:i,children:l})}se.propTypes={onSelect:e.func,option:e.shape({id:e.string,name:e.string}),id:e.string,t:e.func};function P({field:t,id:r,isDescending:n,onChange:i,options:l,t:c}){const o=n||!1,a=t&&l.find(d=>d.id===t);function p(d,g){return i(g,{field:d.id,isDescending:o})}function u(d){return i(d,{field:a.id,isDescending:!o})}const f=a?a.name||a.id:"N.C",m=o?c("LIST_SELECT_SORT_BY_ORDER_DESC",{defaultValue:"Descending"}):c("LIST_SELECT_SORT_BY_ORDER_ASC",{defaultValue:"Ascending"});return s.jsxs(W,{className:R["tc-list-toolbar-sort-by"],children:[l.length===1?s.jsx("li",{className:"navbar-text",children:l[0].name}):s.jsx(X,{id:r?`${r}-by`:U(),title:f,onSelect:p,className:R["sort-by-items"],"aria-label":c("LIST_CHANGE_SORT_BY",{defaultValue:"Change sort criteria. Current sort criteria: {{sortBy}}.",sortBy:f}),children:l.map(d=>s.jsx(se,{option:d,id:r,t:c},r))}),a&&s.jsx("li",{children:s.jsxs(le,{id:r&&`${r}-order-chooser`,"aria-label":c("LIST_CHANGE_SORT_BY_ORDER",{defaultValue:"Change sort order. Current order: {{sortOrder}}.",sortOrder:m}),onClick:u,bsStyle:"link",className:x(R["tc-list-toolbar-order-chooser"],"tc-list-toolbar-order-chooser"),children:[s.jsx(S,{name:n?"talend-sort-desc":"talend-sort-asc"}),s.jsx(S,{name:"talend-caret-down",transform:!n&&"rotate-180",className:x("tc-list-toolbar-order-indicator",R["tc-list-toolbar-order-indicator"])})]})})]})}P.propTypes={field:e.string,id:e.string,isDescending:e.bool,onChange:e.func.isRequired,options:e.arrayOf(e.shape({id:e.string.isRequired,name:e.string})).isRequired,t:e.func};P.defaultProps={t:V()};function pe(t,r){return t&&t.map(n=>n.id?{...n,id:`${r}-actions-${n.id}`}:n)}function z(t,r){return t&&{left:pe(t.left,r)}}function K({actionBar:t,columnChooser:r,components:n,display:i,filter:l,getComponent:c,id:o,itemsNumber:a,pagination:p,sort:u,t:f}){const m=k.getAll(c,{ActionBar:$,FilterBar:Z}),d=k.all(c,n);let g=t;if(o&&t){const{actions:v,multiSelectActions:L}=t;g={...t,getComponent:c,actions:z(v,o),multiSelectActions:z(L,o)}}const _=o&&`${o}-display-mode`;return s.jsxs("div",{className:x(q["tc-list-toolbar"],"tc-list-toolbar"),children:[d("before-actionbar"),t&&s.jsx(m.ActionBar,{...g,className:"list-action-bar",children:s.jsx($.Content,{right:!0,children:s.jsxs("ul",{children:[d("before-itemsnumber"),a&&s.jsx("li",{className:"separated",children:s.jsx(A,{id:o&&`${o}-items-number`,...a,selected:t.selected,t:f})}),d("before-filter"),l&&s.jsx("li",{className:"separated",children:s.jsx(m.FilterBar,{id:o&&`${o}-filter`,...l,t:f,navbar:!0})}),d("after-filter"),d("before-sort"),u&&s.jsxs("li",{className:"select-sort-by separated",children:[s.jsx(I,{text:f("LIST_TOOLBAR_SORT_BY",{defaultValue:"Sort by:"}),htmlFor:o&&`${o}-sort-by`}),s.jsx(P,{id:o&&`${o}-sort`,...u,t:f})]}),d("after-sort"),r&&s.jsx("li",{className:"separated",children:s.jsx(ee,{id:`${o}-column-chooser`,...r,t:f})}),d("before-displaymode"),i&&s.jsx("li",{className:"separated",children:s.jsx(G,{id:_,...i,t:f})}),d("after-displaymode")]})})}),d("after-actionbar"),p&&s.jsxs(J,{componentClass:"div",className:q["tc-list-toolbar"],role:"toolbar",fluid:!0,children:[d("before-pagination"),p&&s.jsx(I,{text:f("LIST_TOOLBAR_PAGINATION_SHOW",{defaultValue:"Show:"}),htmlFor:o&&`${o}-pagination-size`}),p&&s.jsx(O,{id:o&&`${o}-pagination`,...p,t:f}),d("after-pagination")]})]})}K.propTypes={id:e.string,actionBar:e.shape($.propTypes),display:e.shape(j(G.propTypes,"t")),sort:e.oneOfType([e.bool,e.shape({field:e.string,isDescending:e.bool,onChange:e.func.isRequired})]),pagination:e.shape(O.propTypes),filter:e.shape(j(Z.propTypes,"t")),itemsNumber:e.shape(j(A.propTypes,"t")),t:e.func.isRequired,getComponent:e.func,components:e.object,columnChooser:e.shape({submit:e.func,columns:e.array})};K.defaultProps={};const b=ce(ie)(K);b.Pagination=O;b.ColumnChooserButton=ee;b.DisplayModeToggle=G;b.ItemsNumber=A;b.Label=I;b.SelectAll=ae;b.SelectSortBy=P;const me="_list_1fha0_2",Y={list:me,"display-mode-large":"_display-mode-large_1fha0_9"},be=b.SelectAll;function M({id:t,columnChooser:r,toolbar:n,displayMode:i,list:l,getComponent:c,components:o={}}){if(!n)return null;const a=!!(i==="table"&&n.sort),p=i==="table",u={...n,id:t,columnChooser:r,getComponent:c,components:o};return n.display&&(u.display.mode=i),!p&&l.itemProps&&l.itemProps.isSelected&&l.itemProps.onToggleAll&&(u.selectAllCheckbox={id:t,items:l.items,isSelected:l.itemProps.isSelected,onToggleAll:l.itemProps.onToggleAll}),s.jsx(b,{...u,sort:!a&&u.sort})}M.propTypes={id:e.string,displayMode:e.string,list:e.shape({items:e.arrayOf(e.object),itemProps:e.shape({classNameKey:e.string,isActive:e.func,isSelected:e.func,onRowClick:e.func,onSelect:e.func,onToggle:e.func,onToggleAll:e.func,width:e.string}),sort:e.shape({field:e.string,isDescending:e.bool,onChange:e.func.isRequired})}),toolbar:e.shape(j(b.propTypes,"t")),columnChooser:e.shape({submit:e.func,columns:e.arrayOf(e.shape({hidden:e.bool,label:e.string,locked:e.bool,order:e.oneOfType([e.number,e.string])}))})};function C({columnChooser:t,components:r={},defaultHeight:n,displayMode:i,getComponent:l,id:c,list:o,rowHeight:a,rowRenderers:p,toolbar:u}){const f=x("tc-list",Y.list),m=k.all(l,j(r,["toolbar","list"]));let d;return i!=="table"&&o.itemProps&&o.itemProps.isSelected&&o.itemProps.onToggleAll&&(d={id:c,items:o.items,isSelected:o.itemProps.isSelected,onToggleAll:o.itemProps.onToggleAll}),s.jsxs("div",{className:f,children:[m("before-component"),m("before-toolbar"),s.jsx(M,{id:c,toolbar:u,displayMode:i,list:o,columnChooser:t,getComponent:l,components:r}),m("after-toolbar"),d&&s.jsx(be,{...d}),m("before-list-wrapper"),s.jsxs("div",{className:x("tc-list-display-virtualized",Y[`display-mode-${i}`]),children:[m("before-list"),s.jsx(H,{id:c,displayMode:i,defaultHeight:n,rowHeight:a,getComponent:l,rowRenderers:p,...o}),m("after-list")]}),m("after-list-wrapper"),m("after-component")]})}C.displayName="List";C.propTypes={...M.propTypes};C.defaultProps={displayMode:"table"};C.Toolbar=b;export{C as L};
