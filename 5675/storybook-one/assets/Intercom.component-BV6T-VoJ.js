import{r as u,j as l,I as T,c as E}from"./iframe-D37Phr64.js";import{T as C}from"./TooltipTrigger.component-DR5pn2u9.js";import"./index-BlZT6wrK.js";import{a as N}from"./translate-CAq4Kplr.js";import{I as x}from"./constants-CZYEPhht.js";import{w as S}from"./withTranslation-Borovdv1.js";function b(e){const t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=`https://widget.intercom.io/widget/${e}`;const n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}function w(e){if(typeof window.Intercom=="function")window.Intercom("reattach_activator"),window.Intercom("update",e);else{const t=function(){t.c(arguments)};t.q=[],t.c=n=>{t.q.push(n)},window.Intercom=t,b(e.app_id)}}function g(e,t={}){w(t),window.Intercom("boot",{...t,widget:{activator:e},hide_default_launcher:!0})}function M(e){window.Intercom("update",e)}function v(){window.Intercom("shutdown")}function R(e){window.Intercom("onHide",e)}function O(e){window.Intercom("onShow",e)}const y=".intercom-namespace .intercom-app div.intercom-messenger-frame",d=376,p=500;function j(e){let t,n,c=0;const i=setInterval(()=>{if(c+=1,c===10){clearInterval(i);return}if(t=document.querySelector("#intercom-container"),!t)return;const{bottom:o,left:a,right:r}=e.getBoundingClientRect(),m=Math.max(window.innerWidth-(r-(r-a)/2)-d/2,0),I=Math.max(window.innerWidth-m-d,0),_=o;n=document.createElement("style"),n.appendChild(document.createTextNode(`
			${y} {
				top: ${_}px;
				left: ${I}px;
				right: ${m}px;
				margin-top: 1.25rem;
			}
		`)),t.appendChild(n),clearInterval(i)},p);return function(){clearInterval(i),t&&n&&setTimeout(()=>t.removeChild(n),p)}}const s={init:w,boot:g,update:M,shutdown:v,onHide:R,onShow:O,setPosition:j},P="_open_djtwk_6",f={"tc-intercom":"_tc-intercom_djtwk_3",open:P};function h({id:e,className:t,config:n,t:c,tooltipPlacement:i}){const[o,a]=u.useState(!1),r=u.useRef(null);u.useEffect(()=>(s.boot(`#${e}`,n),s.onShow(a.bind(null,!0)),s.onHide(()=>{a(!1),r.current.focus()}),s.shutdown),[e,n,a]),u.useLayoutEffect(()=>s.setPosition(r.current),[r.current]);const m=o?c("TC_INTERCOM_CLOSE",{defaultValue:"Close chat with Talend Support"}):c("TC_INTERCOM_OPEN",{defaultValue:"Chat with Talend Support"});return l.jsx(C,{label:m,tooltipPlacement:i,children:l.jsx("button",{"data-feature":o?"ipc.close":"ipc.open","data-test":o?"close":"open",ref:r,id:e,className:E("btn","btn-link","tc-intercom",f["tc-intercom"],t,{[f.open]:o}),children:l.jsx(T,{name:"talend-bubbles"})})})}h.defaultProps={t:N(),tooltipPlacement:"bottom"};const k=S(x)(h);export{k as I};
