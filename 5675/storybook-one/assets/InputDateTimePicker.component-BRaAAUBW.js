import{r as I,j as c,P as t}from"./iframe-Fv_vVGZN.js";import{I as O}from"./InputDatePicker.component-BSXhbGKw.js";import{p as x,s as N,t as _,c as A,I as v}from"./InputTimePicker.component-BFyGKWQ3.js";import{I as U}from"./InputDateTimePicker.component-DeayqIOR.js";import{e as j,f as w,b as V}from"./locale-vCjV5JiD.js";import{s as Y}from"./setSeconds-C2tKzmMF.js";import{d as F,f as z}from"./Picker.component-CY4zCt5K.js";import{g as L}from"./useInputPickerHandlers-HGllpe_s.js";const E=I.createContext(),T=new Date("INTERNAL_INVALID_DATE");function S(e,n){this.message=L(n),this.code=e}function D(e){return e==null||e===""}function q(e,{useSeconds:n,useUTC:i,timezone:r}){let a=e.getHours(),o=e.getMinutes(),s=e.getSeconds();if(i)a=e.getUTCHours(),o=e.getUTCMinutes(),s=e.getUTCSeconds();else if(r){const d=j(e,{timeZone:r});a=d.getHours(),o=d.getMinutes(),s=d.getSeconds()}return{hours:x(a,2),minutes:x(o,2),seconds:n?x(s,2):"00"}}function W(e,n,i){return A({hours:e,minutes:n,seconds:i}),Number(e)*3600+Number(n)*60+Number(i)}function b(e,n,i){if(D(e)&&D(n))return null;if(D(e))throw new S("INVALID_DATE_EMPTY","INVALID_DATE_EMPTY");if(D(n))throw new S("INVALID_TIME_EMPTY","INVALID_TIME_EMPTY");let r=n;typeof n=="string"&&(r=N(n,i.useSeconds));const{hours:a,minutes:o,seconds:s}=r,d=W(a,o,s),u=Y(e,d);return z(u,i)}function P(e="",n="",i){const r=e instanceof Date?w(e,V(i.dateFormat)):e,a=typeof n=="string"?n:_(n,i.useSeconds);return`${r} ${a}`.trim()}function y(e,n){return isNaN(e.getTime())?{date:void 0,time:void 0,datetime:void 0}:{date:F(e,n),time:q(e,n),datetime:e}}function R(e,n){if(e==="")return{date:"",time:"",errors:[],errorMessage:null};let i,r,a,o=[];try{const s=e.split(/\s/);i=s[0],r=s[1],a=b(new Date(i),r,n)}catch(s){a=T,o=[s]}return{date:i,time:r,datetime:a,errors:o,errorMessage:o[0]?o[0].message:null}}function M(e,n){const i=typeof e;return i==="number"?y(new Date(e),n):i==="string"?R(e,n):e instanceof Date?y(e,n):{date:void 0,time:void 0,errors:[]}}function B(e,n,i){const{errors:r=[],date:a,textInput:o}=e;let s;const d=r;if(r.length>0)s=T;else try{s=b(a,n,i)}catch(u){s=T,d.push(u)}return{date:a||o,time:n,datetime:s,textInput:P(o||a,n,i),errors:r,errorMessage:d[0]?d[0].message:null}}function $(e,n,i){const{errors:r=[],time:a,textInput:o}=e;let s;const d=r;if(r.length>0)s=T;else try{s=b(n,a,i)}catch(u){s=T,d.push(u)}return{time:a||o,datetime:s,textInput:P(n,a||o,i),errors:r,errorMessage:d[0]?d[0].message:null}}function h(e){function n(){return{dateFormat:e.dateFormat,useSeconds:e.useSeconds,useUTC:e.useUTC,timezone:e.timezone,required:e.required}}const i=M(e.value,n()),[r,a]=I.useState(i);function o(u,l){if(e.onChange){const{datetime:f,textInput:m,errors:g,errorMessage:k}=l;e.onChange(u,{datetime:f,textInput:m,errors:g,errorMessage:k})}}I.useEffect(()=>{if(e.value!==r.datetime){const u=M(e.value,n());a(u),u.errors&&u.errors.length>0&&o(null,u)}},[e.value]);function s(u,l){const f=r.time||e.defaultTimeValue,m=B(l,f,n()),g={...r,...m};a(g),o(u,g)}function d(u,l){const f=$(l,r.date,n()),m={...r,...f};a(m),o(u,m)}return c.jsx(E.Provider,{value:{date:r.date,time:r.time,onDateChange:s,onTimeChange:d},children:e.children})}h.displayName="DateTime.Manager";h.propTypes={children:t.node,dateFormat:t.string,defaultTimeValue:t.string,onChange:t.func,required:t.bool,timezone:t.string,useSeconds:t.bool,useUTC:t.bool,value:t.oneOfType([t.instanceOf(Date),t.number,t.string])};h.defaultProps={dateFormat:"YYYY-MM-DD",useSeconds:!1,useUTC:!1};const H={Manager:h},Z={"date-time-picker":"_date-time-picker_u5053_1"};function C(e){return e.selectedDateTime&&console.warn('Warning: "selectedDateTime" is deprecated and will be removed in the next major version. Use "value" instead please.'),c.jsx(H.Manager,{id:e.id,value:e.value||e.selectedDateTime,useSeconds:e.useSeconds,useUTC:e.useUTC,timezone:e.timezone,onChange:e.onChange,defaultTimeValue:e.defaultTimeValue,children:c.jsx(E.Consumer,{children:({date:n,time:i,onDateChange:r,onTimeChange:a})=>c.jsxs("div",{className:Z["date-time-picker"],children:[c.jsx(O,{"data-testid":"date-picker",id:`${e.id}-date-picker`,readOnly:e.readOnly,disabled:e.disabled,onBlur:e.onBlur,onChange:r,value:n,dateFormat:e.dateFormat,startDate:e.startDate,endDate:e.endDate,minWidth:e.minWidthDate,isDisabledChecker:e.isDisabledChecker}),c.jsx(v,{"data-testid":"time-picker",id:`${e.id}-time-picker`,readOnly:e.readOnly,disabled:e.disabled,onBlur:e.onBlur,onChange:a,value:i,useSeconds:e.useSeconds,timezone:e.timezone,minWidth:e.minWidthTime})]})})})}C.propTypes={id:t.string.isRequired,value:t.oneOfType([t.instanceOf(Date),t.number,t.string]),selectedDateTime:t.oneOfType([t.instanceOf(Date),t.number,t.string]),onChange:t.func,onBlur:t.func,disabled:t.bool,readOnly:t.bool,dateFormat:t.string,useSeconds:t.bool,useUTC:t.bool,timezone:t.string,defaultTimeValue:t.shape({hours:t.string.isRequired,minutes:t.string.isRequired,seconds:t.string}),startDate:t.oneOfType([t.instanceOf(Date),t.number,t.string]),endDate:t.oneOfType([t.instanceOf(Date),t.number,t.string]),minWidthDate:t.number,minWidthTime:t.number,isDisabledChecker:t.bool};C.defaultProps={dateFormat:"YYYY-MM-DD",useSeconds:!1,useUTC:!1,required:!0};function G(e){return e.formMode?c.jsx(U,{...e}):c.jsx(C,{...e})}G.propTypes={formMode:t.bool,...O.propTypes};export{G as I};
