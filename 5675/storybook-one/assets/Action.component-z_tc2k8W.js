import{r as M,P as e,b as V,c as m,j as s,I as S,f as Q,h as X,k as Z,l as ee,m as te,n as oe,R as ne,o as se,p as re}from"./iframe-DDbQPtEW.js";import{A as ae}from"./ActionButton.component-C1rXDJXG.js";import{T as Y}from"./TooltipTrigger.component-RyTGuFAh.js";import"./index-Br5au_O-.js";import{O as F,I as g}from"./OverlayTrigger.component-BqP3Bda5.js";import"./index-DwN9fP63.js";import{C as q}from"./CircularProgress.component-apPtCWbd.js";import{w as ie,A as le}from"./ActionSplitDropdown.component-DJ2RyVCW.js";import{g as ce}from"./get-DEhvjXoT.js";import{o as de}from"./omit-D72adO18.js";import{I as pe}from"./constants-CZYEPhht.js";import{a as me}from"./translate-BAS4THSV.js";import{w as ge}from"./withTranslation-CBoklo2K.js";import{D as ue}from"./DropdownButton-Bs0K8Cqf.js";import{M as A}from"./SplitButton-BOEX_SVG.js";import{A as be}from"./ActionIconToggle.component-moWZDsKn.js";const B={"action-file-input":"_action-file-input_1wc51_2"},fe="left",v="right";class he extends M.Component{static displayName="ActionFile";static propTypes={accept:e.string,available:e.bool,bsStyle:e.string,className:e.string,disabled:e.bool,hideLabel:e.bool,icon:e.string,iconPosition:e.oneOf([fe,v]),iconTransform:e.string,id:e.string,inProgress:e.bool,label:e.oneOfType([e.string.isRequired,e.element.isRequired]),name:e.string,onChange:e.func.isRequired,tooltipPlacement:F.propTypes.placement,tooltip:e.bool,tooltipLabel:e.string,"data-feature":e.string};static defaultProps={available:!0,bsStyle:"default",tooltipPlacement:"top",inProgress:!1,disabled:!1};constructor(t){super(t),this.handleChange=this.handleChange.bind(this)}handleChange(t){t.preventDefault(),t.target.files.length>0&&(this.props.onChange(t,t.target.files[0]),t.target.value=null)}render(){const{accept:t,available:n,bsStyle:r,className:d,"data-feature":a,disabled:l,inProgress:i,hideLabel:c,icon:u,iconPosition:x,iconTransform:T,id:D,label:b,name:L,tooltip:j,tooltipLabel:I,tooltipPlacement:f}=this.props;if(!n)return null;const _=D||V(),O=i?s.jsx(q,{size:"small"},"icon"):u&&s.jsx(S,{name:u,transform:T},"icon"),h=c?null:s.jsx("span",{children:b},"label"),y=m(`btn btn-${r}`,B["btn-file"],(l||i)&&"disabled",(c||!b)&&"btn-icon-only"),N=s.jsxs("span",{className:d,children:[s.jsx("input",{onChange:this.handleChange,type:"file","data-test":_,accept:t,name:L,id:_,disabled:i||l,className:m(B["action-file-input"],"sr-only")}),s.jsx("label",{htmlFor:_,className:y,"data-feature":a,children:x===v?[h,O]:[O,h]})]});return c||j||I?s.jsx(Y,{label:I||b,tooltipPlacement:f,children:N}):N}}const we="_ellipsis_1rmj7_20",p={"tc-dropdown-button":"_tc-dropdown-button_1rmj7_3","tc-dropdown-caret":"_tc-dropdown-caret_1rmj7_11","tc-dropdown-caret-open":"_tc-dropdown-caret-open_1rmj7_17",ellipsis:we,"tc-dropdown-item":"_tc-dropdown-item_1rmj7_29","tc-dropdown-item-badge":"_tc-dropdown-item-badge_1rmj7_36","tc-dropdown-loader":"_tc-dropdown-loader_1rmj7_39"},P=({bsStyle:o,...t})=>{let n=Q;switch(o?.toLowerCase()){case"info":n=oe;break;case"success":n=te;break;case"warning":n=ee;break;case"danger":n=Z;break;case"beta":n=X;break}return s.jsx(n,{...t})};P.displayName="Tag";P.propTypes={bsStyle:e.string};function G(o){return!isNaN(o)&&o>=1e3?"999+":o}const Te="tc-dropdown-container";function R({getComponent:o,component:t,divider:n,withMenuItem:r,liProps:d,menuItemProps:a,onSelect:l,onKeyDown:i,...c}){const u=g.getAll(o,{MenuItem:A});return n?s.jsx(u.MenuItem,{...a,divider:!0}):r?s.jsx(u.MenuItem,{...a,onSelect:l,onKeyDown:i,children:s.jsx(g,{component:t,getComponent:o,...c})}):s.jsx("li",{role:"presentation",...d,children:s.jsx(g,{component:t,getComponent:o,onSelect:l,...c})})}R.propTypes={getComponent:e.func.isRequired,component:e.string,divider:e.bool,withMenuItem:e.bool,liProps:e.object,menuItemProps:e.object,onSelect:e.func,onKeyDown:e.func};R.displayname="InjectDropdownMenuItem";function W(o,t,n){const r=g.getAll(n,{MenuItem:A});if(o.divider)return s.jsx(r.MenuItem,{divider:!0},t);const d=o.title||o.label,a=ce(o,"badge.label","");return M.createElement(r.MenuItem,{...o,key:t,eventKey:o,onClick:ie(o),title:a?`${a} ${d}`:d,className:m(p["tc-dropdown-item"],"tc-dropdown-item")},o.icon&&s.jsx(S,{name:o.icon},"icon"),!o.hideLabel&&o.label,o.badge&&s.jsx(P,{className:m(p["tc-dropdown-item-badge"],"tc-dropdown-item-badge"),bsStyle:o.badge.bsStyle||"default",children:G(o.badge.label)}))}function De(o,t,n){return se.Iterable.isIterable(o)?W(o.toJS(),t,n):W(o,t,n)}function Ie(o){let t=o;do t=t.parentElement;while(t&&t.tagName!=="BODY"&&!t.classList.contains(Te));return t}class E extends M.Component{constructor(t){super(t),this.onToggle=this.onToggle.bind(this),this.onItemSelect=this.onItemSelect.bind(this),this.state={}}componentDidUpdate(t,n){if(!n.isOpen&&this.state.isOpen){const r=ne.findDOMNode(this.ref),d=r.querySelector(".dropdown-toggle"),a=d.nextSibling,l=Ie(d);if(l){const i=a.getBoundingClientRect(),c=l.getBoundingClientRect();!r.classList.contains("dropup")&&i.bottom>c.bottom&&i.height<c.top?r.classList.add("dropup"):r.classList.contains("dropup")&&i.top<c.top&&r.classList.remove("dropup")}}}onToggle(t){this.setState({isOpen:t},()=>{this.props.onToggle&&this.props.onToggle(t)})}onItemSelect(t,n){this.props.onSelect&&this.props.onSelect(n,t)}render(){const{bsStyle:t="default",hideLabel:n,icon:r,iconTransform:d,items:a=[],badge:l,label:i,link:c,onSelect:u,tooltipPlacement:x="top",tooltipLabel:T,getComponent:D,components:b,className:L,loading:j,children:I,ellipsis:f,t:_=me(),...O}=this.props,h=g.getAll(D,{MenuItem:A,DropdownButton:ue}),y=g.all(D,b,R),N=!f&&[r&&s.jsx(S,{name:r,transform:d},"icon"),!n&&s.jsx("span",{className:"tc-dropdown-button-title-label",children:i},"label"),l&&s.jsx(P,{className:m(p["tc-dropdown-item-badge"],"tc-dropdown-item-badge"),bsStyle:l.bsStyle||"default",children:G(l.label)}),s.jsx(S,{name:"talend-caret-down",className:m(p["tc-dropdown-caret"],{[p["tc-dropdown-caret-open"]]:this.state.isOpen})},"caret")].filter(Boolean),H=c||f?"link":t,k=s.jsxs(h.DropdownButton,{id:this.props.id,title:N,bsStyle:H,role:"button",onSelect:this.onItemSelect,className:m(p["tc-dropdown-button"],"tc-dropdown-button",L,{[p.ellipsis]:f}),"aria-label":T||i,...de(O,"tReady"),onToggle:this.onToggle,ref:C=>{this.ref=C},noCaret:!0,children:[!I&&!a.length&&!a.size&&!j&&!b&&s.jsx(h.MenuItem,{disabled:!0,children:_("ACTION_DROPDOWN_EMPTY",{defaultValue:"No options"})},"empty"),y("beforeItemsDropdown"),a.map((C,J)=>De(C,J,D)),j&&s.jsx(h.MenuItem,{header:!0,className:m(p["tc-dropdown-item"],"tc-dropdown-item",p["tc-dropdown-loader"],"tc-dropdown-loader"),children:s.jsx(q,{})},a?a.length+1:0),y("itemsDropdown"),I,y("afterItemsDropdown")]});return n||T||f?s.jsx(Y,{label:T||i,tooltipPlacement:x,children:k}):k}}E.displayName="ActionDropdown";E.propTypes={id:e.string,bsStyle:e.string,className:e.string,dropup:e.bool,hideLabel:e.bool,noCaret:e.bool,pullRight:e.bool,icon:e.string,iconTransform:e.string,items:e.oneOfType([e.arrayOf(e.shape({icon:e.string,label:e.string,...A.propTypes})),re.list]),badge:e.shape({className:e.string,label:e.string,bsStyle:e.string}),label:e.string.isRequired,link:e.bool,loading:e.bool,ellipsis:e.bool,onToggle:e.func,onSelect:e.func,tooltipPlacement:F.propTypes.placement,tooltipLabel:e.string,getComponent:e.func,components:e.shape({beforeItemsDropdown:e.oneOfType([e.object,e.array]),itemsDropdown:e.oneOfType([e.object,e.array]),afterItemsDropdown:e.oneOfType([e.object,e.array])}),t:e.func,children:e.node};const _e=ge(pe)(E),$="file",U="dropdown",z="splitDropdown",K="iconToggle";function ye({displayMode:o,getComponent:t}){const n=g.getAll(t,{ActionFile:he,ActionDropdown:_e,ActionSplitDropdown:le,ActionIconToggle:be,ActionButton:ae});switch(o){case $:return n.ActionFile;case U:return n.ActionDropdown;case z:return n.ActionSplitDropdown;case K:return n.ActionIconToggle;default:return g.get(t,o,n.ActionButton)}}function w({displayMode:o,getComponent:t,...n}){const r=ye({displayMode:o,getComponent:t});return s.jsx(r,{...n})}w.DISPLAY_MODE_FILE=$;w.DISPLAY_MODE_DROPDOWN=U;w.DISPLAY_MODE_SPLIT_DROPDOWN=z;w.DISPLAY_MODE_ICON_TOGGLE=K;w.displayName="Action";w.propTypes={displayMode:e.string,getComponent:e.func};export{w as A,Te as D,P as T,_e as a,G as g};
