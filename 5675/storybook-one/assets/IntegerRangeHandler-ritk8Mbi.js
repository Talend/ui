import{u as y,r as g,j as s,c as M,i as T}from"./iframe-DDbQPtEW.js";import{S as F}from"./TreeView.component-CqGr2WhA.js";import{n as E}from"./ResourcePicker.component-BD_wmZfg.js";import{I as $}from"./constants-CKAkME3b.js";import{e as q}from"./cjs-D_oTxX6A.js";import{f as k,s as C,p as R,n as v}from"./locale-fkJFDnVX.js";import"./transform-CLRdSQou.js";import{t as A}from"./time-Bxxu2oqH.js";import{q as O}from"./linear-BUPp6Ss9.js";const m={"range-filter":"_range-filter_1f7sq_1","range-filter__slider":"_range-filter__slider_1f7sq_5","range-filter__slider-mark":"_range-filter__slider-mark_1f7sq_8","range-filter__slider-mark--top":"_range-filter__slider-mark--top_1f7sq_14","range-filter__slider-mark--bottom-left":"_range-filter__slider-mark--bottom-left_1f7sq_17","range-filter__slider-mark--bottom-right":"_range-filter__slider-mark--bottom-right_1f7sq_21","range-filter__form":"_range-filter__form_1f7sq_32","range-filter__input-container":"_range-filter__input-container_1f7sq_36","range-filter__label":"_range-filter__label_1f7sq_41"};function S(e){const t={};return Object.entries(e).map(([n,r])=>[+n,r]).sort((n,r)=>n[0]-r[0]).forEach(([n,r],a,o)=>{const i={0:"bottom-left",[o.length-1]:"bottom-right"}[a]||"top";t[n]=s.jsx("span",{className:M(m["range-filter__slider-mark"],m[`range-filter__slider-mark--${i}`]),children:r})}),t}function oe({id:e,range:t,limits:n,getMinValue:r=_=>_,getMaxValue:a=_=>_,getStep:o=()=>1,inputField:i,onSliderChange:l,onAfterChange:f,getTicks:c}){const{t:_}=y($),j=g.useMemo(()=>S(c(n)),[n,c]);let h=!1;return s.jsxs("div",{className:m["range-filter"],children:[s.jsx("div",{className:m["range-filter__slider"],children:s.jsx(F,{step:o(n),onChange:([u,p])=>l({min:r(u),max:a(p)}),onAfterChange:([u,p])=>{h||(h=!0,f({min:u,max:p}))},min:n.min,max:n.max,value:[t.min,t.max],allowCross:!1,hideTooltip:!0,marks:j})}),s.jsxs("form",{className:m["range-filter__form"],children:[s.jsxs("div",{className:m["range-filter__input-container"],children:[s.jsx("label",{className:m["range-filter__label"],htmlFor:`${e}-range-filter-min-input`,children:_("MIN","Min")}),s.jsx(i,{id:`${e}-range-filter-min-input`,value:t.min,onChange:u=>{f({min:Math.min(Math.max(r(u),n.min),t.max),max:t.max})}})]}),s.jsxs("div",{className:m["range-filter__input-container"],children:[s.jsx("label",{className:m["range-filter__label"],htmlFor:`${e}-range-filter-max-input`,children:_("MAX","Max")}),s.jsx(i,{id:`${e}-range-filter-max-input`,value:t.max,onChange:u=>f({min:t.min,max:Math.max(t.min,Math.min(a(u),n.max))})})]})]})]})}const V="yyyy-MM-dd",H="yyyy-MM-dd HH:mm:ss";function b(e){const t=`${e}`.match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return Math.max(0,(t?.[1]?.length||0)-+(t?.[2]||0))}function D(e){return k(e,V)}function le(e){return k(e,H)}function d(e,t){return e>1e10?e.toFixed(0):e.toLocaleString(T.language,{maximumFractionDigits:t})}function I(e,t,n){const r={};return[e.min,e.max,...t].forEach((a,o)=>{const i=n(a);(o<2||!Object.values(r).includes(i))&&(r[a]=i)}),r}function w(e,t){return I(e,A().domain([e.min,e.max]).ticks(3).map(n=>n.getTime()),t)}function N(e,t,n,r){const[a,o]=g.useState(""),i=g.useCallback(()=>{o(t(e))},[t,e]);function l(f){const c=n(f);c!==null?c!==e&&r(c):i()}return g.useEffect(()=>{i()},[i]),{value:a,setInputValue:o,onKeyDown:f=>{f.key==="Enter"?l(a):f.key==="Escape"&&i()},onBlur:()=>l(a),submit:l}}function P(e){return C(new Date(e)).getTime()}function K(e){return q(new Date(e)).getTime()}function B(e){const t=R(e);return v(t)?t.getTime():null}function L({id:e,value:t,onChange:n}){const{setInputValue:r,submit:a,...o}=N(t,D,B,n);return s.jsx(E,{id:e,onChange:(i,l)=>{l.origin==="PICKER"&&a(l.textInput),r(l.textInput)},...o})}const me={inputField:L,getMinValue:P,getMaxValue:K,getStep:()=>24*3600*1e3,getTicks:e=>w(e,D)},X={"number-input-field":"_number-input-field_1ut8s_1"},Z=e=>`${e}`,z=e=>+e;function x(e){return Math.max(b(e.min),b(e.max))}function G(e){const t=x(e);return(+`1e-${t}`).toFixed(t)}function J(e){const t=x(e),r=Math.max(d(e.min,t).length,d(e.max,t).length)<11?3:1;return I(e,O().domain([e.min,e.max]).ticks(r),a=>d(a,+x(e)))}function Q({id:e,value:t,onChange:n}){const{setInputValue:r,submit:a,...o}=N(t,Z,z,n);return s.jsx("input",{id:e,className:M(X["number-input-field"]),type:"number",step:"any",onChange:i=>r(i.target.value),...o})}const U={inputField:Q,getStep:G,getTicks:J},fe={...U,getStep:()=>1,getMinValue:Math.floor,getMaxValue:Math.ceil};export{me as D,fe as I,U as N,oe as R,D as a,le as b,w as f,N as u};
