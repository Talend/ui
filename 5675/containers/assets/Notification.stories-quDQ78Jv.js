import{b as c,j as m,a0 as O,e as N,P as p,x as S,I as g,a1 as I,h as d,f as T,B as C,p as y}from"./iframe-CDk27K55.js";import"./preload-helper-PPVm8Dsz.js";const _=new c.Map({notifications:new c.List});function u(t){const e=(t.state||_).toJS();return m.jsx(O,{leaveFn:o=>t.deleteNotification(o),notifications:e.notifications,autoLeaveError:t.autoLeaveError})}u.displayName="Container(Notification)";u.propTypes={deleteNotification:p.func,autoLeaveError:p.bool,...N.propTypes};function w(t){return t&&t.id||"Notification"}function R(t){return function(o){const n=o.state.get("notifications"),i=n.indexOf(t);if(i>-1){const E=n.delete(i);return o.state.set("notifications",E)}return o.state}}function b(t,e,o){return{deleteNotification(n){e.setState(R(n))},...o,...t,...e}}const a=N({componentId:w,defaultState:_,defaultProps:{saga:"Notification#default"},mergeProps:b,omitCMFProps:!0,withComponentRegistry:!0,withDispatch:!0,withDispatchActionCreator:!0,withComponentId:!0})(u);function A(t,e){if(!S(e,"message"))return t;const o=["Container(Notification)","Notification","notifications"];let n=t.cmf.components.getIn(o,new g.List);n=n.push({id:I(),...e});const i={...t};return i.cmf.components=t.cmf.components.setIn(o,n),i}function P(t){const e=["Container(Notification)","Notification","notifications"];let o=t.cmf.components.getIn(e);if(!o)return t;o=o.clear();const n={...t};return n.cmf.components=t.cmf.components.setIn(e,o),n}const r={PUSH_NOTIFICATION:"PUSH_NOTIFICATION",TYPE_INFO:"info",TYPE_WARNING:"warning",TYPE_ERROR:"error"};function f(t){return{type:r.PUSH_NOTIFICATION,notification:t}}function F(t){return f({...t,type:r.TYPE_INFO})}function x(t){return f({...t,type:r.TYPE_WARNING})}function h(t){return f({...t,type:r.TYPE_ERROR})}const D=Object.freeze(Object.defineProperty({__proto__:null,pushError:h,pushGeneric:f,pushInfo:F,pushWarning:x},Symbol.toStringTag,{value:"Module"}));var L={};const U=T.constants,j=T.onError,l="Notification";function*k(t){const o=(yield C(i=>a.getState(i,l))).updateIn(["notifications"],i=>i.push({id:I(),...t.notification})),n=a.setStateAction(o,l);yield y(n)}function*M(t){if(L.DISABLE_JS_ERROR_NOTIFICATION)return;const e=t.error,o={href:j.createObjectURL(e),label:"Download details",download:"report.json","data-feature":"download-on-error-details"},n={type:"error",title:e.name,message:e.message,action:o};yield y(h(n))}function*v(){yield d(r.PUSH_NOTIFICATION,k),yield d(U.ERROR,M)}const Y={"Notification#default":v};a.push=A;a.clear=P;a.actions=D;a.constants=r;a.sagas=Y;const H=new c.Map({notifications:new c.List([{id:"story-1",message:"This is a feedback of your operation1, This is a feedback of your operation1"},{id:"story-2",type:"error",message:["This is a feedback of your operation2","This is a feedback of your operation1, This is a feedback of your operation1"]},{id:"story-3",type:"warning",message:["This is a feedback of your operation3","details"]}])}),B={title:"Notification",parameters:{chromatic:{disableSnapshot:!0}}},s=()=>m.jsx(a,{initialState:H});s.parameters={...s.parameters,docs:{...s.parameters?.docs,source:{originalSource:"() => <Notification initialState={initialState} />",...s.parameters?.docs?.source}}};const J=["Default"];export{s as Default,J as __namedExportsOrder,B as default};
