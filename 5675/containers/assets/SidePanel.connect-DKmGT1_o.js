import{b as m,r as h,e as c,j as C,ai as T,f,x as r}from"./iframe-B-rgu4zP.js";import{o as k}from"./omit-Knk8ATwS.js";const p="MENU_LINK",l=new m.Map({docked:!1});let d=class extends h.Component{static displayName="Container(SidePanel)";static propTypes={...c.propTypes};constructor(e,t){super(e,t),this.onToggleDock=this.onToggleDock.bind(this)}onToggleDock(){const e=this.props.state||l;this.props.setState({docked:!e.get("docked")})}render(){const{state:e=l}=this.props,t={docked:e.get("docked"),onToggleDock:this.onToggleDock,...k(this.props,c.INJECTED_PROPS)};return C.jsx(T,{...t})}};d.ACTION_TYPE_LINK=p;const s={};function u(o="default",e,t){return s[o]||(s[o]={}),(s[o].route!==e||s[o].actions!==t)&&(s[o]={route:e,actions:t}),s[o]}function g(o,e){const t=o.length;return e.length+1===t?`${e}/`===o:e.length===t?e===o:e.length<t?!1:o===e.slice(0,t)&&["/","#"].includes(e[t])}function A(o){return o.map(e=>e.href&&!e.onClick&&!e.onClickDispatch&&!e.onClickActionCreator?{...e,onClick:t=>{!t.metaKey&&!t.ctrlKey&&(t.preventDefault(),t.stopPropagation())},onClickDispatch:{type:p,cmf:{routerPush:e.href}}}:e)}function S(o,e){const t=n=>!window.basename||window.basename==="/"||n.startsWith(window.basename)?n:`${window.basename||""}${n}`.replaceAll("//","/");return e.find(n=>n.href&&g(t(n.href),o))}function w(o,e,t){const n={actionId:o},i=f.action.getActionInfo({registry:f.registry.getRegistry(),store:{getState:()=>t}},o);n.label=i.label,n.id=i.id;const a=r(i,"payload.cmf.routerReplace",r(i,"payload.cmf.routerPush",r(i,"href")));return a&&g(a,e)&&(n.active=!0),n}function b(o,e,t){if(e.actions){let n=e.actions;window.basename&&window.basename!=="/"&&(n=e.actions.map(a=>({...a,href:`${window.basename}${a.href}`.replaceAll("//","/")})));const i=u(e.componentId,t,n);return i.value||(i.value=A(n)),i.value}else if(e.actionIds){const n=u(e.componentId,t,e.actionIds);return n.value||(n.value=e.actionIds.map(i=>w(i,t,o))),n.value}}function y(o,e){const t={},n=window.location.pathname;return t.actions=b(o,e,n),e.actions&&(t.selected=S(n,t.actions)),t}function D(o,e,t){const n={...t,...o,...e};return n.actionIds&&delete n.actionIds,n}const N=c({defaultState:l,omitCMFProps:!0,withComponentRegistry:!0,withDispatch:!0,withDispatchActionCreator:!0,withComponentId:!0,keepComponentState:!0,mapStateToProps:y,mergeProps:D})(d);export{N as S};
