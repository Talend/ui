"use strict";(self.webpackChunk_talend_react_containers=self.webpackChunk_talend_react_containers||[]).push([[736],{"./src/Form/Form.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Form_stories});var react=__webpack_require__("../../node_modules/react/index.js"),lib_esm=__webpack_require__("../cmf/lib-esm/index.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),immutable=__webpack_require__("../../node_modules/immutable/dist/immutable.js"),immutable_default=__webpack_require__.n(immutable),forms_lib_esm=__webpack_require__("../forms/lib-esm/index.js"),classnames=__webpack_require__("../../node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),process=__webpack_require__("../../node_modules/process/browser.js");function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}let DefaultArrayFieldTemplate=()=>null;process.env.FORM_MOZ&&(DefaultArrayFieldTemplate=forms_lib_esm.Ay.deprecated.templates.ArrayFieldTemplate);const DEFAULT_STATE=new(immutable_default().Map)({});class Form extends react.Component{static getFormData(state,formId){return state.cmf.components.getIn(["Container(Form)",formId,"data"],new(immutable_default().Map))}static getDerivedStateFromProps(nextProps,prevState){return prevState?nextProps.state||nextProps.formId===prevState.formId?nextProps.data!==prevState.data?{data:nextProps.data}:null:(nextProps.deleteState(),null):(nextProps.initState(),null)}constructor(props){super(props),this.state=DEFAULT_STATE.toJS(),this.formActions=this.formActions.bind(this),this.onChange=this.onChange.bind(this),this.onSubmit=this.onSubmit.bind(this),this.onErrors=this.onErrors.bind(this),this.jsonSchema=this.jsonSchema.bind(this),this.uiSchema=this.uiSchema.bind(this),this.data=this.data.bind(this)}componentDidUpdate(prevProps,prevState){prevState.data!==this.state.data&&this.props.setState({data:this.state.data})}onChange(event,form){this.props.setState({data:form.formData,dirty:!0}),this.props.onChange&&this.props.onChange(form)}onErrors(event,errors){this.props.setState({errors}),this.props.onErrors&&this.props.onErrors(event,errors)}onSubmit(event,formData){this.props.onSubmit&&this.props.onSubmit(formData),this.props.onSubmitActionCreator&&this.props.dispatchActionCreator(this.props.onSubmitActionCreator,null,{props:this.props,formData})}jsonSchema(){const state=(this.props.state||DEFAULT_STATE).toJS();return"function"==typeof this.props.jsonSchema?this.props.jsonSchema(state.data):this.props.jsonSchema}uiSchema(){const state=(this.props.state||DEFAULT_STATE).toJS();return"function"==typeof this.props.uiSchema?this.props.uiSchema(state.data):this.props.uiSchema}data(){const state=(this.props.state||DEFAULT_STATE).toJS();return"function"==typeof this.props.data?this.props.data(state.data):{...this.props.data,...state.data}}errors(){const state=(this.props.state||DEFAULT_STATE).toJS();return"function"==typeof this.props.errors?this.props.errors(state.errors):{...this.props.errors,...state.errors}}formActions(){if("function"==typeof this.props.actions){const state=(this.props.state||DEFAULT_STATE).toJS();return this.props.actions(state.data||this.props.data)}return this.props.actions}render(){const state=(this.props.state||DEFAULT_STATE).toJS(),props={data:{jsonSchema:this.jsonSchema(),uiSchema:this.uiSchema(),properties:this.data(),errors:this.errors()},className:classnames_default()("tc-form","rjsf",this.props.className,{dirty:state.dirty,pristine:!state.dirty}),ArrayFieldTemplate:this.props.ArrayFieldTemplate||DefaultArrayFieldTemplate,actions:this.formActions(),fields:this.props.fields,onChange:this.onChange,onTrigger:this.props.onTrigger,onSubmit:this.onSubmit,onErrors:this.onErrors,customFormats:this.props.customFormats,customValidation:this.props.customValidation,buttonBlockClass:this.props.buttonBlockClass,children:this.props.children,uiform:this.props.uiform,language:this.props.language,widgets:this.props.widgets,getComponent:this.props.getComponent,loading:this.props.loading,...this.props.formProps};return(0,jsx_runtime.jsx)(forms_lib_esm.Ay,{...props,children:this.props.children})}}Form.displayName="Form",_defineProperty(Form,"displayName","Container(Form)"),_defineProperty(Form,"propTypes",{...lib_esm.TJ.propTypes,formId:prop_types_default().string.isRequired,data:prop_types_default().oneOfType([prop_types_default().func,prop_types_default().object])}),_defineProperty(Form,"defaultProps",{data:{}});const Form_container=Form,src_Form=(0,lib_esm.TJ)({defaultState:DEFAULT_STATE,componentId:props=>props.formId,omitCMFProps:!0,withComponentRegistry:!0,withDispatch:!0,withDispatchActionCreator:!0,withComponentId:!0})(Form_container);class SchemaInState extends react.Component{constructor(props){super(props),this.state={schema:'{\n    "jsonSchema": {\n      "title": "A registration form",\n      "description": "A simple form example.",\n      "type": "object",\n      "required": [\n        "firstName",\n        "lastName"\n      ],\n      "properties": {\n        "firstName": { "type": "string" },\n        "lastName": { "type": "string" },\n        "age": { "type": "integer" },\n        "bio": { "type": "string" },\n        "password": { "type": "string",  "minLength": 3 },\n        "enum": {  "type": "string", "enum": ["1", "two", "three"] }\n      }\n    },\n    "uiSchema": [\n      { "key": "firstName", "title": "First name", "autofocus": true },\n      { "key": "age", "title": "Age" },\n      { "key": "bio", "title": "Bio", "widget": "textarea" },\n      { "key": "password", "title": "Password", "type": "password", "description": "Hint: Make it strong!" }\n    ],\n    "data": {\n      "firstName": "Chuck",\n      "lastName": "Norris",\n      "age": 75,\n      "bio": "Roundhouse kicking asses since 1940",\n      "password": "noneed"\n    }\n  }\n'},this.onChange=this.onChange.bind(this)}onChange(event){this.setState({schema:event.target.value})}render(){return(0,jsx_runtime.jsxs)("div",{className:"container",children:[(0,jsx_runtime.jsx)("div",{className:"col-md-6",children:(0,jsx_runtime.jsx)(src_Form,{...JSON.parse(this.state.schema)})}),(0,jsx_runtime.jsxs)("div",{className:"col-md-6",children:[(0,jsx_runtime.jsx)("h2",{children:"Schema"}),(0,jsx_runtime.jsx)("textarea",{rows:"20",onChange:this.onChange,value:this.state.schema})]})]})}}SchemaInState.displayName="SchemaInState";const Form_stories={parameters:{storySource:{source:'import { Component } from \'react\';\n\nimport Form from \'.\';\n\nconst SCHEMA = `{\n\t"jsonSchema": {\n\t  "title": "A registration form",\n\t  "description": "A simple form example.",\n\t  "type": "object",\n\t  "required": [\n\t\t"firstName",\n\t\t"lastName"\n\t  ],\n\t  "properties": {\n\t\t"firstName": { "type": "string" },\n\t\t"lastName": { "type": "string" },\n\t\t"age": { "type": "integer" },\n\t\t"bio": { "type": "string" },\n\t\t"password": { "type": "string",  "minLength": 3 },\n\t\t"enum": {  "type": "string", "enum": ["1", "two", "three"] }\n\t  }\n\t},\n\t"uiSchema": [\n\t  { "key": "firstName", "title": "First name", "autofocus": true },\n\t  { "key": "age", "title": "Age" },\n\t  { "key": "bio", "title": "Bio", "widget": "textarea" },\n\t  { "key": "password", "title": "Password", "type": "password", "description": "Hint: Make it strong!" }\n\t],\n\t"data": {\n\t  "firstName": "Chuck",\n\t  "lastName": "Norris",\n\t  "age": 75,\n\t  "bio": "Roundhouse kicking asses since 1940",\n\t  "password": "noneed"\n\t}\n  }\n`;\n\nclass SchemaInState extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { schema: SCHEMA };\n\t\tthis.onChange = this.onChange.bind(this);\n\t}\n\n\tonChange(event) {\n\t\tthis.setState({ schema: event.target.value });\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className="container">\n\t\t\t\t<div className="col-md-6">\n\t\t\t\t\t<Form {...JSON.parse(this.state.schema)} />\n\t\t\t\t</div>\n\t\t\t\t<div className="col-md-6">\n\t\t\t\t\t<h2>Schema</h2>\n\t\t\t\t\t<textarea rows="20" onChange={this.onChange} value={this.state.schema} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default {\n\ttitle: \'Form\',\n};\n\nexport function Default() {\n\treturn <SchemaInState />;\n}\n',locationsMap:{default:{startLoc:{col:7,line:69},endLoc:{col:1,line:71},startBody:{col:7,line:69},endBody:{col:1,line:71}}}}},title:"Form"},Default=function Default(){return(0,jsx_runtime.jsx)(SchemaInState,{})};Default.displayName="Default",Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"function Default() {\n  return <SchemaInState />;\n}",...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]}}]);