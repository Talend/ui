"use strict";(self.webpackChunk_talend_ui_storybook_one=self.webpackChunk_talend_ui_storybook_one||[]).push([[1385],{"../a11y/lib-esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>lib_esm_Gesture,X:()=>focus_namespaceObject});var focus_namespaceObject={};__webpack_require__.r(focus_namespaceObject),__webpack_require__.d(focus_namespaceObject,{focusOn:()=>focusOn,focusOnCalendar:()=>focusOnCalendar,focusOnDay:()=>focusOnDay,focusWithinCurrentCalendar:()=>focusWithinCurrentCalendar});const FIRST=0,LAST=Number.POSITIVE_INFINITY;function focusOn(element){element&&element.focus()}function getAllItems(calendarRef){return calendarRef.querySelectorAll("td > button[data-value]")}function getDay(calendarRef,offset){const allItems=getAllItems(calendarRef);return allItems[offset>=0?offset:allItems.length+offset]}function focusWithinCurrentCalendar(calendarRef,indexToFocus=0){const allItems=getAllItems(calendarRef);indexToFocus===FIRST||indexToFocus<0?focusOn(allItems[0]):indexToFocus===LAST||indexToFocus>allItems.length-1?focusOn(allItems[allItems.length-1]):focusOn(allItems[indexToFocus])}function focusOnDay(calendarRef,indexToFocus,props){const allItems=getAllItems(calendarRef);indexToFocus<0?props.goToPreviousMonth(()=>{focusOn(getDay(calendarRef,indexToFocus))}):indexToFocus>allItems.length-1?props.goToNextMonth(()=>{focusOn(getDay(calendarRef,indexToFocus-allItems.length))}):focusOn(allItems[indexToFocus])}function focusOnCalendar(containerRef){let target=containerRef.querySelector('td[aria-current="date"] > button');target||(target=containerRef.querySelector("td > button[disabled=false]")),target||(target=containerRef.querySelector("td > button[data-value]")),target&&target.focus()}var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function withListGesture_getAllItems(ref){const closest=ref.closest('[role="list"]');return closest?closest.querySelectorAll('[role="listitem"]'):new NodeList}function onKeyDown(event,ref,loop){switch(event.key){case"Down":case"ArrowDown":event.stopPropagation(),event.preventDefault(),focusOn(function getNextItem(ref,loop){let nextElement,currentFound,hasNext;const nodes=withListGesture_getAllItems(ref),iterator=nodes.values();if(loop&&ref===nodes.item(nodes.length-1))return nodes.item(0);do{const{value,done}=iterator.next();currentFound?(nextElement=value,hasNext=!1):(currentFound=value===ref,hasNext=!done)}while(hasNext);return nextElement}(ref,loop));break;case"Up":case"ArrowUp":event.stopPropagation(),event.preventDefault(),focusOn(function getPreviousItem(ref,loop){let previousElement,hasNext;const nodes=withListGesture_getAllItems(ref),iterator=nodes.values();if(loop&&ref===nodes.item(0))return nodes.item(nodes.length-1);do{const{value,done}=iterator.next();value===ref?hasNext=!1:(previousElement=value,hasNext=!done)}while(hasNext);return previousElement}(ref,loop))}}var react=__webpack_require__("../../node_modules/react/index.js");function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function withTreeGesture_getAllItems(ref){const nodes=ref.closest('ul[role="tree"]');return nodes?nodes.querySelectorAll('li[role="treeitem"]'):null}function withDynamicListGesture_defineProperty(e,r,t){return(r=function withDynamicListGesture_toPropertyKey(t){var i=function withDynamicListGesture_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function focusOnListItem(ref,index){const listItem=function withDynamicListGesture_getAllItems(ref){return ref.querySelectorAll("li > button")}(ref)[index];focusOn(listItem)}class WithDynamicListGesture extends react.Component{constructor(props){super(props),withDynamicListGesture_defineProperty(this,"myRef",(0,react.createRef)()),this.onKeyDown=this.onKeyDown.bind(this)}onKeyDown(event,options){var _this$myRef,_this$myRef2,_this$myRef3,_this$myRef4;switch(event.key){case"Up":case"ArrowUp":event.preventDefault(),event.stopPropagation(),null!==(_this$myRef=this.myRef)&&void 0!==_this$myRef&&_this$myRef.current&&function focusOnPreviousItem(ref,{index,size},goToPreviousPage){const nextIndex=index-1;nextIndex<0&&size&&goToPreviousPage(()=>{focusOnListItem(ref,size-1)}),focusOnListItem(ref,nextIndex)}(this.myRef.current,options,this.props.goToPreviousPage);break;case"Down":case"ArrowDown":event.preventDefault(),event.stopPropagation(),null!==(_this$myRef2=this.myRef)&&void 0!==_this$myRef2&&_this$myRef2.current&&function focusOnNextItem(ref,{index,size},goToNextPage){const nextIndex=index+1;size&&nextIndex>=size&&goToNextPage(()=>{focusOnListItem(ref,0)}),focusOnListItem(ref,nextIndex)}(this.myRef.current,options,this.props.goToNextPage);break;case"PageUp":event.preventDefault(),event.stopPropagation(),null!==(_this$myRef3=this.myRef)&&void 0!==_this$myRef3&&_this$myRef3.current&&function focusOnNextPage(ref,{index},goToNextPage){goToNextPage(()=>focusOnListItem(ref,index))}(this.myRef.current,options,this.props.goToPreviousPage);break;case"PageDown":event.preventDefault(),event.stopPropagation(),null!==(_this$myRef4=this.myRef)&&void 0!==_this$myRef4&&_this$myRef4.current&&function focusOnPreviousPage(ref,{index},goToPreviousPage){goToPreviousPage(()=>focusOnListItem(ref,index))}(this.myRef.current,options,this.props.goToNextPage)}}render(){return(0,jsx_runtime.jsx)("div",{ref:this.myRef,className:this.props.className,children:this.props.children(this.onKeyDown)})}}function preventScroll(evt){["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","PageUp","PageDown","Left","Right","Up","Down"].includes(evt.key)&&evt.preventDefault()}function withCalendarGesture_defineProperty(e,r,t){return(r=function withCalendarGesture_toPropertyKey(t){var i=function withCalendarGesture_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function switchMonth(calendarRef,indexToFocus,monthSwitcher){monthSwitcher(()=>{focusWithinCurrentCalendar(calendarRef,indexToFocus)})}function withMonthCalendarGesture_defineProperty(e,r,t){return(r=function withMonthCalendarGesture_toPropertyKey(t){var i=function withMonthCalendarGesture_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const lib_esm_Gesture={withMonthCalendarGesture:function withMonthCalendarGesture(WrappedComponent,rowSize){var _MonthCalendarGesture;return _MonthCalendarGesture=class MonthCalendarGesture extends react.Component{constructor(props){super(props),withMonthCalendarGesture_defineProperty(this,"ref",(0,react.createRef)()),this.onKeyDown=this.onKeyDown.bind(this)}onKeyDown(event,calendarRef,monthIndex){switch(event.key){case"Left":case"ArrowLeft":event.stopPropagation(),focusWithinCurrentCalendar(calendarRef,monthIndex-1);break;case"Right":case"ArrowRight":event.stopPropagation(),focusWithinCurrentCalendar(calendarRef,monthIndex+1);break;case"Up":case"ArrowUp":event.stopPropagation(),focusWithinCurrentCalendar(calendarRef,monthIndex-rowSize);break;case"Down":case"ArrowDown":event.stopPropagation(),focusWithinCurrentCalendar(calendarRef,monthIndex+rowSize);break;case"Home":event.stopPropagation(),focusWithinCurrentCalendar(calendarRef,FIRST);break;case"End":event.stopPropagation(),focusWithinCurrentCalendar(calendarRef,LAST)}}render(){return(0,jsx_runtime.jsx)("div",{ref:this.ref,onKeyDown:preventScroll,children:(0,jsx_runtime.jsx)(WrappedComponent,{...this.props,onKeyDown:this.onKeyDown})})}},withMonthCalendarGesture_defineProperty(_MonthCalendarGesture,"displayName",`MonthCalendarGesture(${WrappedComponent.displayName})`),_MonthCalendarGesture},withListGesture:function withListGesture(WrappedComponent,loop=!1){function ListGesture(props){return(0,jsx_runtime.jsx)(WrappedComponent,{...props,onKeyDown:(event,ref)=>onKeyDown(event,ref,loop)})}return ListGesture.displayName=`ListGesture(${WrappedComponent.displayName})`,ListGesture},withTreeGesture:function withTreeGesture(WrappedComponent){var _TreeGesture;return _defineProperty(_TreeGesture=class TreeGesture extends react.Component{constructor(props){super(props),this.onKeyDown=this.onKeyDown.bind(this)}onKeyDown(event,ref,item){const{hasChildren,isOpened,siblings}=item;switch(event.key){case"Enter":case" ":case"Spacebar":event.stopPropagation(),this.props.onSelect(event,item);break;case"Left":case"ArrowLeft":hasChildren&&isOpened?(event.stopPropagation(),this.props.onToggle(event,item)):hasChildren&&isOpened||(event.stopPropagation(),focusOn(function getParentItem(ref){const parentElement=ref.parentElement;return parentElement?parentElement.closest('li[role="treeitem"]'):null}(ref)));break;case"Right":case"ArrowRight":hasChildren&&!isOpened?(event.stopPropagation(),this.props.onToggle(event,item)):hasChildren&&isOpened&&(event.stopPropagation(),focusOn(function getFirstChildItem(ref){return ref.querySelector('li[role="treeitem"]')}(ref)));break;case"Down":case"ArrowDown":event.stopPropagation(),focusOn(function withTreeGesture_getNextItem(ref){var _getAllItems;let currentFound,hasNext,nextElement=null;const nodes=null===(_getAllItems=withTreeGesture_getAllItems(ref))||void 0===_getAllItems?void 0:_getAllItems.values();if(!nodes)return nextElement;do{const{value,done}=nodes.next();currentFound?(nextElement=value,hasNext=!1):(currentFound=value===ref,hasNext=!done)}while(hasNext);return nextElement}(ref));break;case"Up":case"ArrowUp":event.stopPropagation(),focusOn(function withTreeGesture_getPreviousItem(ref){var _getAllItems2;let hasNext,previousElement=null;const nodes=null===(_getAllItems2=withTreeGesture_getAllItems(ref))||void 0===_getAllItems2?void 0:_getAllItems2.values();if(!nodes)return previousElement;do{const{value,done}=nodes.next();value===ref?hasNext=!1:(previousElement=value,hasNext=!done)}while(hasNext);return previousElement}(ref));break;case"Home":event.stopPropagation(),focusOn(function getFirstItem(ref){const nodes=ref.closest('ul[role="tree"]');return nodes?nodes.querySelector('li[role="treeitem"]'):null}(ref));break;case"End":event.stopPropagation(),focusOn(function getLastItem(ref){const nodes=withTreeGesture_getAllItems(ref);return nodes&&nodes.length>0?nodes.item(nodes.length-1):null}(ref))}"*"!==event.nativeEvent.key&&"Multiply"!==event.nativeEvent.key||(event.stopPropagation(),this.props.onToggleAllSiblings(event,siblings))}render(){const props={...this.props};return props.onKeyDown=this.onKeyDown,(0,jsx_runtime.jsx)(WrappedComponent,{...props})}},"displayName",`TreeGesture(${WrappedComponent.displayName})`),_TreeGesture},WithDynamicListGesture,withCalendarGesture:function withCalendarGesture(WrappedComponent){var _CalendarGesture;return _CalendarGesture=class CalendarGesture extends react.Component{constructor(props){super(props),withCalendarGesture_defineProperty(this,"ref",(0,react.createRef)()),this.onKeyDown=this.onKeyDown.bind(this)}onKeyDown(event,calendarRef,dayIndex){switch(event.key){case"Left":case"ArrowLeft":event.stopPropagation(),focusOnDay(calendarRef,dayIndex-1,this.props);break;case"Right":case"ArrowRight":event.stopPropagation(),focusOnDay(calendarRef,dayIndex+1,this.props);break;case"Up":case"ArrowUp":event.stopPropagation(),focusOnDay(calendarRef,dayIndex-7,this.props);break;case"Down":case"ArrowDown":event.stopPropagation(),focusOnDay(calendarRef,dayIndex+7,this.props);break;case"Home":event.stopPropagation(),focusWithinCurrentCalendar(calendarRef,FIRST);break;case"End":event.stopPropagation(),focusWithinCurrentCalendar(calendarRef,LAST);break;case"PageUp":event.stopPropagation(),switchMonth(calendarRef,dayIndex,this.props.goToPreviousMonth);break;case"PageDown":event.stopPropagation(),switchMonth(calendarRef,dayIndex,this.props.goToNextMonth)}}render(){return(0,jsx_runtime.jsx)("div",{ref:this.ref,onKeyDown:preventScroll,children:(0,jsx_runtime.jsx)(WrappedComponent,{...this.props,onKeyDown:this.onKeyDown})})}},withCalendarGesture_defineProperty(_CalendarGesture,"displayName",`CalendarGesture(${WrappedComponent.displayName})`),_CalendarGesture}}}}]);